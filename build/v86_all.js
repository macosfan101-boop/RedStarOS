'use strict';var n;function aa(){};function ca(a,b){return(a||0===a?a+"":"").padEnd(b," ")}function ea(a,b){return(a||0===a?a+"":"").padStart(b,"0")}function t(a,b,c,d){return new Proxy({},{get:function(e,g){e=new a(b.buffer,c,d);g=e[g];return"function"===typeof g?g.bind(e):g},set:function(e,g,h){(new a(b.buffer,c,d))[g]=h;return!0}})}function fa(a,b){return"0x"+ea((a?a.toString(16):"").toUpperCase(),b||1)}var ha;
if("undefined"!==typeof crypto&&crypto.getRandomValues){const a=new Int32Array(1);ha=function(){crypto.getRandomValues(a);return a[0]}}else if("undefined"!==typeof require){const a=require("crypto");ha=function(){return a.vm(4).readInt32LE(0)}}else"undefined"!==typeof process&&import("node:crypto").then(a=>{ha=function(){return a.randomBytes(4).readInt32LE(0)}});var ia;
if("function"===typeof Math.clz32)ia=function(a){return 31-Math.clz32(a)};else{for(var ka=new Int8Array(256),ma=0,na=-2;256>ma;ma++)ma&ma-1||na++,ka[ma]=na;ia=function(a){a>>>=0;var b=a>>>16;if(b){var c=b>>>8;return c?24+ka[c]:16+ka[b]}return(c=a>>>8)?8+ka[c]:ka[a]}}function qa(a){return 1>=a?1:1<<1+ia(a-1)}
function ra(a){var b=new Uint8Array(a),c,d;this.length=0;this.push=function(e){this.length!==a&&this.length++;b[d]=e;d=d+1&a-1};this.shift=function(){if(this.length){var e=b[c];c=c+1&a-1;this.length--;return e}return-1};this.clear=function(){this.length=d=c=0};this.clear()}function sa(){this.size=65536;this.data=new Float32Array(65536);this.length=this.end=this.start=0}
sa.prototype.push=function(a){this.length===this.size?this.start=this.start+1&this.size-1:this.length++;this.data[this.end]=a;this.end=this.end+1&this.size-1};sa.prototype.shift=function(){if(this.length){var a=this.data[this.start];this.start=this.start+1&this.size-1;this.length--;return a}};
function wa(a,b){var c=new Float32Array(b);b>a.length&&(b=a.length);var d=a.start+b,e=a.data.subarray(a.start,d);c.set(e);d>=a.size&&(d-=a.size,c.set(a.data.subarray(0,d),e.length));a.start=d;a.length-=b;return c}sa.prototype.clear=function(){this.length=this.end=this.start=0};function xa(a,b){Array.isArray(a)||(a=[a]);ya(new Blob(a),b)}
function ya(a,b){var c=document.createElement("a");c.download=b;c.href=window.URL.createObjectURL(a);c.dataset.downloadurl=["application/octet-stream",c.download,c.href].join(":");document.createEvent?(a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(a)):c.click();window.URL.revokeObjectURL(c.href)}function za(a){"number"===typeof a?this.view=new Uint8Array(a+7>>3):a instanceof ArrayBuffer&&(this.view=new Uint8Array(a))}
za.prototype.set=function(a,b){const c=a>>3;a=1<<(a&7);this.view[c]=b?this.view[c]|a:this.view[c]&~a};za.prototype.get=function(a){return this.view[a>>3]>>(a&7)&1};za.prototype.Cb=function(){return this.view.buffer};var Aa,Ba;
if("undefined"===typeof XMLHttpRequest||"undefined"!==typeof process&&process.Xl&&process.Xl.node){let a;Aa=async function(b,c){a||(a=await import("node:fs/promises"));if(c.Le){b=await a.open(b,"r");const d=Buffer.allocUnsafe(c.Le.length);try{await b.read({buffer:d,position:c.Le.start})}finally{await b.close()}c.done&&c.done(new Uint8Array(d))}else b=await a.readFile(b,{encoding:c.bf?"utf-8":null}),b=c.bf?JSON.parse(b):(new Uint8Array(b)).buffer,c.done(b)};Ba=async function(b){a||(a=await import("node:fs/promises"));
return(await a.stat(b)).size}}else Aa=async function(a,b,c){function d(){const k=c||0;setTimeout(()=>{Aa(a,b,k+1)},1E3*([1,1,2,3,5,8,13,21][k]||34))}var e=new XMLHttpRequest;e.open(b.method||"get",a,!0);e.responseType=b.bf?"json":"arraybuffer";if(b.headers)for(var g=Object.keys(b.headers),h=0;h<g.length;h++){var f=g[h];e.setRequestHeader(f,b.headers[f])}b.Le&&(g=b.Le.start,e.setRequestHeader("Range","bytes="+g+"-"+(g+b.Le.length-1)),e.setRequestHeader("X-Accept-Encoding","identity"),e.onreadystatechange=
function(){200===e.status&&(console.error("Server sent full file in response to ranged request, aborting",{filename:a}),e.abort())});e.onload=function(){if(4===e.readyState)if(200!==e.status&&206!==e.status)console.error("Loading the image "+a+" failed (status %d)",e.status),500<=e.status&&600>e.status&&d();else if(e.response){if(b.Le){const k=e.getResponseHeader("Content-Encoding");k&&"identity"!==k&&console.error("Server sent Content-Encoding in response to ranged request",{filename:a,mm:k})}b.done&&
b.done(e.response,e)}};e.onerror=function(k){console.error("Loading the image "+a+" failed",k);d()};b.progress&&(e.onprogress=function(k){b.progress(k)});e.send(null)},Ba=async function(a){return new Promise((b,c)=>{Aa(a,{done:(d,e)=>{d=e.getResponseHeader("Content-Range")||"";(e=d.match(/\/(\d+)\s*$/))?b(+e[1]):c(Error("`Range: bytes=...` header not supported (Got `"+d+"`)"))},headers:{Range:"bytes=0-0","X-Accept-Encoding":"identity"}})})};
function Ca(a,b,c){return String.fromCharCode(...(new Uint8Array(a.buffer,b>>>0,c>>>0)))}
const Da={Yg:" \u263a\u263b\u2665\u2666\u2663\u2660\u2022\u25d8\u25cb\u25d9\u2642\u2640\u266a\u266b\u263c\u25ba\u25c4\u2195\u203c\u00b6\u00a7\u25ac\u21a8\u2191\u2193\u2192\u2190\u221f\u2194\u25b2\u25bc !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00a2\u00a3\u00a5\u20a7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u2310\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c\u2588\u2584\u258c\u2590\u2580\u03b1\u00df\u0393\u03c0\u03a3\u03c3\u00b5\u03c4\u03a6\u0398\u03a9\u03b4\u221e\u03c6\u03b5\u2229\u2261\u00b1\u2265\u2264\u2320\u2321\u00f7\u2248\u00b0\u2219\u00b7\u221a\u207f\u00b2\u25a0 ",Mh:"\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb\u2591\u2592\u2593\u2502\u2524\u00c1\u00c2\u00c0\u00a9\u2563\u2551\u2557\u255d\u00a2\u00a5\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u00e3\u00c3\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8\u20ac\u00cd\u00ce\u00cf\u2518\u250c\u2588\u2584\u00a6\u00cc\u2580\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1\u2017\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2\u25a0 "};
Da.Mh=Da.Yg.slice(0,128)+Da.Mh;Da.hm=Da.Yg.split("").map((a,b)=>31<b&&128>b?a:".").join("");function Ea(a){return a&&Da[a]?Da[a]:Da.Yg};function Ga(a){this.buffer=a;this.byteLength=a.byteLength;this.onload=void 0}n=Ga.prototype;n.load=function(){this.onload&&this.onload({buffer:this.buffer})};n.get=function(a,b,c){c(new Uint8Array(this.buffer,a,b))};n.set=function(a,b,c){(new Uint8Array(this.buffer,a,b.byteLength)).set(b);c()};n.Cb=function(a){a(this.buffer)};n.ha=function(){const a=[];a[0]=this.byteLength;a[1]=new Uint8Array(this.buffer);return a};n.I=function(a){this.byteLength=a[0];this.buffer=a[1].slice().buffer};
function Ha(a,b,c){this.filename=a;this.byteLength=b;this.g=new Map;this.h=new Set;this.M=c;this.l=!!c;this.onload=void 0}n=Ha.prototype;n.load=async function(){void 0===this.byteLength&&(this.byteLength=await Ba(this.filename));this.onload&&this.onload(Object.create(null))};n.Sg=function(a,b){var c=b/256;a/=256;for(var d=0;d<c;d++)if(!this.g.get(a+d))return;if(1===c)return this.g.get(a);b=new Uint8Array(b);for(d=0;d<c;d++)b.set(this.g.get(a+d),256*d);return b};
n.get=function(a,b,c){var d=this.Sg(a,b);if(d)c(d);else{var e=a,g=b;this.M&&(e=a-a%this.M,g=Math.ceil((a-e+b)/this.M)*this.M);Aa(this.filename,{done:function(h){h=new Uint8Array(h);this.Tg(e,g,h);e===a&&g===b?c(h):c(h.subarray(a-e,a-e+b))}.bind(this),Le:{start:e,length:g}})}};n.set=function(a,b,c){a/=256;for(var d=b.length/256,e=0;e<d;e++){var g=this.g.get(a+e);void 0===g?this.g.set(a+e,b.slice(256*e,256*(e+1))):g.set(b.subarray(256*e,256*(e+1)));this.h.add(a+e)}c()};
n.Tg=function(a,b,c){a/=256;b/=256;for(var d=0;d<b;d++){const e=this.g.get(a+d);e?c.set(e,256*d):this.l&&this.g.set(a+d,c.slice(256*d,256*(d+1)))}};n.Cb=function(a){a()};n.ha=function(){const a=[],b=[];for(const [c,d]of this.g)this.h.has(c)&&b.push([c,d]);a[0]=b;return a};n.I=function(a){a=a[0];this.g.clear();this.h.clear();for(const [b,c]of a)this.g.set(b,c),this.h.add(b)};
function Ia(a,b,c,d){const e=a.match(/\.[^\.]+(\.zst)?$/);this.j=e?e[0]:"";this.i=a.substring(0,a.length-this.j.length);this.v=this.j.endsWith(".zst");this.i.endsWith("/")||(this.i+="-");this.g=new Map;this.h=new Set;this.byteLength=b;this.M=c;this.o=d;this.l=!!c;this.onload=void 0}n=Ia.prototype;n.load=function(){this.onload&&this.onload(Object.create(null))};
n.get=function(a,b,c){var d=this.Fh(a,b);if(d)c(d);else if(this.M){const g=Math.floor(a/this.M),h=a-g*this.M,f=Math.ceil((h+b)/this.M),k=new Uint8Array(f*this.M);let m=0;for(let l=0;l<f;l++){var e=(g+l)*this.M;d=this.i+e+"-"+(e+this.M)+this.j;(e=this.Fh(e,this.M))?(k.set(e,l*this.M),m++,m===f&&c(k.subarray(h,h+b))):Aa(d,{done:async function(p){p=new Uint8Array(p);this.v&&(p=await this.o(this.M,p),p=new Uint8Array(p));k.set(p,l*this.M);this.Gh((g+l)*this.M,this.M|0,p);m++;m===f&&c(k.subarray(h,h+b))}.bind(this)})}}else Aa(this.i+
a+"-"+(a+b)+this.j,{done:function(g){g=new Uint8Array(g);this.Gh(a,b,g);c(g)}.bind(this)})};n.Fh=Ha.prototype.Sg;n.set=Ha.prototype.set;n.Gh=Ha.prototype.Tg;n.ha=Ha.prototype.ha;n.I=Ha.prototype.I;function Ja(a){this.file=a;this.byteLength=a.size;1073741824<a.size&&console.warn("SyncFileBuffer: Allocating buffer of "+(a.size>>20)+" MB ...");this.buffer=new ArrayBuffer(a.size);this.onload=void 0}n=Ja.prototype;n.load=function(){La(this,0)};
function La(a,b){var c=new FileReader;c.onload=function(d){d=new Uint8Array(d.target.result);(new Uint8Array(this.buffer,b)).set(d);La(this,b+4194304)}.bind(a);b<a.byteLength?c.readAsArrayBuffer(a.file.slice(b,Math.min(b+4194304,a.byteLength))):(a.file=void 0,a.onload&&a.onload({buffer:a.buffer}))}n.get=Ga.prototype.get;n.set=Ga.prototype.set;n.Cb=Ga.prototype.Cb;n.ha=Ga.prototype.ha;n.I=Ga.prototype.I;
function Ma(a){this.file=a;this.byteLength=a.size;this.g=new Map;this.h=new Set;this.onload=void 0}n=Ma.prototype;n.load=function(){this.onload&&this.onload(Object.create(null))};n.get=function(a,b,c){var d=this.ej(a,b);d?c(d):(d=new FileReader,d.onload=function(e){e=new Uint8Array(e.target.result);this.fj(a,b,e);c(e)}.bind(this),d.readAsArrayBuffer(this.file.slice(a,a+b)))};n.ej=Ha.prototype.Sg;n.set=Ha.prototype.set;n.fj=Ha.prototype.Tg;n.ha=Ha.prototype.ha;n.I=Ha.prototype.I;n.Cb=function(a){a()};
n.ai=function(a){for(var b=[],c=Array.from(this.g.keys()).sort(function(f,k){return f-k}),d=0,e=0;e<c.length;e++){var g=c[e],h=this.g.get(g);g*=256;g!==d&&(b.push(this.file.slice(d,g)),d=g);b.push(h);d+=h.length}d!==this.file.size&&b.push(this.file.slice(d));return new File(b,a)};
function Na(a,b){if(a.buffer instanceof ArrayBuffer)return new Ga(a.buffer);if("undefined"!==typeof File&&a.buffer instanceof File)return b=a.async,void 0===b&&(b=268435456<=a.buffer.size),b?new Ma(a.buffer):new Ja(a.buffer);if(a.url)return a.ba?new Ia(a.url,a.size,a.M,b):new Ha(a.url,a.size,a.M)};function Qa(a){this.u=a;this.o=new Uint8Array(8);this.v=new Uint8Array(8);this.g=new Uint16Array(8);this.j=new Uint16Array(8);this.h=new Uint16Array(8);this.l=new Uint16Array(8);this.Xc=new Uint8Array(8);this.C=new Uint8Array(8);this.Og=[];this.i=0;a=a.B;w(a,0,this,this.Rd.bind(this,0));w(a,2,this,this.Rd.bind(this,1));w(a,4,this,this.Rd.bind(this,2));w(a,6,this,this.Rd.bind(this,3));w(a,1,this,this.Td.bind(this,0));w(a,3,this,this.Td.bind(this,1));w(a,5,this,this.Td.bind(this,2));w(a,7,this,this.Td.bind(this,
3));x(a,0,this,this.Qd.bind(this,0));x(a,2,this,this.Qd.bind(this,1));x(a,4,this,this.Qd.bind(this,2));x(a,6,this,this.Qd.bind(this,3));x(a,1,this,this.Sd.bind(this,0));x(a,3,this,this.Sd.bind(this,1));x(a,5,this,this.Sd.bind(this,2));x(a,7,this,this.Sd.bind(this,3));w(a,192,this,this.Rd.bind(this,4));w(a,196,this,this.Rd.bind(this,5));w(a,200,this,this.Rd.bind(this,6));w(a,204,this,this.Rd.bind(this,7));w(a,194,this,this.Td.bind(this,4));w(a,198,this,this.Td.bind(this,5));w(a,202,this,this.Td.bind(this,
6));w(a,206,this,this.Td.bind(this,7));x(a,192,this,this.Qd.bind(this,4));x(a,196,this,this.Qd.bind(this,5));x(a,200,this,this.Qd.bind(this,6));x(a,204,this,this.Qd.bind(this,7));x(a,194,this,this.Sd.bind(this,4));x(a,198,this,this.Sd.bind(this,5));x(a,202,this,this.Sd.bind(this,6));x(a,206,this,this.Sd.bind(this,7));w(a,135,this,this.Vd.bind(this,0));w(a,131,this,this.Vd.bind(this,1));w(a,129,this,this.Vd.bind(this,2));w(a,130,this,this.Vd.bind(this,3));w(a,143,this,this.Vd.bind(this,4));w(a,139,
this,this.Vd.bind(this,5));w(a,137,this,this.Vd.bind(this,6));w(a,138,this,this.Vd.bind(this,7));x(a,135,this,this.Ud.bind(this,0));x(a,131,this,this.Ud.bind(this,1));x(a,129,this,this.Ud.bind(this,2));x(a,130,this,this.Ud.bind(this,3));x(a,143,this,this.Ud.bind(this,4));x(a,139,this,this.Ud.bind(this,5));x(a,137,this,this.Ud.bind(this,6));x(a,138,this,this.Ud.bind(this,7));w(a,1159,this,this.Je.bind(this,0));w(a,1155,this,this.Je.bind(this,1));w(a,1153,this,this.Je.bind(this,2));w(a,1154,this,this.Je.bind(this,
3));w(a,1163,this,this.Je.bind(this,5));w(a,1161,this,this.Je.bind(this,6));w(a,1162,this,this.Je.bind(this,7));x(a,1159,this,this.Ie.bind(this,0));x(a,1155,this,this.Ie.bind(this,1));x(a,1153,this,this.Ie.bind(this,2));x(a,1154,this,this.Ie.bind(this,3));x(a,1163,this,this.Ie.bind(this,5));x(a,1161,this,this.Ie.bind(this,6));x(a,1162,this,this.Ie.bind(this,7));w(a,10,this,this.Ki.bind(this,0));w(a,212,this,this.Ki.bind(this,4));w(a,15,this,this.Ji.bind(this,0));w(a,222,this,this.Ji.bind(this,4));
x(a,15,this,this.Ii.bind(this,0));x(a,222,this,this.Ii.bind(this,4));w(a,11,this,this.Hi.bind(this,0));w(a,214,this,this.Hi.bind(this,4));w(a,12,this,this.Gi);w(a,216,this,this.Gi)}n=Qa.prototype;n.ha=function(){return[this.o,this.v,this.g,this.j,this.h,this.l,this.Xc,this.C,this.i]};n.I=function(a){this.o=a[0];this.v=a[1];this.g=a[2];this.j=a[3];this.h=a[4];this.l=a[5];this.Xc=a[6];this.C=a[7];this.i=a[8]};n.Td=function(a,b){this.h[a]=Ra(this,this.h[a],b,!1);this.l[a]=Ra(this,this.l[a],b,!0)};
n.Sd=function(a){return Sa(this,this.h[a])};n.Rd=function(a,b){this.g[a]=Ra(this,this.g[a],b,!1);this.j[a]=Ra(this,this.j[a],b,!0)};n.Qd=function(a){return Sa(this,this.g[a])};n.Je=function(a,b){this.v[a]=b};n.Ie=function(a){return this.v[a]};n.Vd=function(a,b){this.o[a]=b};n.Ud=function(a){return this.o[a]};n.Ki=function(a,b){Ta(this,(b&3)+a,b&4?1:0)};n.Ji=function(a,b){for(var c=0;4>c;c++)Ta(this,a+c,b&1<<c)};
n.Ii=function(a){var b=0|this.Xc[a+0];b|=this.Xc[a+1]<<1;b|=this.Xc[a+2]<<2;return b|=this.Xc[a+3]<<3};n.Hi=function(a,b){this.C[(b&3)+a]=b};n.Gi=function(){this.i=0};function Ta(a,b,c){if(a.Xc[b]!==c&&(a.Xc[b]=c,!c))for(c=0;c<a.Og.length;c++)a.Og[c].qg.call(a.Og[c].wh,b)}n.Jj=function(a,b,c,d,e){c=Ua(this,d);var g=Va(this,d);if(b+c>a.byteLength)e(!0);else{var h=this.u;this.g[d]+=c;a.get(b,c,function(f){Wa(h,f,g);e(!1)})}};
n.Cf=function(a,b,c,d,e){var g=this.h[d]+1&65535,h=5<=d?2:1,f=g*h,k=Va(this,d),m=!1,l=!1,p=this.C[d]&16;c<f?(g=Math.floor(c/h),f=g*h,m=!0):c>f&&(l=!0);b+f>a.byteLength?e(!0):(this.g[d]+=g,this.h[d]-=g,!m&&p&&(this.g[d]=this.j[d],this.h[d]=this.l[d]),a.set(b,this.u.xb.subarray(k,k+f),()=>{l&&p?this.Cf(a,b+f,c-f,d,e):e(!1)}))};function Va(a,b){var c=a.g[b];5<=b&&(c<<=1);c=c&65535|a.o[b]<<16;return c|=a.v[b]<<24}function Ua(a,b){a=a.h[b]+1;5<=b&&(a*=2);return a}
function Ra(a,b,c,d){d||(a.i^=1);return a.i?b&-256|c:b&-65281|c<<8}function Sa(a,b){a.i^=1;return a.i?b&255:b>>8&255};function Xa(a){this.ports=[];this.u=a;for(var b=0;65536>b;b++)this.ports[b]=Ya(this);var c=a.F[0];for(b=0;b<<17<c;b++)a.g[b]=a.j[b]=void 0,a.Ba[b]=a.i[b]=void 0;cb(this,c,4294967296-c,function(){return 255},function(){},function(){return-1},function(){})}function Ya(a){return{Me:a.Pj,sb:a.Nj,Ni:a.Oj,Qg:a.$g,cg:a.$g,Ua:a.$g,Jd:void 0}}n=Xa.prototype;n.Pj=function(){return 255};n.Nj=function(){return 65535};n.Oj=function(){return-1};n.$g=function(){};
function x(a,b,c,d,e,g){d&&(a.ports[b].Me=d);e&&(a.ports[b].sb=e);g&&(a.ports[b].Ni=g);a.ports[b].Jd=c}function w(a,b,c,d,e,g){d&&(a.ports[b].Qg=d);e&&(a.ports[b].cg=e);g&&(a.ports[b].Ua=g);a.ports[b].Jd=c}
n.Oe=function(a,b,c,d,e,g){function h(){return c.call(this)|d.call(this)<<8}function f(){return e.call(this)|g.call(this)<<8}function k(){return c.call(this)|d.call(this)<<8|e.call(this)<<16|g.call(this)<<24}e&&g?(x(this,a,b,c,h,k),x(this,a+1,b,d),x(this,a+2,b,e,f),x(this,a+3,b,g)):(x(this,a,b,c,h),x(this,a+1,b,d))};
n.xd=function(a,b,c,d,e,g){function h(m){c.call(this,m&255);d.call(this,m>>8&255)}function f(m){e.call(this,m&255);g.call(this,m>>8&255)}function k(m){c.call(this,m&255);d.call(this,m>>8&255);e.call(this,m>>16&255);g.call(this,m>>>24)}e&&g?(w(this,a,b,c,h,k),w(this,a+1,b,d),w(this,a+2,b,e,f),w(this,a+3,b,g)):(w(this,a,b,c,h),w(this,a+1,b,d))};n.lk=function(a){var b=this.u.g[a>>>17];return b(a)|b(a+1)<<8|b(a+2)<<16|b(a+3)<<24};
n.mk=function(a,b){var c=this.u.j[a>>>17];c(a,b&255);c(a+1,b>>8&255);c(a+2,b>>16&255);c(a+3,b>>>24)};function cb(a,b,c,d,e,g,h){g||(g=a.lk.bind(a));h||(h=a.mk.bind(a));for(b>>>=17;0<c;b++)a.u.g[b]=d,a.u.j[b]=e,a.u.Ba[b]=g,a.u.i[b]=h,c-=131072}function db(a,b){a=a.ports[b];return a.Ni.call(a.Jd,b)};function eb(){this.Mf={};this.Rf=void 0}eb.prototype.register=function(a,b,c){var d=this.Mf[a];void 0===d&&(d=this.Mf[a]=[]);d.push({qg:b,wh:c})};eb.prototype.unregister=function(a,b){var c=this.Mf[a];void 0!==c&&(this.Mf[a]=c.filter(function(d){return d.qg!==b}))};eb.prototype.send=function(a,b){if(this.Rf&&(a=this.Rf.Mf[a],void 0!==a))for(var c=0;c<a.length;c++){var d=a[c];d.qg.call(d.wh,b)}};function fb(){var a=new eb,b=new eb;a.Rf=b;b.Rf=a;return[a,b]};var gb=new Uint8Array(256),hb=[],ib=[],jb=[],kb=new Uint8Array(256),lb=[];
function mb(a,b){this.u=a;this.s=b;this.cb=new ra(64);this.za=new ra(64);this.i=this.o=this.kc=this.K=0;this.W=new Uint8Array(256);nb(this);this.ff=!1;this.Zf=0;this.pc=this.oc=this.xe=this.bd=!1;this.Ac=[new sa,new sa];this.Lb=a.A.Lb;this.Ub=this.ad=this.j=this.Dc=this.l=this.D=0;this.Ec=1;this.we=5;this.Cc=!1;this.g=new ArrayBuffer(65536);this.fa=new Int8Array(this.g);this.C=new Uint8Array(this.g);this.da=new Int16Array(this.g);this.ia=new Uint16Array(this.g);this.sa=new Ga(this.g);this.Fc=this.v=
!1;this.Ob=22050;b.send("dac-tell-sampling-rate",this.Ob);this.h=1;this.X=170;this.O=0;this.pe=new Uint8Array(256);this.G=new ra(64);this.$=this.Z=this.Ka=0;this.fk=!1;this.ya=5;this.Ae=new Uint8Array(16);a.B.Oe(544,this,this.vi,this.xi,this.vk,this.xk);a.B.Oe(904,this,this.vi,this.xi);a.B.Oe(548,this,this.zk,this.Bk);x(a.B,550,this,this.Dk);x(a.B,551,this,this.Fk);x(a.B,552,this,this.Hk);x(a.B,553,this,this.Jk);x(a.B,554,this,this.Lk);x(a.B,555,this,this.Nk);x(a.B,556,this,this.Pk);x(a.B,557,this,
this.Rk);a.B.Oe(558,this,this.Tk,this.Vk);a.B.xd(544,this,this.wi,this.yi,this.wk,this.yk);a.B.xd(904,this,this.wi,this.yi);a.B.xd(548,this,this.Ak,this.Ck);w(a.B,550,this,this.Ek);w(a.B,551,this,this.Gk);a.B.xd(552,this,this.Ik,this.Kk);w(a.B,554,this,this.Mk);w(a.B,555,this,this.Ok);w(a.B,556,this,this.Qk);w(a.B,557,this,this.Sk);w(a.B,558,this,this.Uk);w(a.B,559,this,this.Wk);a.B.Oe(816,this,this.ql,this.sl);a.B.xd(816,this,this.rl,this.tl);this.Lb.Og.push({qg:this.pa,wh:this});b.register("dac-request-data",
function(){!this.Dc||this.Fc?qb(this):rb(this)},this);b.register("speaker-has-initialized",function(){nb(this)},this);b.send("speaker-confirm-initialized");sb(this)}function sb(a){a.cb.clear();a.za.clear();a.kc=0;a.o=0;a.ff=!1;a.Zf=0;a.bd=!1;a.xe=!1;a.oc=!1;a.pc=!1;a.Ac[0].clear();a.Ac[1].clear();a.D=0;a.l=0;a.Dc=0;a.j=0;a.ad=0;a.Ub=0;a.Cc=!1;a.C.fill(0);a.v=!1;a.Fc=!1;a.X=170;a.O=0;a.Ob=22050;a.h=1;tb(a,1);a.Ae.fill(0);a.pe.fill(0);a.pe[5]=1;a.pe[9]=248}n=mb.prototype;
n.ha=function(){var a=[];a[2]=this.K;a[3]=this.kc;a[4]=this.o;a[5]=this.i;a[6]=this.W;a[7]=this.ff;a[8]=this.Zf;a[9]=this.bd;a[10]=this.xe;a[11]=this.oc;a[12]=this.pc;a[15]=this.D;a[16]=this.l;a[17]=this.Dc;a[18]=this.j;a[19]=this.ad;a[20]=this.Ub;a[21]=this.Ec;a[22]=this.we;a[23]=this.Cc;a[24]=this.C;a[25]=this.v;a[26]=this.Fc;a[27]=this.Ob;a[28]=this.h;a[29]=this.X;a[30]=this.O;a[31]=this.pe;a[33]=this.Va;a[34]=this.ya;a[35]=this.Ae;return a};
n.I=function(a){this.K=a[2];this.kc=a[3];this.o=a[4];this.i=a[5];this.W=a[6];ub(this);this.ff=a[7];this.Zf=a[8];this.bd=a[9];this.xe=a[10];this.oc=a[11];this.pc=a[12];this.D=a[15];this.l=a[16];this.Dc=a[17];this.j=a[18];this.ad=a[19];this.Ub=a[20];this.Ec=a[21];this.we=a[22];this.Cc=a[23];this.C=a[24];this.v=a[25];this.Fc=a[26];this.Ob=a[27];this.h=a[28];this.X=a[29];this.O=a[30];this.pe=a[31];this.Va=a[33];this.ya=a[34];this.Ae=a[35];this.g=this.C.buffer;this.fa=new Int8Array(this.g);this.da=new Int16Array(this.g);
this.ia=new Uint16Array(this.g);this.sa=new Ga(this.g);this.Fc?this.s.send("dac-disable"):this.s.send("dac-enable")};n.vi=function(){return 255};n.xi=function(){return 255};n.vk=function(){return 255};n.xk=function(){return 255};n.zk=function(){return this.i};n.Bk=function(){var a=this.i,b=ib[a];return b?b.call(this):this.W[a]};n.Dk=function(){return 255};n.Fk=function(){return 255};n.Hk=function(){return 255};n.Jk=function(){return 255};n.Lk=function(){this.za.length&&(this.K=this.za.shift());return this.K};
n.Nk=function(){return 255};n.Pk=function(){return 127};n.Rk=function(){return 255};n.Tk=function(){this.Ae[1]&&tb(this,1);return(this.za.length&&!this.bd)<<7|127};n.Vk=function(){tb(this,2);return 0};n.wi=function(){this.Z=0};n.yi=function(a){var b=lb[this.Z];b||(b=this.aa);b.call(this,a,0,this.Z)};n.wk=function(){this.$=0};n.yk=function(a){var b=lb[this.$];b||(b=this.aa);b.call(this,a,1,this.$)};n.Ak=function(a){this.i=a};n.Ck=function(a){vb(this,this.i,a)};
n.Ek=function(a){this.bd?this.bd=!1:a&&sb(this);this.za.clear();this.za.push(170)};n.Gk=function(){};n.Ik=function(){};n.Kk=function(){};n.Mk=function(){};n.Ok=function(){};n.Qk=function(a){0===this.kc?(this.kc=a,this.cb.clear(),this.o=gb[a]):this.cb.push(a);this.cb.length>=this.o&&(a=hb[this.kc],a||(a=this.Rh),a.call(this),this.o=this.kc=0,this.cb.clear())};n.Sk=function(){};n.Uk=function(){};n.Wk=function(){};n.ql=function(){this.G.length&&(this.Ka=this.G.shift());return this.Ka};n.rl=function(){};
n.sl=function(){return 0|128*!this.G.length};n.tl=function(a){255===a&&(this.G.clear(),this.G.push(254))};n.Rh=function(){};function F(a,b,c){c||(c=mb.prototype.Rh);for(var d=0;d<a.length;d++)gb[a[d]]=b,hb[a[d]]=c}function wb(a){for(var b=[],c=0;16>c;c++)b.push(a+c);return b}F([14],2,function(){this.pe[this.cb.shift()]=this.cb.shift()});F([15],1,function(){this.za.clear();this.za.push(this.pe[this.cb.shift()])});
F([16],1,function(){var a=this.cb.shift();a=xb(a/127.5+-1);this.Ac[0].push(a);this.Ac[1].push(a);this.s.send("dac-enable")});F([20,21],2,function(){this.ad=1;this.Ub=this.Ec;this.bd=this.oc=this.pc=this.Cc=!1;yb(this);zb(this)});F([22],2);F([23],2);F([28],0,function(){this.ad=1;this.Ub=this.Ec;this.Cc=!0;this.bd=this.oc=this.pc=!1;zb(this)});F([31],0);F([32],0,function(){this.za.clear();this.za.push(127)});F([36],2);F([44],0);F([48],0);F([49],0);F([52],0);F([53],0);F([54],0);F([55],0);F([56],0);
F([64],1,function(){Ab(this,1E6/(256-this.cb.shift())/(this.xe?2:1))});F([65,66],2,function(){Ab(this,this.cb.shift()<<8|this.cb.shift())});F([72],2,function(){yb(this)});F([116],2);F([117],2);F([118],2);F([119],2);F([125],0);F([127],0);F([128],2);F([144],0,function(){this.ad=1;this.Ub=this.Ec;this.Cc=!0;this.pc=!1;this.bd=!0;this.oc=!1;zb(this)});F([145],0);F([152],0);F([153],0);F([160],0);F([168],0);
F(wb(176),3,function(){if(!(this.kc&8)){var a=this.cb.shift();this.ad=2;this.Ub=this.we;this.Cc=!!(this.kc&4);this.pc=!!(a&16);this.xe=!!(a&32);this.oc=!0;yb(this);zb(this)}});F(wb(192),3,function(){if(!(this.kc&8)){var a=this.cb.shift();this.ad=1;this.Ub=this.Ec;this.Cc=!!(this.kc&4);this.pc=!!(a&16);this.xe=!!(a&32);this.oc=!1;yb(this);zb(this)}});F([208],0,function(){this.Fc=!0;this.s.send("dac-disable")});F([209],0,function(){this.ff=!0});F([211],0,function(){this.ff=!1});
F([212],0,function(){this.Fc=!1;this.s.send("dac-enable")});F([213],0,function(){this.Fc=!0;this.s.send("dac-disable")});F([214],0,function(){this.Fc=!1;this.s.send("dac-enable")});F([216],0,function(){this.za.clear();this.za.push(255*this.ff)});F([217,218],0,function(){this.Cc=!1});F([224],1,function(){this.za.clear();this.za.push(~this.cb.shift())});F([225],0,function(){this.za.clear();this.za.push(4);this.za.push(5)});F([226],1);
F([227],0,function(){this.za.clear();for(var a=0;44>a;a++)this.za.push("COPYRIGHT (C) CREATIVE TECHNOLOGY LTD, 1992.".charCodeAt(a));this.za.push(0)});F([228],1,function(){this.Zf=this.cb.shift()});F([232],0,function(){this.za.clear();this.za.push(this.Zf)});F([242,243],0,function(){this.$a()});var Bb=new Uint8Array(256);Bb[14]=255;Bb[15]=7;Bb[55]=56;F([249],1,function(){var a=this.cb.shift();this.za.clear();this.za.push(Bb[a])});function vb(a,b,c){(b=jb[b])&&b.call(a,c)}mb.prototype.Ba=function(){return this.W[this.i]};
mb.prototype.Oa=function(a){this.W[this.i]=a};function nb(a){a.W[4]=204;a.W[34]=204;a.W[38]=204;a.W[40]=0;a.W[46]=0;a.W[10]=0;a.W[48]=192;a.W[49]=192;a.W[50]=192;a.W[51]=192;a.W[52]=192;a.W[53]=192;a.W[54]=0;a.W[55]=0;a.W[56]=0;a.W[57]=0;a.W[59]=0;a.W[60]=31;a.W[61]=21;a.W[62]=11;a.W[63]=0;a.W[64]=0;a.W[65]=0;a.W[66]=0;a.W[67]=0;a.W[68]=128;a.W[69]=128;a.W[70]=128;a.W[71]=128;ub(a)}function ub(a){for(var b=1;b<a.W.length;b++)kb[b]||vb(a,b,a.W[b])}function Cb(a,b){b||(b=mb.prototype.Ba);ib[a]=b}
function Db(a,b){b||(b=mb.prototype.Oa);jb[a]=b}function Eb(a,b,c){kb[a]=1;ib[a]=function(){return this.W[b]&240|this.W[c]>>>4};jb[a]=function(d){this.W[a]=d;var e=d<<4&240|this.W[c]&15;vb(this,b,d&240|this.W[b]&15);vb(this,c,e)}}function Fb(a,b,c){ib[a]=mb.prototype.Ba;jb[a]=function(d){this.W[a]=d;this.s.send("mixer-volume",[b,c,(d>>>2)-62])}}Cb(0,function(){nb(this);return 0});Db(0);Eb(4,50,51);Eb(34,48,49);Eb(38,52,53);Eb(40,54,55);Eb(46,56,57);Fb(48,0,0);Fb(49,0,1);Fb(50,2,0);Fb(51,2,1);Cb(59);
Db(59,function(a){this.W[59]=a;this.s.send("mixer-volume",[1,2,6*(a>>>6)-18])});Cb(65);Db(65,function(a){this.W[65]=a;this.s.send("mixer-gain-left",6*(a>>>6))});Cb(66);Db(66,function(a){this.W[66]=a;this.s.send("mixer-gain-right",6*(a>>>6))});Cb(68);Db(68,function(a){this.W[68]=a;a>>>=3;this.s.send("mixer-treble-left",a-(16>a?14:16))});Cb(69);Db(69,function(a){this.W[69]=a;a>>>=3;this.s.send("mixer-treble-right",a-(16>a?14:16))});Cb(70);
Db(70,function(a){this.W[70]=a;a>>>=3;this.s.send("mixer-bass-right",a-(16>a?14:16))});Cb(71);Db(71,function(a){this.W[71]=a;a>>>=3;this.s.send("mixer-bass-right",a-(16>a?14:16))});Cb(128,function(){switch(this.ya){case 2:return 1;case 5:return 2;case 7:return 4;case 10:return 8;default:return 0}});Db(128,function(a){a&1&&(this.ya=2);a&2&&(this.ya=5);a&4&&(this.ya=7);a&8&&(this.ya=10)});
Cb(129,function(){var a=0;switch(this.Ec){case 0:a|=1;break;case 1:a|=2;break;case 3:a|=8}switch(this.we){case 5:a|=32;break;case 6:a|=64;break;case 7:a|=128}return a});Db(129,function(a){a&1&&(this.Ec=0);a&2&&(this.Ec=1);a&8&&(this.Ec=3);a&32&&(this.we=5);a&64&&(this.we=6);a&128&&(this.we=7)});Cb(130,function(){for(var a=32,b=0;16>b;b++)a|=b*this.Ae[b];return a});mb.prototype.aa=function(){};function Gb(a,b){b||(b=mb.prototype.aa);for(var c=0;c<a.length;c++)lb[a[c]]=b}
function Hb(a,b){for(var c=[];a<=b;a++)c.push(a);return c}const Ib=new Uint8Array(32);Ib[0]=0;Ib[1]=1;Ib[2]=2;Ib[3]=3;Ib[4]=4;Ib[5]=5;Ib[8]=6;Ib[9]=7;Ib[10]=8;Ib[11]=9;Ib[12]=10;Ib[13]=11;Ib[16]=12;Ib[17]=13;Ib[18]=14;Ib[19]=15;Ib[20]=16;Ib[21]=17;Gb([1],function(a,b){this.fk[b]=a&1});Gb([2]);Gb([3]);Gb([4],function(){});Gb([5],function(){});Gb([8],function(){});Gb(Hb(32,53),function(){});Gb(Hb(64,85),function(){});Gb(Hb(96,117),function(){});Gb(Hb(128,149),function(){});Gb(Hb(160,168),function(){});
Gb(Hb(176,184),function(){});Gb([189],function(){});Gb(Hb(192,200),function(){});Gb(Hb(224,245),function(){});function Ab(a,b){a.Ob=b;a.s.send("dac-tell-sampling-rate",b)}function yb(a){a.D=1+(a.cb.shift()<<0)+(a.cb.shift()<<8)}function zb(a){a.h=1;a.oc&&(a.h*=2);a.l=a.D*a.h;a.j=1024*a.h;a.j=Math.min(Math.max(a.l>>2&-4,32),a.j);a.v=!0;a.Lb.Xc[a.Ub]||a.pa(a.Ub)}mb.prototype.pa=function(a){a===this.Ub&&this.v&&(this.v=!1,this.Dc=this.l,this.Fc=!1,this.s.send("dac-enable"))};
function rb(a){var b=Math.min(a.Dc,a.j),c=Math.floor(b/a.h);a.Lb.Cf(a.sa,0,b,a.Ub,d=>{if(!d){d=a.oc?32767.5:127.5;var e=a.pc?0:-1,g=a.xe?1:2,h;a.oc?h=a.pc?a.da:a.ia:h=a.pc?a.fa:a.C;for(var f=0,k=0;k<c;k++)for(var m=xb(h[k]/d+e),l=0;l<g;l++)a.Ac[f].push(m),f^=1;qb(a);a.Dc-=b;a.Dc||(a.$a(a.ad),a.Cc&&(a.Dc=a.l))}})}function qb(a){if(a.Ac[0].length){var b=wa(a.Ac[0],a.Ac[0].length),c=wa(a.Ac[1],a.Ac[1].length);a.s.send("dac-send-data",[b,c],[b.buffer,c.buffer])}}
mb.prototype.$a=function(a){this.Ae[a]=1;this.u.qb(this.ya)};function tb(a,b){a.Ae[b]=0;a.u.jb(a.ya)}function xb(a){return-1*(-1>a)+1*(1<a)+(-1<=a&&1>=a)*a};function Jb(a){this.message=a}Jb.prototype=Error();const Kb={Map,Uint8Array,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,Float32Array,Float64Array};
function Lb(a,b){if("object"!==typeof a||null===a)return a;if(Array.isArray(a))return a.map(e=>Lb(e,b));if(a instanceof Map)return{__state_type__:"Map",args:Array.from(a.entries()).map(([e,g])=>[Lb(e,b),Lb(g,b)])};a.constructor===Object&&console.log(a);if(a.BYTES_PER_ELEMENT){var c=new Uint8Array(a.buffer,a.byteOffset,a.length*a.BYTES_PER_ELEMENT);return{__state_type__:a.constructor.name.replace("bound ",""),buffer_id:b.push(c)-1}}a=a.ha();c=[];for(var d=0;d<a.length;d++)c[d]=Lb(a[d],b);return c}
function Mb(a,b){if("object"!==typeof a||null===a)return a;if(Array.isArray(a)){for(var c=0;c<a.length;c++)a[c]=Mb(a[c],b);return a}c=Kb[a.__state_type__];return void 0!==a.args?new c(a.args):new c(b[a.buffer_id])}
function Nb(a,b){function c(q,r){const C=q.length;if(16>C)throw new Jb("Invalid length: "+C);q=new Int32Array(q.buffer,q.byteOffset,4);if(-2039052682!==q[0])throw new Jb("Invalid header: "+fa(q[0]>>>0));if(6!==q[1])throw new Jb("Version mismatch: dump="+q[1]+" we=6");if(r&&q[2]!==C)throw new Jb("Length doesn't match header: real="+C+" header="+q[2]);return q[3]}function d(q){q=(new TextDecoder).decode(q);return JSON.parse(q)}b=new Uint8Array(b);if(4247762216===(new Uint32Array(b.buffer,0,1))[0]){var e=
a.bj(b.length);(new Uint8Array(a.Ia.buffer,a.dj(e)>>>0,b.length)).set(b);var g=a.tf(e,16),h=new Uint8Array(a.Ia.buffer,g>>>0,16),f=c(h,!1);a.uf(g,16);g=a.tf(e,f);h=new Uint8Array(a.Ia.buffer,g>>>0,f);h=d(h);a.uf(g,f);g=h.state;var k=h.buffer_infos;h=[];f=16+f;for(var m of k){k=(f+3&-4)-f;if(1048576<m.length){var l=a.tf(e,k)>>>0;a.uf(l,k);l=new Uint8Array(m.length);h.push(l.buffer);for(var p=0;p<m.length;){const q=Math.min(m.length-p,1048576),r=a.tf(e,q);l.set(new Uint8Array(a.Ia.buffer,r>>>0,q),p);
a.uf(r,q);p+=q}}else l=a.tf(e,k+m.length),p=(l>>>0)+k,h.push(a.Ia.buffer.slice(p,p+m.length)),a.uf(l,k+m.length);f+=k+m.length}g=Mb(g,h);a.I(g);a.cj(e)}else{m=c(b,!0);if(0>m||m+12>=b.length)throw new Jb("Invalid info block length: "+m);g=d(b.subarray(16,16+m));e=g.state;g=g.buffer_infos;let q=16+m;q=q+3&-4;m=g.map(r=>{const C=q+r.offset;return b.buffer.slice(C,C+r.length)});e=Mb(e,m);a.I(e)}};function Ob(a,b,c,d,e){let g="";var h=[],f=b?"compiled":c?"jit exit":d?"unguarded register":e?"wasm size":"executed";for(let l=0;256>l;l++)for(let p=0;8>p;p++)for(const q of[!1,!0]){var k=a.Ya.exports.get_opstats_buffer(b,c,d,e,l,!1,q,p);h.push({Ag:l,count:k,fi:q,Wh:p});k=a.Ya.exports.get_opstats_buffer(b,c,d,e,l,!0,q,p);h.push({Ag:3840|l,count:k,fi:q,Wh:p})}a=0;b=new Set([38,46,54,62,100,101,102,103,240,242,243]);for(const {count:l,Ag:p}of h)b.has(p)||(a+=l);if(0===a)return"";c=new Uint32Array(256);
b=new Uint32Array(256);for(const {Ag:l,count:p}of h)3840===(l&65280)?b[l&255]+=p:c[l&255]+=p;g=g+"------------------\nTotal: "+(a+"\n");const m=1E7<a?1E3:1;d=Math.max.apply(Math,h.map(({count:l})=>Math.round(l/m)));d=String(d).length;g+=`Instruction counts ${f} (in ${m}):\n`;for(e=0;256>e;e++)g+=e.toString(16).padStart(2,"0")+":"+ca(Math.round(c[e]/m),d),g=15===e%16?g+"\n":g+" ";g=g+"\n"+`Instruction counts ${f} (0f, in ${m}):\n`;for(f=0;256>f;f++)g+=(f&255).toString(16).padStart(2,"0")+":"+ca(Math.round(b[f]/
m),d),g=15===f%16?g+"\n":g+" ";g+="\n";h=h.filter(({count:l})=>l).sort(({count:l},{count:p})=>p-l);for(const {Ag:l,fi:p,Wh:q,count:r}of h.slice(0,200))g+=l.toString(16)+"_"+q+(p?"_m":"_r")+":"+(r/a*100).toFixed(2)+" ";return g+"\n"};function Pb(a){this.u=a;this.se=0;this.ja=new Uint8Array(128);this.K=this.h=Date.now();this.o=this.j=0;this.C=!1;this.D=.9765625;this.l=38;this.g=2;this.hh=this.O=this.i=0;this.G=!1;this.v=0;w(a.B,112,this,function(b){this.se=b&127;this.hh=b>>7});w(a.B,113,this,this.uj);x(a.B,113,this,this.tj)}n=Pb.prototype;
n.ha=function(){var a=[];a[0]=this.se;a[1]=this.ja;a[2]=this.h;a[3]=this.K;a[4]=this.j;a[5]=this.o;a[6]=this.C;a[7]=this.D;a[8]=this.l;a[9]=this.g;a[10]=this.i;a[11]=this.hh;a[12]=this.G;a[13]=this.v;a[14]=this.O;return a};n.I=function(a){this.se=a[0];this.ja=a[1];this.h=a[2];this.K=a[3];this.j=a[4];this.o=a[5];this.C=a[6];this.D=a[7];this.l=a[8];this.g=a[9];this.i=a[10];this.hh=a[11];this.G=a[12]||!1;this.v=a[13]||0;this.O=a[14]||0};
n.Zd=function(a){a=Date.now();this.h+=a-this.K;this.K=a;this.C&&this.j<a?(this.u.qb(8),this.i|=192,this.j+=this.D*Math.ceil((a-this.j)/this.D)):this.o&&this.o<a?(this.u.qb(8),this.i|=160,this.o=0):this.G&&this.v<a&&(this.u.qb(8),this.i|=144,this.v=a+1E3);let b=100;this.C&&this.j&&(b=Math.min(b,Math.max(0,this.j-a)));this.o&&(b=Math.min(b,Math.max(0,this.o-a)));this.G&&(b=Math.min(b,Math.max(0,this.v-a)));return b};
function Qb(a,b){if(a.g&4)a=b;else{a=b;for(var c=b=0,d;a;)d=a%10,c|=d<<4*b,b++,a=(a-d)/10;a=c}return a}function Rb(a,b){var c;a.g&4?c=b:c=(b&15)+10*(b>>4&15);return c}
n.tj=function(){switch(this.se){case 0:return Qb(this,(new Date(this.h)).getUTCSeconds());case 2:return Qb(this,(new Date(this.h)).getUTCMinutes());case 4:return Qb(this,(new Date(this.h)).getUTCHours());case 6:return Qb(this,(new Date(this.h)).getUTCDay()+1);case 7:return Qb(this,(new Date(this.h)).getUTCDate());case 8:return Qb(this,(new Date(this.h)).getUTCMonth()+1);case 9:return Qb(this,(new Date(this.h)).getUTCFullYear()%100);case 10:return 999<=Sb()%1E3?this.l|128:this.l;case 11:return this.g;
case 12:this.u.jb(8);var a=this.i;this.i&=-241;return a;case 13:return 128;case 14:return this.O;case 50:case 55:return Qb(this,(new Date(this.h)).getUTCFullYear()/100|0);default:return this.ja[this.se]}};
n.uj=function(a){switch(this.se){case 10:this.l=a&127;this.D=1E3/(32768>>(this.l&15)-1);break;case 11:this.g=a;this.g&128&&(this.g&=239);this.g&64&&(this.j=Date.now());if(this.g&32){a=new Date;const b=Rb(this,this.ja[1]),c=Rb(this,this.ja[3]),d=Rb(this,this.ja[5]);this.o=+new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),d,c,b))}this.g&16&&(this.v=Date.now());break;case 14:this.O=a;break;case 1:case 3:case 5:this.ja[this.se]=a}this.G=16===(this.g&16)&&0<(this.l&15);this.C=64===(this.g&
64)&&0<(this.l&15)};function Tb(a,b){this.u=a;this.s=b;this.i=new Float64Array(3);this.j=new Uint16Array(3);this.g=new Uint8Array(4);this.h=new Uint8Array(4);this.ue=new Uint8Array(4);this.v=new Uint8Array(4);this.l=new Uint8Array(4);this.o=new Uint16Array(3);this.lc=new Uint16Array(3);x(a.B,97,this,function(){var c=Sb(),d=66.66666666666667*c&1;c=Vb(this,2,c);return d<<4|c<<5});w(a.B,97,this,function(c){c&1?this.s.send("pcspeaker-enable"):this.s.send("pcspeaker-disable")});x(a.B,64,this,function(){return Wb(this,0)});
x(a.B,65,this,function(){return Wb(this,1)});x(a.B,66,this,function(){return Wb(this,2)});w(a.B,64,this,function(c){Xb(this,0,c)});w(a.B,65,this,function(c){Xb(this,1,c)});w(a.B,66,this,function(c){Xb(this,2,c);this.s.send("pcspeaker-update",[this.ue[2],this.lc[2]])});w(a.B,67,this,this.C)}Tb.prototype.ha=function(){var a=[];a[0]=this.g;a[1]=this.h;a[2]=this.ue;a[3]=this.v;a[4]=this.l;a[5]=this.o;a[6]=this.lc;a[7]=this.i;a[8]=this.j;return a};
Tb.prototype.I=function(a){this.g=a[0];this.h=a[1];this.ue=a[2];this.v=a[3];this.l=a[4];this.o=a[5];this.lc=a[6];this.i=a[7];this.j=a[8]};Tb.prototype.Zd=function(a,b){var c=100;b||(this.h[0]&&Vb(this,0,a)?(this.j[0]=Yb(this,0,a),this.i[0]=a,this.u.jb(0),this.u.qb(0),0===this.ue[0]&&(this.h[0]=0)):this.u.jb(0),this.h[0]&&(c=(this.j[0]-Math.floor(1193.1816666*(a-this.i[0])))/1193.1816666));return c};
function Yb(a,b,c){if(!a.h[b])return 0;c=a.j[b]-Math.floor(1193.1816666*(c-a.i[b]));a=a.lc[b];c>=a?c%=a:0>c&&(c=c%a+a);return c}function Vb(a,b,c){c-=a.i[b];return 0>c?!0:a.j[b]<Math.floor(1193.1816666*c)}function Wb(a,b){var c=a.l[b];if(c)return a.l[b]--,2===c?a.o[b]&255:a.o[b]>>8;c=a.g[b];3===a.ue[b]&&(a.g[b]^=1);a=Yb(a,b,Sb());return c?a&255:a>>8}
function Xb(a,b,c){a.lc[b]=a.g[b]?a.lc[b]&-256|c:a.lc[b]&255|c<<8;3===a.v[b]&&a.g[b]||(a.lc[b]||(a.lc[b]=65535),a.j[b]=a.lc[b],a.h[b]=!0,a.i[b]=Sb());3===a.v[b]&&(a.g[b]^=1)}Tb.prototype.C=function(a){var b=a>>1&7,c=a>>6&3;a=a>>4&3;3!==c&&(0===a?(this.l[c]=2,b=Yb(this,c,Sb()),this.o[c]=b?b-1:0):(6<=b&&(b&=-5),this.g[c]=1===a?1:2===a?0:1,0===c&&this.u.jb(0),this.ue[c]=b,this.v[c]=a,2===c&&this.s.send("pcspeaker-update",[this.ue[2],this.lc[2]])))};function Zb(a){if("undefined"!==typeof window)if(window.AudioContext||window.webkitAudioContext){var b=window.AudioWorklet?$b:ac;this.s=a;this.ca=window.AudioContext?new AudioContext:new webkitAudioContext;this.yg=new bc(a,this.ca);this.h=new cc(a,this.ca,this.yg);this.g=new b(a,this.ca,this.yg);this.h.start();a.register("emulator-stopped",function(){this.ca.suspend()},this);a.register("emulator-started",function(){this.ca.resume()},this);a.register("speaker-confirm-initialized",function(){a.send("speaker-has-initialized")},
this);a.send("speaker-has-initialized")}else console.warn("Web browser doesn't support Web Audio API")}Zb.prototype.Da=function(){this.ca&&this.ca.close();this.ca=null;this.g&&this.g.Rc&&this.g.Rc.port.close();this.g=null};
function bc(a,b){function c(d){return function(e){d.gain.setValueAtTime(e,this.ca.currentTime)}}this.ca=b;this.sources=new Map;this.$h=this.Zh=this.G=this.D=this.v=1;this.i=this.ca.createBiquadFilter();this.j=this.ca.createBiquadFilter();this.i.type="highshelf";this.j.type="highshelf";this.i.frequency.setValueAtTime(2E3,this.ca.currentTime);this.j.frequency.setValueAtTime(2E3,this.ca.currentTime);this.g=this.ca.createBiquadFilter();this.h=this.ca.createBiquadFilter();this.g.type="lowshelf";this.h.type=
"lowshelf";this.g.frequency.setValueAtTime(200,this.ca.currentTime);this.h.frequency.setValueAtTime(200,this.ca.currentTime);this.l=this.ca.createGain();this.o=this.ca.createGain();this.C=this.ca.createChannelMerger(2);this.K=this.i;this.O=this.j;this.i.connect(this.g);this.g.connect(this.l);this.l.connect(this.C,0,0);this.j.connect(this.h);this.h.connect(this.o);this.o.connect(this.C,0,1);this.C.connect(this.ca.destination);a.register("mixer-connect",function(d){var e=d[1];d=this.sources.get(d[0]);
void 0===d||d.connect(e)},this);a.register("mixer-disconnect",function(d){var e=d[1];d=this.sources.get(d[0]);void 0===d||d.disconnect(e)},this);a.register("mixer-volume",function(d){var e=d[0],g=d[1];d=Math.pow(10,d[2]/20);e=0===e?this:this.sources.get(e);void 0===e||e.Ig(d,g)},this);a.register("mixer-gain-left",function(d){this.Zh=Math.pow(10,d/20);this.update()},this);a.register("mixer-gain-right",function(d){this.$h=Math.pow(10,d/20);this.update()},this);a.register("mixer-treble-left",c(this.i),
this);a.register("mixer-treble-right",c(this.j),this);a.register("mixer-bass-left",c(this.g),this);a.register("mixer-bass-right",c(this.h),this)}function dc(a,b,c){b=new ec(a.ca,b,a.K,a.O);a.sources.has(c);a.sources.set(c,b);return b}bc.prototype.Ig=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.D=a;break;case 1:this.G=a;break;case 2:this.v=a;break;default:return}this.update()};
bc.prototype.update=function(){var a=this.v*this.G*this.$h;this.l.gain.setValueAtTime(this.v*this.D*this.Zh,this.ca.currentTime);this.o.gain.setValueAtTime(a,this.ca.currentTime)};function ec(a,b,c,d){this.ca=a;this.o=this.l=!0;this.D=this.C=this.j=this.g=1;this.v=a.createChannelSplitter(2);this.h=a.createGain();this.i=a.createGain();b.connect(this.v);this.v.connect(this.h,0);this.h.connect(c);this.v.connect(this.i,1);this.i.connect(d)}
ec.prototype.update=function(){var a=this.o*this.g*this.j*this.D;this.h.gain.setValueAtTime(this.l*this.g*this.j*this.C,this.ca.currentTime);this.i.gain.setValueAtTime(a,this.ca.currentTime)};ec.prototype.connect=function(a){var b=!a||2===a;if(b||0===a)this.l=!0;if(b||1===a)this.o=!0;this.update()};ec.prototype.disconnect=function(a){var b=!a||2===a;if(b||0===a)this.l=!1;if(b||1===a)this.o=!1;this.update()};
ec.prototype.Ig=function(a,b){void 0===b&&(b=2);switch(b){case 0:this.C=a;break;case 1:this.D=a;break;case 2:this.j=a;break;default:return}this.update()};
function cc(a,b,c){this.jf=b.createOscillator();this.jf.type="square";this.jf.frequency.setValueAtTime(440,b.currentTime);this.g=dc(c,this.jf,1);this.g.disconnect();a.register("pcspeaker-enable",function(){var d=c.sources.get(1);void 0===d||d.connect(void 0)},this);a.register("pcspeaker-disable",function(){var d=c.sources.get(1);void 0===d||d.disconnect(void 0)},this);a.register("pcspeaker-update",function(d){var e=d[1],g=0;3===d[0]&&(g=Math.min(1193181.6665999999/e,this.jf.frequency.maxValue),g=
Math.max(g,0));this.jf.frequency.setValueAtTime(g,b.currentTime)},this)}cc.prototype.start=function(){this.jf.start()};
function $b(a,b,c){this.s=a;this.ca=b;this.enabled=!1;this.Ob=48E3;b=function(){function e(f){if(0===f)return 1;f*=Math.PI;return Math.sin(f)/f}function g(){var f=Reflect.construct(AudioWorkletProcessor,[],g);f.D=3;f.l=Array(1024);f.v=0;f.K=0;f.o=0;f.G=f.l.length;f.C=0;f.O=h;f.g=h;f.X=1;f.j=0;f.i=0;f.h=0;f.port.onmessage=k=>{switch(k.data.type){case "queue":f.ia(k.data.value);break;case "sampling-rate":f.X=k.data.value/sampleRate}};return f}var h=[new Float32Array(256),new Float32Array(256)];Reflect.setPrototypeOf(g.prototype,
AudioWorkletProcessor.prototype);Reflect.setPrototypeOf(g,AudioWorkletProcessor);g.prototype.process=g.prototype.process=function(f,k){for(f=0;f<k[0][0].length;f++){for(var m=0,l=0,p=this.h+this.D,q=this.h-this.D+1;q<=p;q++){var r=this.j+q;m+=this.Z(r,0)*this.$(this.i-q);l+=this.Z(r,1)*this.$(this.i-q)}if(isNaN(m)||isNaN(l))m=l=0;k[0][0][f]=m;k[0][1][f]=l;this.i+=this.X;this.h=Math.floor(this.i)}k=this.h;k+=this.D+2;this.i-=this.h;this.j+=this.h;this.h=0;this.da(k);return!0};g.prototype.$=function(f){return e(f)*
e(f/this.D)};g.prototype.Z=function(f,k){return 0>f?(f+=this.O[0].length,this.O[k][f]):this.g[k][f]};g.prototype.da=function(f){var k=this.g[0].length;k-this.j<f&&(this.fa(),this.j-=k)};g.prototype.fa=function(){this.O=this.g;this.g=this.aa();var f=this.g[0].length;if(256>f){for(var k=this.v,m=0;256>f&&m<this.o;)f+=this.l[k][0].length,k=k+1&this.G-1,m++;f=Math.max(f,256);f=[new Float32Array(f),new Float32Array(f)];f[0].set(this.g[0]);f[1].set(this.g[1]);k=this.g[0].length;for(var l=0;l<m;l++){var p=
this.aa();f[0].set(p[0],k);f[1].set(p[1],k);k+=p[0].length}this.g=f}this.Hb()};g.prototype.Hb=function(){1024>this.C/this.X&&this.port.postMessage({type:"pump"})};g.prototype.ia=function(f){this.o<this.G&&(this.l[this.K]=f,this.K=this.K+1&this.G-1,this.o++,this.C+=f[0].length,this.Hb())};g.prototype.aa=function(){if(!this.o)return h;var f=this.l[this.v];this.l[this.v]=null;this.v=this.v+1&this.G-1;this.o--;this.C-=f[0].length;return f};registerProcessor("dac-processor",g)}.toString();var d=URL.createObjectURL(new Blob([b.substring(b.indexOf("{")+
1,b.lastIndexOf("}"))],{type:"application/javascript"}));this.Rc=null;this.g=this.ca.createGain();this.ca.audioWorklet.addModule(d).then(()=>{URL.revokeObjectURL(d);this.Rc=new AudioWorkletNode(this.ca,"dac-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],parameterData:{},processorOptions:{}});this.Rc.port.postMessage({type:"sampling-rate",value:this.Ob});this.Rc.port.onmessage=e=>{switch(e.data.type){case "pump":this.Hb()}};this.Rc.connect(this.g)});this.h=dc(c,this.g,2);this.h.g=
3;a.register("dac-send-data",function(e){this.oh(e)},this);a.register("dac-enable",function(){this.enabled=!0},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(e){this.Ob=e;this.Rc&&this.Rc.port.postMessage({type:"sampling-rate",value:e})},this)}$b.prototype.oh=function(a){this.Rc&&this.Rc.port.postMessage({type:"queue",value:a},[a[0].buffer,a[1].buffer])};$b.prototype.Hb=function(){this.enabled&&this.s.send("dac-request-data")};
function ac(a,b,c){this.s=a;this.ca=b;this.enabled=!1;this.Ob=22050;this.g=0;this.Uf=1;this.zg=this.ca.createBiquadFilter();this.zg.type="lowpass";this.i=this.zg;this.h=dc(c,this.i,2);this.h.g=3;a.register("dac-send-data",function(d){this.oh(d)},this);a.register("dac-enable",function(){this.enabled=!0;this.Hb()},this);a.register("dac-disable",function(){this.enabled=!1},this);a.register("dac-tell-sampling-rate",function(d){this.Ob=d;this.Uf=Math.ceil(8E3/d);this.zg.frequency.setValueAtTime(d/2,this.ca.currentTime)},
this)}
ac.prototype.oh=function(a){var b=a[0].length,c=b/this.Ob;if(1<this.Uf){var d=this.ca.createBuffer(2,b*this.Uf,this.Ob*this.Uf);for(var e=d.getChannelData(0),g=d.getChannelData(1),h=0,f=0;f<b;f++)for(var k=0;k<this.Uf;k++,h++)e[h]=a[0][f],g[h]=a[1][f]}else d=this.ca.createBuffer(2,b,this.Ob),d.copyToChannel?(d.copyToChannel(a[0],0),d.copyToChannel(a[1],1)):(d.getChannelData(0).set(a[0]),d.getChannelData(1).set(a[1]));a=this.ca.createBufferSource();a.buffer=d;a.connect(this.zg);a.addEventListener("ended",this.Hb.bind(this));
d=this.ca.currentTime;if(this.g<d)for(this.g=d,d=.2-c,b=0;b<=d;)b+=c,this.g+=c,setTimeout(()=>this.Hb(),1E3*b);a.start(this.g);this.g+=c;setTimeout(()=>this.Hb(),0)};ac.prototype.Hb=function(){this.enabled&&(.2<this.g-this.ca.currentTime||this.s.send("dac-request-data"))};function fc(a,b){this.s=b;this.g=void 0;this.id=0;this.h=[];this.url=a;this.j=Date.now()-1E4;this.i=!1;this.s.register("net"+this.id+"-send",function(c){this.send(c)},this)}n=fc.prototype;n.ij=function(a){this.s&&this.s.send("net"+this.id+"-receive",new Uint8Array(a.data))};n.gj=function(){this.i||(this.connect(),setTimeout(this.connect.bind(this),1E4))};n.jj=function(){for(var a=0;a<this.h.length;a++)this.send(this.h[a]);this.h=[]};n.hj=function(){};n.Da=function(){this.i=!0;this.g&&this.g.close()};
n.connect=function(){if("undefined"!==typeof WebSocket){if(this.g){var a=this.g.readyState;if(0===a||1===a)return}if(!(this.j+1E4>Date.now())){this.j=Date.now();try{this.g=new WebSocket(this.url)}catch(b){console.error(b);return}this.g.binaryType="arraybuffer";this.g.onopen=this.jj.bind(this);this.g.onmessage=this.ij.bind(this);this.g.onclose=this.gj.bind(this);this.g.onerror=this.hj.bind(this)}}};
n.send=function(a){this.g&&1===this.g.readyState?this.g.send(a):(this.h.push(a),128<this.h.length&&(this.h=this.h.slice(-64)),this.connect())};const gc=(new Date("1970-01-01T00:00:00Z")).getTime()-(new Date("1900-01-01T00:00:00Z")).getTime(),hc=Math.pow(2,32),ic=[118,56,54];function jc(a){return[0,1,2,3,4,5].map(b=>a[b].toString(16)).map(b=>1===b.length?"0"+b:b).join(":")}function kc(a){return a[0]<<24|a[1]<<16|a[2]<<8|a[3]}function lc(a,b){const c=Math.min(a.length,b.length);if(c){const g=a.buffer;var d=g.length,e=a.g+c;e>d?(e%=d,d-=a.g,b.set(g.subarray(a.g)),b.set(g.subarray(0,e),d)):b.set(g.subarray(a.g,e))}return c}
class mc{constructor(){var a=Math.min(2048,16);this.length=this.head=this.g=0;this.buffer=new Uint8Array(a)}write(a){const b=a.length;var c=this.length+b;let d=this.buffer.length;if(d<c){for(;d<c;)d*=2;c=new Uint8Array(d);lc(this,c);this.g=0;this.head=this.length;this.buffer=c}c=this.buffer;const e=this.head+b;if(e>d){const g=d-this.head;c.set(a.subarray(0,g),this.head);c.set(a.subarray(g))}else c.set(a,this.head);this.head=e%d;this.length+=b}remove(a){a>this.length&&(a=this.length);a&&(this.g=(this.g+
a)%this.buffer.length,this.length-=a);return a}}function nc(a=1500){const b=a-20,c=b-8,d=new Uint8Array(14+a+4),e=d.buffer,g=d.byteOffset;return{ze:d,Qj:new DataView(e),Th:new DataView(e,g+14,a),bh:new DataView(e,g+34,b),Ng:new DataView(e,g+42,c),Xi:new TextEncoder}}function oc(a,b,c,d){d.ze.set(b,c.byteOffset+a);return b.length}function pc(a,b,c,d){const e=c.byteOffset+(a&-2);d=d.ze;for(c=c.byteOffset;c<e;c+=2)b+=d[c]<<8|d[c+1];for(a&1&&(b+=d[e]<<8);b>>>16;)b=(b&65535)+(b>>>16);return~b&65535}
function qc(a,b){a.ze.fill(0);var c=a.ze,d=c.subarray,e=a.Qj;oc(0,b.Pa.na,e,a);oc(6,b.Pa.src,e,a);e.setUint16(12,b.Pa.Hc);e=14;if(b.eb){var g=a.Th;g.setUint16(0,b.eb.Kf);g.setUint16(2,b.eb.nh);g.setUint8(4,b.eb.vh.length);g.setUint8(5,b.eb.Kg.length);g.setUint16(6,b.eb.jh);oc(8,b.eb.vh,g,a);oc(14,b.eb.Kg,g,a);oc(18,b.eb.Yi,g,a);oc(24,b.eb.$f,g,a);e+=28}else if(b.Y){g=a.Th;var h=20;if(b.gd){var f=a.bh;f.setUint8(0,b.gd.type);f.setUint8(1,b.gd.code);f.setUint16(2,0);var k=4+oc(4,b.gd.data,f,a);f.setUint16(2,
pc(k,0,f,a));h+=k}else if(b.ib){f=a.bh;var m=8;if(b.Ja){k=m;var l=a.Ng;l.setUint8(0,b.Ja.kf);l.setUint8(1,b.Ja.Kf);l.setUint8(2,b.Ja.di);l.setUint8(3,b.Ja.ei);l.setUint32(4,b.Ja.Eh);l.setUint16(8,b.Ja.Ri);l.setUint16(10,b.Ja.flags);l.setUint32(12,b.Ja.Kh);l.setUint32(16,b.Ja.aj);l.setUint32(20,b.Ja.Ui);l.setUint32(24,b.Ja.bi);oc(28,b.Ja.Wg,l,a);l.setUint32(236,1669485411);m=240;for(var p of b.Ja.options)m+=oc(m,p,l,a);k+=m}else if(b.ub){p=m;m=a.Ng;m.setUint16(0,b.ub.id);m.setUint16(2,b.ub.flags);
m.setUint16(4,b.ub.Wd.length);m.setUint16(6,b.ub.wf.length);let C=12;for(var q=0;q<b.ub.Wd.length;++q){var r=b.ub.Wd[q];for(l of r.name){const E=a.Xi.encodeInto(l,a.ze.subarray(m.byteOffset+(C+1))).written;m.setUint8(C,E);C+=1+E}m.setUint16(C,r.type);C+=2;m.setUint16(C,r.re);C+=2}for(q=0;q<b.ub.wf.length;++q){l=b.ub.wf[q];for(k of l.name)r=a.Xi.encodeInto(k,a.ze.subarray(m.byteOffset+(C+1))).written,m.setUint8(C,r),C+=1+r;m.setUint16(C,l.type);C+=2;m.setUint16(C,l.re);C+=2;m.setUint32(C,l.Mg);C+=
4;m.setUint16(C,l.data.length);C+=2;C+=oc(C,l.data,m,a)}k=p+C}else b.wa?(k=m,l=a.Ng,l.setUint8(0,b.wa.flags),l.setUint8(1,b.wa.Wi),l.setUint8(2,b.wa.ui),l.setUint8(3,b.wa.precision),l.setUint32(4,b.wa.Jl),l.setUint32(8,b.wa.Kl),l.setUint32(12,b.wa.Gl),l.setUint32(16,b.wa.Il),l.setUint32(20,b.wa.Hl),l.setUint32(24,b.wa.mi),l.setUint32(28,b.wa.li),l.setUint32(32,b.wa.Qi),l.setUint32(36,b.wa.Pi),l.setUint32(40,b.wa.yh),l.setUint32(44,b.wa.xh),k+=48):k=m+oc(0,b.ib.data,a.Ng,a);m=k;f.setUint16(0,b.ib.xa);
f.setUint16(2,b.ib.Fa);f.setUint16(4,m);f.setUint16(6,0);f.setUint16(6,pc(m,(b.Y.src[0]<<8|b.Y.src[1])+(b.Y.src[2]<<8|b.Y.src[3])+(b.Y.na[0]<<8|b.Y.na[1])+(b.Y.na[2]<<8|b.Y.na[3])+17+m,f,a));h+=m}else b.U&&(f=a.bh,k=0,l=b.U,l.gf&&(k|=1),l.Yd&&(k|=2),l.Pe&&(k|=4),l.Mi&&(k|=8),l.La&&(k|=16),l.Rl&&(k|=32),l.Lj&&(k|=64),l.wj&&(k|=128),p=20,l.options&&l.options.ii&&(f.setUint8(p,2),f.setUint8(p+1,4),f.setUint16(p+2,l.options.ii),p+=4),m=4*Math.ceil(p/4),l.options&&0<m-p&&a.ze.fill(0,f.byteOffset+p,f.byteOffset+
p+(m-p)),f.setUint16(0,l.xa),f.setUint16(2,l.Fa),f.setUint32(4,l.tb),f.setUint32(8,l.jc),f.setUint8(12,m>>2<<4),f.setUint8(13,k),f.setUint16(14,l.Pb),f.setUint16(16,0),f.setUint16(18,l.Sl||0),b.nf&&(m+=oc(20,b.nf,f,a)),f.setUint16(16,pc(m,(b.Y.src[0]<<8|b.Y.src[1])+(b.Y.src[2]<<8|b.Y.src[3])+(b.Y.na[0]<<8|b.Y.na[1])+(b.Y.na[2]<<8|b.Y.na[3])+6+m,f,a)),h+=m);g.setUint8(0,69);g.setUint8(1,b.Y.Ql||0);g.setUint16(2,h);g.setUint16(4,b.Y.id||0);g.setUint8(6,64);g.setUint8(8,b.Y.Mg||32);g.setUint8(9,b.Y.ud);
g.setUint16(10,0);oc(12,b.Y.src,g,a);oc(16,b.Y.na,g,a);g.setUint16(10,pc(20,0,g,a));e+=h}return d.call(c,0,e)}function rc(a,b){fetch(`https://${b.ng||"cloudflare-dns.com"}/dns-query`,{method:"POST",headers:[["content-type","application/dns-message"]],body:a.ib.data}).then(async c=>{c={Pa:{Hc:2048,src:b.Nb,na:a.Pa.src},Y:{ud:17,src:b.yb,na:a.Y.src},ib:{xa:53,Fa:a.ib.xa,data:new Uint8Array(await c.arrayBuffer())}};b.Ra(qc(b.Wa,c))})}
function sc(a,b){let c={};c.Pa={Hc:2048,src:b.Nb,na:a.Pa.src};c.Y={ud:17,src:b.yb,na:b.We};c.ib={xa:67,Fa:68};c.Ja={Kf:1,di:6,ei:0,Eh:a.Ja.Eh,Ri:0,flags:0,Kh:0,aj:kc(b.We),Ui:kc(b.yb),bi:kc(b.yb),Wg:a.Ja.Wg};let d=[],e=a.Ja.options.find(function(g){return 53===g[0]});e&&3===e[2]&&(a.Ja.kf=3);1===a.Ja.kf&&(c.Ja.kf=2,d.push(new Uint8Array([53,1,2])));3===a.Ja.kf&&(c.Ja.kf=2,d.push(new Uint8Array([53,1,5])),d.push(new Uint8Array([51,4,8,0,0,0])));a=[b.yb[0],b.yb[1],b.yb[2],b.yb[3]];d.push(new Uint8Array([1,
4,255,255,255,0]));b.Ce&&(d.push(new Uint8Array([3,4].concat(a))),d.push(new Uint8Array([6,4].concat(a))));d.push(new Uint8Array([54,4].concat(a)));d.push(new Uint8Array([60,3].concat(ic)));d.push(new Uint8Array([255,0]));c.Ja.options=d;b.Ra(qc(b.Wa,c))}
function tc(a,b){let c={};var d=(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint16(12),e={Hc:d,na:a.subarray(0,6),im:jc(a.subarray(0,6)),src:a.subarray(6,12),ym:jc(a.subarray(6,12))};c.Pa=e;a=a.subarray(14,a.length);if(2048===d){var g=new DataView(a.buffer,a.byteOffset,a.byteLength);e=a[0]>>4&15;var h=a[0]&15,f=g.getUint8(1),k=g.getUint16(2);let m=g.getUint8(8);d=g.getUint8(9);g=g.getUint16(10);c.Y={version:e,om:h,Ql:f,nd:k,Mg:m,ud:d,pm:g,src:a.subarray(12,16),na:a.subarray(16,20)};e=a.subarray(4*
h,k);if(1===d)a=new DataView(e.buffer,e.byteOffset,e.byteLength),a={type:a.getUint8(0),code:a.getUint8(1),Jh:a.getUint16(2),data:e.subarray(4)},c.gd=a;else if(6===d)d=new DataView(e.buffer,e.byteOffset,e.byteLength),a={xa:d.getUint16(0),Fa:d.getUint16(2),tb:d.getUint32(4),jc:d.getUint32(8),Kj:d.getUint8(12)>>4,Pb:d.getUint16(14),Jh:d.getUint16(16),Sl:d.getUint16(18)},d=d.getUint8(13),a.gf=!!(d&1),a.Yd=!!(d&2),a.Pe=!!(d&4),a.Mi=!!(d&8),a.La=!!(d&16),a.Rl=!!(d&32),a.Lj=!!(d&64),a.wj=!!(d&128),c.U=a,
c.nf=e.subarray(4*a.Kj);else if(17===d){a=new DataView(e.buffer,e.byteOffset,e.byteLength);a={xa:a.getUint16(0),Fa:a.getUint16(2),nd:a.getUint16(4),Jh:a.getUint16(6),data:e.subarray(8),Aj:(new TextDecoder).decode(e.subarray(8))};if(67===a.Fa||67===a.xa){e=e.subarray(8);d=new DataView(e.buffer,e.byteOffset,e.byteLength);d={kf:d.getUint8(0),Kf:d.getUint8(1),di:d.getUint8(2),ei:d.getUint8(3),Eh:d.getUint32(4),Ri:d.getUint16(8),flags:d.getUint16(10),Kh:d.getUint32(12),aj:d.getUint32(16),Ui:d.getUint32(20),
bi:d.getUint32(24),Wg:e.subarray(28,44),hi:d.getUint32(236),options:[]};e=e.subarray(240);for(h=0;h<e.length;++h)f=h,0!==e[h]&&(++h,k=e[h],h+=k,d.options.push(e.subarray(f,f+k+2)));c.Ja=d;c.jm=d.options}else 53===a.Fa||53===a.xa?uc(e.subarray(8),c):123===a.Fa&&(d=e.subarray(8),d=new DataView(d.buffer,d.byteOffset,d.byteLength),c.wa={flags:d.getUint8(0),Wi:d.getUint8(1),ui:d.getUint8(2),precision:d.getUint8(3),Jl:d.getUint32(4),Kl:d.getUint32(8),Gl:d.getUint32(12),Il:d.getUint32(16),Hl:d.getUint32(20),
mi:d.getUint32(24),li:d.getUint32(28),Qi:d.getUint32(32),Pi:d.getUint32(36),yh:d.getUint32(40),xh:d.getUint32(44)});c.ib=a}}else 2054===d&&(d=new DataView(a.buffer,a.byteOffset,a.byteLength),a={Kf:d.getUint16(0),nh:d.getUint16(2),jh:d.getUint16(6),vh:a.subarray(8,14),Kg:a.subarray(14,18),Yi:a.subarray(18,24),$f:a.subarray(24,28)},c.eb=a);if(c.Y)if(c.U)a:{a=`${c.Y.src.join(".")}:${c.U.xa}:${c.Y.na.join(".")}:${c.U.Fa}`;if(c.U.Yd&&!c.U.La&&(b.dc[a]&&delete b.dc[a],d=new vc(b),d.state="syn-received",
d.h=a,d.C=c,d.v=c.Pa.na,d.G=c.Y.na,d.xa=c.U.Fa,d.o=c.Pa.src,d.Fa=c.U.xa,d.D=c.Y.src,b.s.Rf.send("tcp-connection",d),b.ki&&b.ki(d,c),b.dc[a]))break a;if(b.dc[a])b.dc[a].process(c);else{a=c.U.jc;if(c.U.gf||c.U.Yd)a+=1;d={};d.Pa={Hc:2048,src:b.Nb,na:c.Pa.src};d.Y={ud:6,src:c.Y.na,na:c.Y.src};d.U={xa:c.U.Fa,Fa:c.U.xa,tb:a,jc:c.U.tb+(c.U.Yd?1:0),Pb:c.U.Pb,Pe:!0,La:c.U.Yd};b.Ra(qc(b.Wa,d))}}else if(c.ib)if(c.ub)if("static"===b.mg){a={};a.Pa={Hc:2048,src:b.Nb,na:c.Pa.src};a.Y={ud:17,src:b.yb,na:c.Y.src};
a.ib={xa:53,Fa:c.ib.xa};d=[];for(e=0;e<c.ub.Wd.length;++e)switch(h=c.ub.Wd[e],h.type){case 1:d.push({name:h.name,type:h.type,re:h.re,Mg:600,data:[192,168,87,1]})}a.ub={id:c.ub.id,flags:33152,Wd:c.ub.Wd,wf:d};b.Ra(qc(b.Wa,a))}else rc(c,b);else c.Ja?sc(c,b):c.wa?(a=Date.now()+gc,d=a%1E3/1E3*hc,e={},e.Pa={Hc:2048,src:b.Nb,na:c.Pa.src},e.Y={ud:17,src:c.Y.na,na:c.Y.src},e.ib={xa:123,Fa:c.ib.xa},e.wa=Object.assign({},c.wa),e.wa.flags=36,e.wa.ui=10,e.wa.mi=c.wa.yh,e.wa.li=c.wa.xh,e.wa.Qi=a/1E3,e.wa.Pi=d,
e.wa.yh=a/1E3,e.wa.xh=d,e.wa.Wi=2,b.Ra(qc(b.Wa,e))):8===c.ib.Fa&&(a={},a.Pa={Hc:2048,src:b.Nb,na:c.Pa.src},a.Y={ud:17,src:c.Y.na,na:c.Y.src},a.ib={xa:c.ib.Fa,Fa:c.ib.xa,data:(new TextEncoder).encode(c.ib.Aj)},b.Ra(qc(b.Wa,a)));else c.gd&&8===c.gd.type&&(a={},a.Pa={Hc:2048,src:b.Nb,na:c.Pa.src},a.Y={ud:1,src:c.Y.na,na:c.Y.src},a.gd={type:0,code:c.gd.code,data:c.gd.data},b.Ra(qc(b.Wa,a)));else c.eb&&1===c.eb.jh&&2048===c.eb.nh&&(a=kc(c.eb.$f)&4294967040,d=kc(b.yb)&4294967040,!b.Ce&&a!==d||a===d&&99<
c.eb.$f[3]||(a={},a.Pa={Hc:2054,src:b.Nb,na:c.Pa.src},a.eb={Kf:1,nh:2048,jh:2,vh:b.Nb,Kg:c.eb.$f,Yi:c.Pa.src,$f:c.eb.Kg},b.Ra(qc(b.Wa,a))))}
function uc(a,b){function c(){let m=[],l;do l=d.getUint8(f),m.push((new TextDecoder).decode(a.subarray(f+1,f+1+l))),f+=l+1;while(0<l);return m}let d=new DataView(a.buffer,a.byteOffset,a.byteLength),e={id:d.getUint16(0),flags:d.getUint16(2),Wd:[],wf:[]};var g=d.getUint16(4);let h=d.getUint16(6);d.getUint16(8);d.getUint16(10);let f=12;for(var k=0;k<g;k++)e.Wd.push({name:c(),type:d.getInt16(f),re:d.getInt16(f+2)}),f+=4;for(g=0;g<h;g++){k={name:c(),type:d.getInt16(f),re:d.getUint16(f+2),Mg:d.getUint32(f+
4)};f+=8;let m=d.getUint16(f);f+=2;k.data=a.subarray(f,f+m);f+=m;e.wf.push(k)}b.ub=e}function vc(a){this.lb=a.lb||1500;const b=this.lb-20-20;this.state="closed";this.oa=a;this.Re=new mc;this.K=new Uint8Array(b);this.i=this.ug=!1;this.l=void 0;this.j={}}function wc(a,b){a.j.data=b}function xc(a,b,...c){a.j[b]&&a.j[b].apply(a,c)}function yc(a){let b={};b.Pa={Hc:2048,src:a.v,na:a.o};b.Y={ud:6,src:a.G,na:a.D};b.U={xa:a.xa,Fa:a.Fa,Pb:a.Pb,jc:a.La,tb:a.tb,La:!0};return b}
function zc(a,b,c){b={xa:b.U.Fa,Fa:b.U.xa,Pb:b.U.Pb,jc:a.La,tb:a.tb};if(c)for(const d in c)b[d]=c[d];a=yc(a);a.U=b;return a}n=vc.prototype;n.connect=function(){this.tb=1338;this.La=1;this.Pb=64240;"syn-probe"!==this.state&&(this.state="syn-sent");let a=yc(this);a.Y.id=2345;a.U={xa:this.xa,Fa:this.Fa,tb:1337,jc:0,Pb:0,Yd:!0};this.oa.Ra(qc(this.oa.Wa,a))};
n.accept=function(a){a=a||this.C;this.oa.dc[this.h]=this;this.tb=1338;this.La=a.U.tb+1;this.Pb=a.U.Pb;let b=yc(this);b.U={xa:this.xa,Fa:this.Fa,tb:1337,jc:this.La,Pb:a.U.Pb,Yd:!0,La:!0,options:{ii:this.lb-20-20}};this.state="established";this.oa.Ra(qc(this.oa.Wa,b))};
n.process=function(a){this.C=a;if("closed"===this.state)a=zc(this,a,{Pe:!0}),this.oa.Ra(qc(this.oa.Wa,a));else if(a.U.Pe)"syn-probe"===this.state?xc(this,"probe",!1):this.Qf(),Ac(this);else if(a.U.Yd)"syn-sent"===this.state&&a.U.La?(this.La=a.U.tb+1,this.g=a.U.jc,this.oa.Ra(qc(this.oa.Wa,yc(this))),this.state="established",xc(this,"connect")):"syn-probe"===this.state&&a.U.La&&(xc(this,"probe",!0),a=zc(this,a,{Pe:!0}),this.oa.Ra(qc(this.oa.Wa,a)),Ac(this));else{if(a.U.La)if("syn-received"===this.state)this.state=
"established";else if("fin-wait-1"===this.state)a.U.gf||(this.state="fin-wait-2");else if("closing"===this.state||"last-ack"===this.state){Ac(this);return}if(void 0===this.g)this.g=a.U.jc;else{var b=a.U.jc-this.g;if(0<b){if(this.g=a.U.jc,this.Re.remove(b),this.tb+=b,this.pending=!1,this.i&&!this.Re.length){this.i=!1;this.state=this.l;a=yc(this);a.U.gf=!0;this.oa.Ra(qc(this.oa.Wa,a));return}}else if(0>b){a=zc(this,a,{Pe:!0});this.oa.Ra(qc(this.oa.Wa,a));this.Qf();Ac(this);return}}a.U.gf?(++this.La,
b=zc(this,a,{}),"established"===this.state?(b.U.La=!0,this.state="close-wait",this.ji()):"fin-wait-1"===this.state?(a.U.La?Ac(this):this.state="closing",b.U.La=!0):"fin-wait-2"===this.state?(Ac(this),b.U.La=!0):(Ac(this),this.Qf(),b.U.Pe=!0),this.oa.Ra(qc(this.oa.Wa,b))):this.La!==a.U.tb?(a=zc(this,a,{La:!0}),this.oa.Ra(qc(this.oa.Wa,a))):a.U.La&&0<a.nf.length&&(this.La+=a.nf.length,this.oa.Ra(qc(this.oa.Wa,yc(this))),xc(this,"data",a.nf));this.Hb()}};
n.write=function(a){this.ug||this.Re.write(a);this.Hb()};n.close=function(){if(!this.ug){this.ug=!0;if("established"===this.state||"syn-received"===this.state)var a="fin-wait-1";else if("close-wait"===this.state)a="last-ack";else{Ac(this);return}this.Re.length||this.pending?(this.i=!0,this.l=a):(this.state=a,a=yc(this),a.U.gf=!0,this.oa.Ra(qc(this.oa.Wa,a)))}this.Hb()};n.ji=function(){xc(this,"shutdown")};n.Qf=function(){xc(this,"close")};
function Ac(a){a.oa.dc[a.h]&&(a.state="closed",delete a.oa.dc[a.h])}n.Hb=function(){if(this.Re.length&&!this.pending){const a=this.K,b=lc(this.Re,a),c=yc(this);c.U.Mi=!0;c.nf=a.subarray(0,b);this.oa.Ra(qc(this.oa.Wa,c));this.pending=!0}};function Bc(a,b){b=b||{};this.s=a;this.id=b.id||0;this.Nb=new Uint8Array((b.Nb||"52:54:0:1:2:3").split(":").map(function(c){return parseInt(c,16)}));this.yb=new Uint8Array((b.yb||"192.168.86.1").split(".").map(function(c){return parseInt(c,10)}));this.We=new Uint8Array((b.We||"192.168.86.100").split(".").map(function(c){return parseInt(c,10)}));this.Ce=void 0===b.Ce||!!b.Ce;this.Pg=new Uint8Array(6);this.mg=b.mg||"static";this.ng=b.ng;this.dc={};this.lb=b.lb;this.Wa=nc(this.lb);this.fetch=(...c)=>
fetch(...c);this.Yc=b.Yc;this.s.register("net"+this.id+"-mac",function(c){this.Pg=new Uint8Array(c.split(":").map(function(d){return parseInt(d,16)}))},this);this.s.register("net"+this.id+"-send",function(c){this.send(c)},this);this.s.register("tcp-connection",c=>{80===c.xa&&(wc(c,Cc),c.accept())},this)}n=Bc.prototype;n.Da=function(){};
n.connect=function(a){var b=this.We.join(".");const c=this.yb.join("."),d=16383*Math.random()|0;let e,g,h=0;do e=49152+(d+h)%16383,g=`${b}:${a}:${c}:${e}`;while(16383>++h&&this.dc[g]);if(this.dc[g])throw Error("pool of dynamic TCP port numbers exhausted, connection aborted");b=new vc(this);b.h=g;b.v=this.Nb;b.G=this.yb;b.xa=e;b.o=this.Pg;b.Fa=a;b.D=this.We;this.dc[g]=b;b.connect();return b};
async function Cc(a){this.read=this.read||"";if((this.read+=(new TextDecoder).decode(a))&&-1!==this.read.indexOf("\r\n\r\n")){a=this.read.indexOf("\r\n\r\n");var b=this.read.substring(0,a).split(/\r\n/);a=this.read.substring(a+4);this.read="";let c=b[0].split(" "),d;d=/^https?:/.test(c[1])?new URL(c[1]):new URL("http://host"+c[1]);"undefined"!==typeof window&&"http:"===d.protocol&&"https:"===window.location.protocol&&(d.protocol="https:");let e=new Headers;for(let f=1;f<b.length;++f){const k=Dc(b[f]);
if(!k){console.warn('The request contains an invalid header: "%s"',b[f]);Ec(this,400,"Bad Request",`Invalid header in request: ${b[f]}`);return}"host"===k.key.toLowerCase()?d.host=k.value:e.append(k.key,k.value)}if(!this.oa.Yc&&/^\d+\.external$/.test(d.hostname))if(b=parseInt(d.hostname.split(".")[0],10),!isNaN(b)&&0<b&&65536>b)d.protocol="http:",d.hostname="localhost",d.port=b.toString(10);else{console.warn('Unknown port for localhost: "%s"',d.href);Ec(this,400,"Bad Request",`Unknown port for localhost: ${d.href}`);
return}this.name=d.href;b={method:c[0],headers:e};-1!==["put","post"].indexOf(b.method.toLowerCase())&&(b.body=a);const g=this.oa.Yc?this.oa.Yc+encodeURIComponent(d.href):d.href;new TextEncoder;let h=!1;this.oa.fetch(g,b).then(f=>{let k=new Headers(f.headers);k.delete("content-encoding");k.delete("keep-alive");k.delete("content-length");k.delete("transfer-encoding");k.set("x-was-fetch-redirected",`${!!f.redirected}`);k.set("x-fetch-resp-url",f.url);k.set("connection","close");this.write(Fc(f.status,
f.statusText,k));h=!0;if(f.body&&f.body.getReader){const m=f.body.getReader(),l=({value:p,done:q})=>{p&&this.write(p);if(q)this.close();else return m.read().then(l)};m.read().then(l)}else f.arrayBuffer().then(m=>{this.write(new Uint8Array(m));this.close()})}).catch(f=>{console.warn("Fetch Failed: "+g+"\n"+f);h||Ec(this,502,"Fetch Error",`Fetch ${g} failed:\n\n${f.stack||f.message}`);this.close()})}}
n.fetch=async function(a,b){this.Yc&&(a=this.Yc+encodeURIComponent(a));try{const c=await fetch(a,b),d=await c.arrayBuffer();return[c,d]}catch(c){return console.warn("Fetch Failed: "+a+"\n"+c),[{status:502,statusText:"Fetch Error",headers:new Headers({"Content-Type":"text/plain"})},(new TextEncoder).encode(`Fetch ${a} failed:\n\n${c.stack}`).buffer]}};
function Fc(a,b,c){a=[`HTTP/1.1 ${a} ${b}`];for(const [d,e]of c.entries())a.push(`${d}: ${e}`);return(new TextEncoder).encode(a.join("\r\n")+"\r\n\r\n")}function Ec(a,b,c,d){const e=new Headers({"content-type":"text/plain","content-length":d.length.toString(10),connection:"close"});b=[Fc(b,c,e),(new TextEncoder).encode(d)];if(!a.ug)for(const g of b)a.Re.write(g);a.Hb();a.close()}
function Dc(a){var b=a.match(/^([^:]*):(.*)$/);if(b&&(a=b[1],b=b[2].trim(),0!==a.length&&0!==b.length&&/^[\w-]+$/.test(a)&&/^[\x20-\x7E]+$/.test(b)))return{key:a,value:b}}n.send=function(a){tc(a,this)};n.Ra=function(a){this.s.send("net"+this.id+"-receive",new Uint8Array(a))};function Gc(a,b,c){Hc(this,a);this.j=1;this.g={0:{yf:0}};this.i=[];c=c||{};this.s=b;this.id=c.id||0;this.Nb=new Uint8Array((c.Nb||"52:54:0:1:2:3").split(":").map(function(d){return parseInt(d,16)}));this.yb=new Uint8Array((c.yb||"192.168.86.1").split(".").map(function(d){return parseInt(d,10)}));this.We=new Uint8Array((c.We||"192.168.86.100").split(".").map(function(d){return parseInt(d,10)}));this.Ce=void 0===c.Ce||!!c.Ce;this.Pg=new Uint8Array(6);this.mg=c.mg||"doh";this.ng=c.ng;this.dc={};this.lb=
c.lb;this.Wa=nc(this.lb);this.s.register("net"+this.id+"-mac",function(d){this.Pg=new Uint8Array(d.split(":").map(function(e){return parseInt(e,16)}))},this);this.s.register("net"+this.id+"-send",function(d){this.send(d)},this)}
function Hc(a,b){a.h=new WebSocket(b.replace("wisp://","ws://").replace("wisps://","wss://"));a.h.binaryType="arraybuffer";a.h.onmessage=c=>{var d=new Uint8Array(c.data);const e=new DataView(d.buffer);c=e.getUint32(1,!0);switch(d[0]){case 2:if(a.g[c])a.g[c].Zg(d.slice(5));else throw Error("Got a DATA packet but stream not registered. ID: "+c);break;case 3:a.g[c]&&(a.g[c].yf=e.getUint32(5,!0));if(a.g[c].Lh){d=a.i.slice(0);a.i.length=0;a.g[c].Lh=!1;for(const g of d)Ic(a,g.data,g.type,c)}break;case 4:a.g[c]&&
a.g[c].Xg(e.getUint8(5)),delete a.g[c]}};a.h.onclose=()=>{setTimeout(()=>{Hc(a,b)},1E4)}}function Ic(a,b,c,d){a.g[d]&&(0<a.g[d].yf?("DATA"===c&&a.g[d].yf--,a.h.send(b)):(a.g[d].Lh=!0,a.i.push({data:b,type:c})))}
function Jc(a,b){let c,d;switch(b.type){case "CONNECT":const e=(new TextEncoder).encode(b.hostname);c=new Uint8Array(8+e.length);d=new DataView(c.buffer);d.setUint8(0,1);d.setUint32(1,b.uc,!0);d.setUint8(5,1);d.setUint16(6,b.port,!0);c.set(e,8);a.g[b.uc]={Zg:b.Zg,Xg:b.Xg,yf:a.g[0].yf};break;case "DATA":c=new Uint8Array(5+b.data.length);d=new DataView(c.buffer);d.setUint8(0,2);d.setUint32(1,b.uc,!0);c.set(b.data,5);break;case "CLOSE":c=new Uint8Array(6),d=new DataView(c.buffer),d.setUint8(0,4),d.setUint32(1,
b.uc,!0),d.setUint8(5,b.reason)}Ic(a,c,b.type,b.uc)}Gc.prototype.Da=function(){this.h&&(this.h.onmessage=null,this.h.onclose=null,this.h.close(),this.h=null)};Gc.prototype.ki=function(a,b){a.uc=this.j++;wc(a,c=>{0!==c.length&&Jc(this,{type:"DATA",uc:a.uc,data:c})});a.Qf=()=>{Jc(this,{type:"CLOSE",uc:a.uc,reason:2})};a.ji=a.Qf;Jc(this,{type:"CONNECT",uc:a.uc,hostname:b.Y.na.join("."),port:a.xa,Zg:c=>{a.write(c)},Xg:()=>{a.close()}});a.accept();return!0};Gc.prototype.send=function(a){tc(a,this)};
Gc.prototype.Ra=function(a){this.s.send("net"+this.id+"-receive",new Uint8Array(a))};const Kc="undefined"!==typeof window&&0<=window.navigator.platform.toString().toLowerCase().search("win");
function Lc(a){function b(v){return v.shiftKey&&v.ctrlKey&&(73===v.keyCode||74===v.keyCode||75===v.keyCode)||!C.og?!1:v.target?v.target.classList.contains("phone_keyboard")||"INPUT"!==v.target.nodeName&&"TEXTAREA"!==v.target.nodeName:!0}function c(v){!v.altKey&&l[56]&&k(56,!1);return h(v,!1)}function d(v){!v.altKey&&l[56]&&k(56,!1);return h(v,!0)}function e(){for(var v=Object.keys(l),H,N=0;N<v.length;N++)H=+v[N],l[H]&&k(H,!1);l={}}function g(v){if(C.s&&b(v))switch(v.inputType){case "insertText":for(var H=
0;H<v.data.length;H++)C.Vi(v.data[H]);break;case "insertLineBreak":C.g(13);break;case "deleteContentBackward":C.g(8)}}function h(v,H){if(C.s&&b(v)&&""!==v.code&&"Process"!==v.key&&"Unidentified"!==v.key&&229!==v.keyCode){v.preventDefault&&v.preventDefault();if(Kc&&(p&&(clearTimeout(r),v.getModifierState&&v.getModifierState("AltGraph")&&q===H&&"ControlLeft"===p.code&&"AltRight"===v.code||f(p,q),p=null),"ControlLeft"===v.code))return p=v,q=H,r=setTimeout(()=>{f(p,q);p=null},10),!1;f(v,H);return!1}}
function f(v,H){a:{if(void 0!==v.code){var N=A[v.code];if(void 0!==N)break a}N=E[v.keyCode]}N?k(N,H,v.repeat):console.log("Missing char in map: keyCode="+(v.keyCode||-1).toString(16)+" code="+v.code)}function k(v,H,N){if(H)l[v]&&!N&&k(v,!1);else if(!l[v])return;(l[v]=H)||(v|=128);255<v?(m(v>>8),m(v&255)):m(v)}function m(v){C.s.send("keyboard-code",v)}var l={},p=null,q=!1,r=0,C=this;this.og=!0;const E=new Uint16Array([0,0,0,0,0,0,0,0,14,15,0,0,0,28,0,0,42,29,56,0,58,0,0,0,0,0,0,1,0,0,0,0,57,57417,
57425,57423,57415,57419,57416,57421,80,0,0,0,0,82,83,0,11,2,3,4,5,6,7,8,9,10,0,39,0,13,0,0,0,30,48,46,32,18,33,34,35,23,36,37,38,50,49,24,25,16,19,31,20,22,47,17,45,21,44,57435,57436,57437,0,0,82,79,80,81,75,76,77,71,72,73,0,0,0,0,0,0,59,60,61,62,63,64,65,66,67,68,87,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,39,13,51,12,52,53,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,43,27,40,0,57435,57400,0,0,0,
0,0,0,0,0,0,0,0,0,0,0]),z={8:8,10:13,32:32,39:222,44:188,45:189,46:190,47:191,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,59:186,61:187,91:219,92:220,93:221,96:192,97:65,98:66,99:67,100:68,101:69,102:70,103:71,104:72,105:73,106:74,107:75,108:76,109:77,110:78,111:79,112:80,113:81,114:82,115:83,116:84,117:85,118:86,119:87,120:88,121:89,122:90},u={33:49,34:222,35:51,36:52,37:53,38:55,40:57,41:48,42:56,43:187,58:186,60:188,62:190,63:191,64:50,65:65,66:66,67:67,68:68,69:69,70:70,71:71,
72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,94:54,95:189,123:219,124:220,125:221,126:192};var A={Escape:1,Digit1:2,Digit2:3,Digit3:4,Digit4:5,Digit5:6,Digit6:7,Digit7:8,Digit8:9,Digit9:10,Digit0:11,Minus:12,Equal:13,Backspace:14,Tab:15,KeyQ:16,KeyW:17,KeyE:18,KeyR:19,KeyT:20,KeyY:21,KeyU:22,KeyI:23,KeyO:24,KeyP:25,BracketLeft:26,BracketRight:27,Enter:28,ControlLeft:29,KeyA:30,KeyS:31,KeyD:32,KeyF:33,KeyG:34,KeyH:35,KeyJ:36,KeyK:37,
KeyL:38,Semicolon:39,Quote:40,Backquote:41,ShiftLeft:42,Backslash:43,KeyZ:44,KeyX:45,KeyC:46,KeyV:47,KeyB:48,KeyN:49,KeyM:50,Comma:51,Period:52,Slash:53,IntlRo:53,ShiftRight:54,NumpadMultiply:55,AltLeft:56,Space:57,CapsLock:58,F1:59,F2:60,F3:61,F4:62,F5:63,F6:64,F7:65,F8:66,F9:67,F10:68,NumLock:69,ScrollLock:70,Numpad7:71,Numpad8:72,Numpad9:73,NumpadSubtract:74,Numpad4:75,Numpad5:76,Numpad6:77,NumpadAdd:78,Numpad1:79,Numpad2:80,Numpad3:81,Numpad0:82,NumpadDecimal:83,IntlBackslash:86,F11:87,F12:88,
NumpadEnter:57372,ControlRight:57373,NumpadDivide:57397,AltRight:57400,Home:57415,ArrowUp:57416,PageUp:57417,ArrowLeft:57419,ArrowRight:57421,End:57423,ArrowDown:57424,PageDown:57425,Insert:57426,Delete:57427,MetaLeft:57435,OSLeft:57435,MetaRight:57436,OSRight:57436,ContextMenu:57437};this.s=a;this.Da=function(){"undefined"!==typeof window&&(window.removeEventListener("keyup",c,!1),window.removeEventListener("keydown",d,!1),window.removeEventListener("blur",e,!1),window.removeEventListener("input",
g,!1))};this.qc=function(){"undefined"!==typeof window&&(this.Da(),window.addEventListener("keyup",c,!1),window.addEventListener("keydown",d,!1),window.addEventListener("blur",e,!1),window.addEventListener("input",g,!1))};this.qc();this.g=function(v){v={keyCode:v};h(v,!0);h(v,!1)};this.Vi=function(v){var H=v.charCodeAt(0);H in z?this.g(z[H]):H in u?(m(42),this.g(u[H]),m(170)):console.log("ascii -> keyCode not found: ",H,v)}};function Mc(a,b){function c(z){if(!E.enabled||!E.og)return!1;var u=b||document.body,A;if(!(A=document.pointerLockElement))a:{for(z=z.target;z.parentNode;){if(z===u){A=!0;break a}z=z.parentNode}A=!1}return A}function d(z){c(z)&&(z=z.changedTouches)&&z.length&&(z=z[z.length-1],r=z.clientX,C=z.clientY)}function e(){if(l||q||p)E.s.send("mouse-click",[!1,!1,!1]),l=q=p=!1}function g(z){if(E.s&&c(z)&&E.Ld){var u=0,A=0,v=z.changedTouches;v?v.length&&(v=v[v.length-1],u=v.clientX-r,A=v.clientY-C,r=v.clientX,
C=v.clientY,z.preventDefault()):"number"===typeof z.movementX?(u=z.movementX,A=z.movementY):"number"===typeof z.webkitMovementX?(u=z.webkitMovementX,A=z.webkitMovementY):"number"===typeof z.mozMovementX?(u=z.mozMovementX,A=z.mozMovementY):(u=z.clientX-r,A=z.clientY-C,r=z.clientX,C=z.clientY);E.s.send("mouse-delta",[1*u,-(1*A)]);b&&E.s.send("mouse-absolute",[z.pageX-b.offsetLeft,z.pageY-b.offsetTop,b.offsetWidth,b.offsetHeight])}}function h(z){c(z)&&k(z,!0)}function f(z){c(z)&&k(z,!1)}function k(z,
u){E.s&&(1===z.which?l=u:2===z.which?q=u:3===z.which&&(p=u),E.s.send("mouse-click",[l,q,p]),z.preventDefault())}function m(z){if(c(z)){var u=z.wheelDelta||-z.detail;0>u?u=-1:0<u&&(u=1);E.s.send("mouse-wheel",[u,0]);z.preventDefault()}}var l=!1,p=!1,q=!1,r=0,C=0,E=this;this.enabled=!1;this.og=!0;this.s=a;this.s.register("mouse-enable",function(z){this.enabled=z},this);this.Ld=!1;this.s.register("emulator-stopped",function(){this.Ld=!1},this);this.s.register("emulator-started",function(){this.Ld=!0},
this);this.Da=function(){"undefined"!==typeof window&&(window.removeEventListener("touchstart",d,!1),window.removeEventListener("touchend",e,!1),window.removeEventListener("touchmove",g,!1),window.removeEventListener("mousemove",g,!1),window.removeEventListener("mousedown",h,!1),window.removeEventListener("mouseup",f,!1),window.removeEventListener("wheel",m,{passive:!1}))};this.qc=function(){"undefined"!==typeof window&&(this.Da(),window.addEventListener("touchstart",d,!1),window.addEventListener("touchend",
e,!1),window.addEventListener("touchmove",g,!1),window.addEventListener("mousemove",g,!1),window.addEventListener("mousedown",h,!1),window.addEventListener("mouseup",f,!1),window.addEventListener("wheel",m,{passive:!1}))};this.qc()};function Nc(a,b){function c(D){D=D.toString(16);return"#"+"0".repeat(6-D.length)+D}function d(D){var B=256*ja,J=8*T,L=P?P.canvas:null;L&&L.width===B&&L.height===J||(L?(L.width=B,L.height=J):(L=new OffscreenCanvas(B,J),P=L.getContext("2d")),da=P.createImageData(B,J));const S=da.data;let Q=0,X;J=ob?function(ba){X=X||ba;S[Q+3]=ba;S[Q+7]=ba;Q+=8}:function(ba){X=X||ba;S[Q+3]=ba;Q+=4};L=32-T;const oa=B*(T-1)*4;B=4*(ja-B*T);const la=1020*ja;for(let ba=0,Oa=0;2048>ba;++ba,Oa+=L,Q+=B){const Pa=ba%256;ba&&
!Pa&&(Q+=oa);X=!1;for(let Za=0;Za<T;++Za,++Oa,Q+=la){const $a=D[Oa];for(let Fa=128;0<Fa;Fa>>=1)J($a&Fa?255:0);pb&&J(y&&192<=Pa&&223>=Pa&&$a&1?255:0)}Ub[ba]=X?1:0}P.putImageData(da,0,0)}function e(D,B,J,L){if(B&&J){D.style.width="";D.style.height="";L&&(D.style.transform="");var S=D.getBoundingClientRect();L?D.style.transform=(1===B?"":" scaleX("+B+")")+(1===J?"":" scaleY("+J+")"):(0===B%1&&0===J%1?(h.style.imageRendering="crisp-edges",h.style.imageRendering="pixelated",h.style["-ms-interpolation-mode"]=
"nearest-neighbor"):(h.style.imageRendering="",h.style["-ms-interpolation-mode"]=""),L=window.devicePixelRatio||1,0!==L%1&&(B/=L,J/=L));1!==B&&(D.style.width=S.width*B+"px");1!==J&&(D.style.height=S.height*J+"px")}}const g=a.ig;this.sh=b;console.assert(g,"options.container must be provided");this.o=1;this.v=2;var h=g.getElementsByTagName("canvas")[0],f=h.getContext("2d",{alpha:!1}),k=g.getElementsByTagName("div")[0],m=document.createElement("div"),l,p,q=void 0!==a.scale?a.scale:1,r=void 0!==a.scale?
a.scale:1,C=1,E,z,u,A,v,H,N,P,da,Ub=new Int8Array(2048),T,ja,pb,ob,y,I=0,U=0,V,ta=0,Ka,ab,bb,ua=Ea(a.encoding),pa=0,va=!1;this.qc=function(){m.classList.add("cursor");m.style.position="absolute";m.style.backgroundColor="#ccc";m.style.width="7px";m.style.display="inline-block";this.g(!1);this.i(80,25);2===z&&this.h(720,400);this.mf(q,r);this.Zd()};this.kk=function(){const D=new Image;if(1===z||2===z)D.src=h.toDataURL("image/png");else{const B=[9,16],J=document.createElement("canvas");J.width=A*B[0];
J.height=v*B[1];const L=J.getContext("2d");L.imageSmoothingEnabled=!1;L.font=window.getComputedStyle(k).font;L.textBaseline="top";for(let S=0;S<v;S++)for(let Q=0;Q<A;Q++){const X=4*(S*A+Q),oa=u[X],la=u[X+3];L.fillStyle=c(u[X+2]);L.fillRect(Q*B[0],S*B[1],B[0],B[1]);L.fillStyle=c(la);L.fillText(ua[oa],Q*B[0],S*B[1])}"none"!==m.style.display&&l<v&&p<A&&(L.fillStyle=m.style.backgroundColor,L.fillRect(p*B[0],l*B[1]+parseInt(m.style.marginTop,10),parseInt(m.style.width,10),parseInt(m.style.height,10)));
D.src=J.toDataURL("image/png")}return D};this.j=function(D,B,J,L,S,Q){B=4*(D*A+B);u[B]=J;u[B+1]=L;u[B+2]=S;u[B+3]=Q;E[D]=1};this.Zd=function(){pa=requestAnimationFrame(()=>this.da())};this.da=function(){va||(0===z?this.fa():1===z?this.$():this.aa());this.Zd()};this.fa=function(){for(var D=0;D<v;D++)E[D]&&(this.Z(D),E[D]=0)};this.$=function(){this.sh()};this.aa=function(){if(H){var D=performance.now();if(266<D-ta){V=!V;bb&&(E[l]=1);var B=4*A;for(let oa=0,la=0;oa<v;++oa)if(E[oa])la+=B;else for(var J=
0;J<A;++J,la+=4)if(u[la+1]&1){E[oa]=1;la+=B-4*J;break}ta=D}D=P.canvas;B=N.canvas;J=4*A;const S=A*ja,Q=T;let X=0;for(let oa=0,la=0,ba=0;oa<v;++oa,la+=T){if(!E[oa]){ba+=J;continue}++X;N.clearRect(0,Q,S,T);let Oa,Pa,Za,$a;for(let Fa=0;Fa<S;Fa+=ja,ba+=4){const Ke=u[ba];var L=u[ba+1];const Le=u[ba+2],Me=u[ba+3],Ne=L&2?U:I;L=(!(L&1)||V)&&Ub[(Ne<<8)+Ke];Za!==Le&&(void 0!==Za&&(H.fillStyle=c(Za),H.fillRect($a,la,Fa-$a,T)),Za=Le,$a=Fa);Oa!==Me&&(void 0!==Oa&&(N.fillStyle=c(Oa),N.fillRect(Pa,0,Fa-Pa,T)),Oa=
Me,Pa=Fa);L&&N.drawImage(D,Ke*ja,Ne*T,ja,T,Fa,Q,ja,T)}N.fillStyle=c(Oa);N.fillRect(Pa,0,S-Pa,T);N.globalCompositeOperation="destination-in";N.drawImage(B,0,Q,S,T,0,0,S,T);N.globalCompositeOperation="source-over";H.fillStyle=c(Za);H.fillRect($a,la,S-$a,T);H.drawImage(B,0,0,S,T,0,la,S,T)}X&&(V&&bb&&E[l]&&(H.fillStyle=c(u[4*(l*A+p)+3]),H.fillRect(p*ja,l*T+Ka,ja,ab-Ka+1)),E.fill(0));X&&f.drawImage(H.canvas,0,0)}};this.Da=function(){pa&&(cancelAnimationFrame(pa),pa=0)};this.pause=function(){va=!0;m.classList.remove("blinking-cursor")};
this.continue=function(){va=!1;m.classList.add("blinking-cursor")};this.g=function(D){z=D?1:a.Ul?2:0;0===z?(k.style.display="block",h.style.display="none"):(k.style.display="none",h.style.display="block",2===z&&E&&E.fill(1))};this.C=function(D,B,J,L,S,Q){const X=J?16:B?9:8;if(T!==D||ja!==X||pb!==B||ob!==J||y!==L||Q)Q=ja!==X||T!==D,T=D,ja=X,pb=B,ob=J,y=L,2===z&&(d(S),E.fill(1),Q&&this.X())};this.D=function(D,B){if(I!==D||U!==B)I=D,U=B,E.fill(1)};this.O=function(){f.fillStyle="#000";f.fillRect(0,0,
h.width,h.height)};this.X=function(){if(P){var D=ja*A,B=T*v,J=2*T;H&&H.canvas.width===D&&H.canvas.height===B&&N.canvas.height===J||(H?(H.canvas.width=D,H.canvas.height=B,N.canvas.width=D,N.canvas.height=J):(H=(new OffscreenCanvas(D,B)).getContext("2d",{alpha:!1}),N=(new OffscreenCanvas(D,J)).getContext("2d")),this.h(D,B),E.fill(1))}};this.i=function(D,B){if(D!==A||B!==v)if(E=new Int8Array(B),u=new Int32Array(D*B*4),A=D,v=B,0===z){for(;k.childNodes.length>B;)k.removeChild(k.firstChild);for(;k.childNodes.length<
B;)k.appendChild(document.createElement("div"));for(D=0;D<B;D++)this.Z(D);e(k,q,r,!0)}else 2===z&&this.X()};this.h=function(D,B){h.style.display="block";h.width=D;h.height=B;f.imageSmoothingEnabled=!1;C=640>=D&&2*D<window.innerWidth*window.devicePixelRatio&&2*B<window.innerHeight*window.devicePixelRatio?2:1;e(h,q*C,r*C,!1)};this.mf=function(D,B){q=D;r=B;e(k,q,r,!0);e(h,q*C,r*C,!1)};this.K=function(D,B,J){if(D!==Ka||B!==ab||J!==bb)0===z?J?(m.style.display="inline",m.style.height=B-D+"px",m.style.marginTop=
D+"px"):m.style.display="none":2===z&&l<v&&(E[l]=1),Ka=D,ab=B,bb=J};this.G=function(D,B){if(D!==l||B!==p)D<v&&(E[D]=1),l<v&&(E[l]=1),l=D,p=B};this.Z=function(D){var B=4*D*A,J;var L=k.childNodes[D];var S=document.createElement("div");for(var Q=0;Q<A;){var X=document.createElement("span");var oa=u[B+1]&1;var la=u[B+2];var ba=u[B+3];oa&&X.classList.add("blink");X.style.backgroundColor=c(la);X.style.color=c(ba);for(J="";Q<A&&(u[B+1]&1)===oa&&u[B+2]===la&&u[B+3]===ba;)if(J+=ua[u[B]],Q++,B+=4,D===l)if(Q===
p)break;else if(Q===p+1){m.style.backgroundColor=X.style.color;S.appendChild(m);break}X.textContent=J;S.appendChild(X)}L.parentNode.replaceChild(S,L)};this.l=function(D){for(const B of D)f.putImageData(B.Mc,B.th-B.gg,B.uh-B.hg,B.gg,B.hg,B.Vg,B.Ug)};this.qc()};function Oc(){var a,b=0,c=0;this.j=function(d,e,g){a[d*b+e]=g};this.Da=function(){};this.pause=function(){};this.continue=function(){};this.g=function(){};this.C=function(){};this.D=function(){};this.O=function(){};this.i=function(d,e){if(d!==b||e!==c)a=new Uint8Array(d*e),b=d,c=e};this.h=function(){};this.mf=function(){};this.K=function(){};this.G=function(){};this.l=function(){};this.i(80,25)};function Pc(a,b){function c(f){h.s&&h.enabled&&(h.h(f.which),f.preventDefault())}function d(f){var k=f.which;8===k?(h.h(127),f.preventDefault()):9===k&&(h.h(9),f.preventDefault())}function e(f){if(h.enabled){for(var k=f.clipboardData.getData("text/plain"),m=0;m<k.length;m++)h.h(k.charCodeAt(m));f.preventDefault()}}function g(f){f.target!==a&&a.blur()}var h=this;this.enabled=!0;this.s=b;this.text="";this.j=!1;this.i=0;this.s.register("serial0-output-byte",function(f){this.Pl(String.fromCharCode(f))},
this);this.Da=function(){a.removeEventListener("keypress",c,!1);a.removeEventListener("keydown",d,!1);a.removeEventListener("paste",e,!1);window.removeEventListener("mousedown",g,!1)};this.qc=function(){this.Da();a.style.display="block";a.addEventListener("keypress",c,!1);a.addEventListener("keydown",d,!1);a.addEventListener("paste",e,!1);window.addEventListener("mousedown",g,!1)};this.qc();this.Pl=function(f){"\b"===f?(this.text=this.text.slice(0,-1),this.update()):"\r"!==f&&(this.text+=f,"\n"===
f&&(this.j=!0),this.update())};this.update=function(){var f=Date.now(),k=f-this.i;16>k?void 0===this.g&&(this.g=setTimeout(()=>{this.g=void 0;this.i=Date.now();this.l()},16-k)):(void 0!==this.g&&(clearTimeout(this.g),this.g=void 0),this.i=f,this.l())};this.l=function(){a.value=this.text;this.j&&(this.j=!1,a.scrollTop=1E9)};this.h=function(f){h.s&&h.s.send("serial0-input",f)}}
function Qc(a,b){this.element=a;if(window.Terminal){var c=this.g=new window.Terminal({logLevel:"off",convertEol:"true"});c.write("This is the serial console. Whatever you type or paste here will be sent to COM1");var d=new TextEncoder,e=c.onData(function(g){for(const h of d.encode(g))b.send("serial0-input",h)});b.register("serial0-output-byte",function(g){c.write(Uint8Array.of(g))},this);this.Da=function(){e.dispose();c.dispose()}}}Qc.prototype.show=function(){this.g&&this.g.open(this.element)};function Rc(a,b){b=b.id||0;this.s=a;this.h=`net${b}-send`;this.o=`net${b}-receive`;this.g=new BroadcastChannel(`v86-inbrowser-${b}`);this.j=!0;this.l=c=>{this.g.postMessage(c)};this.s.register(this.h,this.l,this);this.i=c=>{this.s.send(this.o,c.data)};this.g.addEventListener("message",this.i)}Rc.prototype.Da=function(){this.j&&(this.s.unregister(this.h,this.l),this.g.removeEventListener("message",this.i),this.g.close(),this.j=!1)};function Sc(){this.h=new Map}Sc.prototype.read=async function(a,b,c){return(a=this.h.get(a))?a.subarray(b,b+c):null};Sc.prototype.cache=async function(a,b){this.h.set(a,b)};Sc.prototype.g=function(a){this.h.delete(a)};function Tc(a,b,c){b.endsWith("/")||(b+="/");this.h=a;this.fg=b;this.i=c}function Uc(a,b,c){return new Promise(d=>{Aa(a.fg+b,{done:async e=>{e=new Uint8Array(e);b.endsWith(".zst")&&(e=new Uint8Array(a.i(c,e)));await a.cache(b,e);d(e)}})})}
Tc.prototype.read=async function(a,b,c,d){const e=await this.h.read(a,b,c,d);return e?e:(await Uc(this,a,d)).subarray(b,b+c)};Tc.prototype.cache=async function(a,b){return await this.h.cache(a,b)};Tc.prototype.g=function(a){this.h.g(a)};const Vc=new TextDecoder,Wc=new TextEncoder;
function G(a,b,c,d){for(var e,g=0,h=0;h<a.length;h++)switch(e=b[h],a[h]){case "w":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;g+=4;break;case "d":c[d++]=e&255;c[d++]=e>>8&255;c[d++]=e>>16&255;c[d++]=e>>24&255;c[d++]=0;c[d++]=0;c[d++]=0;c[d++]=0;g+=8;break;case "h":c[d++]=e&255;c[d++]=e>>8;g+=2;break;case "b":c[d++]=e;g+=1;break;case "s":var f=d,k=0;c[d++]=0;c[d++]=0;g+=2;e=Wc.encode(e);g+=e.byteLength;k+=e.byteLength;c.set(e,d);d+=e.byteLength;c[f+0]=k&255;c[f+1]=k>>8&255;break;
case "Q":G(["b","w","d"],[e.type,e.version,e.path],c,d),d+=13,g+=13}return g}
function K(a,b,c){let d=c.offset;for(var e=[],g=0;g<a.length;g++)switch(a[g]){case "w":var h=b[d++];h+=b[d++]<<8;h+=b[d++]<<16;h+=b[d++]<<24>>>0;e.push(h);break;case "d":h=b[d++];h+=b[d++]<<8;h+=b[d++]<<16;h+=b[d++]<<24>>>0;d+=4;e.push(h);break;case "h":h=b[d++];e.push(h+(b[d++]<<8));break;case "b":e.push(b[d++]);break;case "s":h=b[d++];h+=b[d++]<<8;var f=b.slice(d,d+h);d+=h;e.push(Vc.decode(f));break;case "Q":c.offset=d,h=K(["b","w","d"],b,c),d=c.offset,e.push({type:h[0],version:h[1],path:h[2]})}c.offset=
d;return e};const Xc=new TextEncoder;function Yc(a){this.g=[];this.j=a;this.v={dh:0};this.h={};this.l=274877906944;this.o=0;this.i=[];Zc(this,"",-1)}Yc.prototype.ha=function(){let a=[];a[0]=this.g;a[1]=this.v.dh;a[2]=[];for(const [b,c]of Object.entries(this.h))0===(this.g[b].mode&16384)&&a[2].push([b,c]);a[3]=this.l;a[4]=this.o;return a=a.concat(this.i)};
Yc.prototype.I=function(a){this.g=a[0].map(b=>{const c=new $c(0);c.I(b);return c});this.v.dh=a[1];this.h={};for(let [b,c]of a[2])c.buffer.byteLength!==c.byteLength&&(c=c.slice()),this.h[b]=c;this.l=a[3];this.o=a[4];this.i=a.slice(5)};
function ad(a,b,c){var d=bd(a);const e=b[0];d.size=b[1];d.qd=b[2];d.df=d.qd;d.qe=d.qd;d.mode=b[3];d.uid=b[4];d.kb=b[5];var g=d.mode&61440;if(16384===g)for(cd(a,d,c,e),c=a.g.length-1,b=b[6],d=0;d<b.length;d++)ad(a,b[d],c);else 32768===g?(d.status=2,d.Se=b[6],cd(a,d,c,e)):40960===g&&(d.Yf=b[6],cd(a,d,c,e))}function dd(a,b,c,d){const e=a.g[c],g=a.g[b];ed(a,b);g.Ea.has(d);g.Ea.set(d,c);e.Fb++;ed(a,c)&&(e.Ea.has(".."),e.Ea.has(".")||e.Fb++,e.Ea.set(".",c),e.Ea.set("..",b),g.Fb++)}
function fd(a,b,c){const d=gd(a,b,c),e=a.g[d],g=a.g[b];ed(a,b);g.Ea.delete(c)&&(e.Fb--,ed(a,d)&&(e.Ea.get(".."),e.Ea.delete(".."),g.Fb--))}function cd(a,b,c,d){-1!==c?(a.g.push(b),b.dd=a.g.length-1,dd(a,c,b.dd,d)):0===a.g.length&&(a.g.push(b),b.Ea.set(".",0),b.Ea.set("..",0),b.Fb=2)}
function $c(a){this.Ea=new Map;this.xg=this.wg=this.qd=this.qe=this.df=this.dd=this.kb=this.uid=this.size=this.status=0;this.Yf="";this.mode=493;this.bb={type:0,version:0,path:a};this.Fb=0;this.Se="";this.h=[];this.g=this.i=-1}
$c.prototype.ha=function(){const a=[];a[0]=this.mode;a[1]=16384===(this.mode&61440)?[...this.Ea]:32768===(this.mode&61440)?this.Se:40960===(this.mode&61440)?this.Yf:49152===(this.mode&61440)?[this.xg,this.wg]:null;a[2]=this.h;a[3]=this.status;a[4]=this.size;a[5]=this.uid;a[6]=this.kb;a[7]=this.dd;a[8]=this.df;a[9]=this.qe;a[10]=this.qd;a[11]=this.bb.version;a[12]=this.bb.path;a[13]=this.Fb;return a};
$c.prototype.I=function(a){this.mode=a[0];if(16384===(this.mode&61440)){this.Ea=new Map;for(const [b,c]of a[1])this.Ea.set(b,c)}else 32768===(this.mode&61440)?this.Se=a[1]:40960===(this.mode&61440)?this.Yf=a[1]:49152===(this.mode&61440)&&([this.xg,this.wg]=a[1]);this.h=[];for(const b of a[2]){const c=new hd;c.I(b);this.h.push(c)}this.status=a[3];this.size=a[4];this.uid=a[5];this.kb=a[6];this.dd=a[7];this.df=a[8];this.qe=a[9];this.qd=a[10];this.bb.type=(this.mode&61440)>>8;this.bb.version=a[11];this.bb.path=
a[12];this.Fb=a[13]};function id(a,b){Object.assign(b,a,{dd:b.dd,Ea:b.Ea,Fb:b.Fb})}function bd(a){const b=Math.round(Date.now()/1E3);a=new $c(++a.v.dh);a.qe=a.df=a.qd=b;return a}function Zc(a,b,c){var d=a.g[c];if(0<=c&&5===d.status)return c=d.g,b=Zc(M(a,d),b,c),jd(a,d.i,b);d=bd(a);d.mode=16895;0<=c&&(d.uid=a.g[c].uid,d.kb=a.g[c].kb,d.mode=a.g[c].mode&511|16384);d.bb.type=64;cd(a,d,c,b);return a.g.length-1}
function kd(a,b,c){var d=a.g[c];if(5===d.status)return c=d.g,b=kd(M(a,d),b,c),jd(a,d.i,b);d=bd(a);d.uid=a.g[c].uid;d.kb=a.g[c].kb;d.bb.type=128;d.mode=a.g[c].mode&438|32768;cd(a,d,c,b);return a.g.length-1}function ld(a,b,c,d,e){var g=a.g[c];if(5===g.status)return c=g.g,b=ld(M(a,g),b,c,d,e),jd(a,g.i,b);g=bd(a);g.wg=d;g.xg=e;g.uid=a.g[c].uid;g.kb=a.g[c].kb;g.bb.type=192;g.mode=a.g[c].mode&438;cd(a,g,c,b);return a.g.length-1}
function md(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,b=md(M(a,e),b,c,d),jd(a,e.i,b);e=bd(a);e.uid=a.g[c].uid;e.kb=a.g[c].kb;e.bb.type=160;e.Yf=d;e.mode=40960;cd(a,e,c,b);return a.g.length-1}async function nd(a,b,c,d){var e=a.g[c];if(5===e.status)return c=e.g,d=await nd(M(a,e),b,c,d),jd(a,e.i,d);e=kd(a,b,c);b=a.g[e];c=new Uint8Array(d.length);c.set(d);await od(a,e,c);b.size=d.length;return e}
async function pd(a,b,c){var d=a.g[b];if(5===d.status)return await pd(M(a,d),d.g,c);16384===(d.mode&61440)&&qd(a,b)}async function rd(a,b){var c=a.g[b];if(5===c.status)return await rd(M(a,c),c.g);2===c.status&&a.j.g(c.Se);4===c.status&&(c.status=-1,await sd(a,b))}
async function td(a,b,c,d,e){if(b===d&&c===e)return 0;var g=gd(a,b,c);if(-1===g)return-2;var h=b;ed(a,h);for(var f="";0!==h;)f="/"+ud(a,h)+f,h=vd(a,h);if(-1!==gd(a,d,e)&&(h=wd(a,d,e),0>h))return h;f=a.g[g];var k=a.g[b];h=a.g[d];if(5===k.status||5===h.status)if(5===k.status&&k.i===h.i){if(a=await td(M(a,k),k.g,c,h.g,e),0>a)return a}else{if(0===xd(a,g).dd||!ed(a,g)&&1<xd(a,g).Fb)return-1;k=gd(a,b,c);var m=a.g[k],l=new $c(-1);ed(a,k);Object.assign(l,m);const p=a.g.length;a.g.push(l);l.dd=p;5===m.status&&
a.i[m.i].g.set(m.g,p);if(5!==m.status||0===m.g)fd(a,b,c),dd(a,b,p,c);if(ed(a,k)&&5!==m.status)for(const [q,r]of l.Ea)"."!==q&&".."!==q&&ed(a,r)&&a.g[r].Ea.set("..",p);a.h[p]=a.h[k];delete a.h[k];m.Ea=new Map;m.Fb=0;k=p;m=xd(a,g);l=await yd(a,k,0,m.size);5===h.status?(d=M(a,h),e=ed(a,k)?Zc(d,e,h.g):kd(d,e,h.g),d=xd(d,e),id(m,d),zd(a,g,h.i,e)):(f.status=-1,a.i[f.i].g.delete(f.g),id(m,f),dd(a,d,g,e));await Ad(a,g,m.size);l&&l.length&&await Bd(a,g,0,l.length,l);if(ed(a,g))for(const q of Cd(a,k))if(e=
await td(a,k,q,g,q),0>e)return e;await sd(a,k);a=wd(a,b,c);if(0>a)return a}else fd(a,b,c),dd(a,d,g,e),f.bb.version++;return 0}async function Bd(a,b,c,d,e){var g=a.g[b];if(5===g.status)b=g.g,await Bd(M(a,g),b,c,d,e);else{var h=await a.Cb(b);!h||h.length<c+d?(await Ad(a,b,Math.floor(3*(c+d)/2)),g.size=c+d,h=await a.Cb(b)):g.size<c+d&&(g.size=c+d);e&&h.set(e.subarray(0,d),c);await od(a,b,h)}}
async function yd(a,b,c,d){const e=a.g[b];return 5===e.status?(b=e.g,await yd(M(a,e),b,c,d)):await Dd(a,b,c,d)}function gd(a,b,c){b=a.g[b];if(5===b.status){const d=b.g;c=gd(M(a,b),d,c);return-1===c?-1:Ed(a,b.i,c)}a=b.Ea.get(c);return void 0===a?-1:a}function Fd(a){let b=a.g.length;for(const {h:c,g:d}of a.i)b+=Fd(c),b-=d.size;return b}function Gd(a){let b=1048576;for(const {h:c}of a.i)b+=Gd(c);return b}function Hd(a){let b=a.o;for(const {h:c}of a.i)b+=Hd(c);return b}
function Id(a){let b=a.l;for(const {h:c}of a.i)b+=Id(c);return a.l}function ud(a,b){const c=a.g[vd(a,b)];if(5===c.status)return ud(M(a,c),a.g[b].g);if(!c)return"";for(const [d,e]of c.Ea)if(e===b)return d;return""}function Jd(a,b,c,d){if(ed(a,c))return-1;const e=a.g[b],g=a.g[c];if(5===e.status)return 5!==g.status||g.i!==e.i?-1:Jd(M(a,e),e.g,g.g,d);if(5===g.status)return-1;dd(a,b,c,d);return 0}
function wd(a,b,c){if("."===c||".."===c)return-1;var d=gd(a,b,c);const e=a.g[d];var g=a.g[b];if(5===g.status)return b=g.g,wd(M(a,g),b,c);if(g=ed(a,d)){a:if(d=a.g[d],5===d.status)var h=ed(M(a,d),d.g);else{for(h of d.Ea.keys())if("."!==h&&".."!==h){h=!1;break a}h=!0}g=!h}if(g)return-39;fd(a,b,c);0===e.Fb&&(e.status=4);return 0}async function sd(a,b){const c=a.g[b];5===c.status?await sd(M(a,c),c.g):(c.size=0,delete a.h[b])}
Yc.prototype.Cb=async function(a){const b=this.g[a];return this.h[a]?this.h[a]:2===b.status?await this.j.read(b.Se,0,b.size,b.size):null};async function Dd(a,b,c,d){const e=a.g[b];return a.h[b]?a.h[b].subarray(c,c+d):2===e.status?await a.j.read(e.Se,c,d,e.size):null}async function od(a,b,c){a.h[b]=c;2===a.g[b].status&&(a.g[b].status=0,a.j.g(a.g[b].Se))}function xd(a,b){b=a.g[b];return 5===b.status?xd(M(a,b),b.g):b}
async function Ad(a,b,c){var d=xd(a,b),e=await Dd(a,b,0,d.size);if(c!==d.size){var g=new Uint8Array(c);d.size=c;e&&g.set(e.subarray(0,Math.min(e.length,d.size)),0);await od(a,b,g)}}
function Kd(a,b){b=b.replace("//","/");b=b.split("/");0<b.length&&0===b[b.length-1].length&&b.pop();0<b.length&&0===b[0].length&&b.shift();const c=b.length;var d=-1,e=0;let g=null;for(var h=0;h<c;h++)if(d=e,e=gd(a,d,b[h]),!g&&5===a.g[d].status&&(g="/"+b.slice(h).join("/")),-1===e)return h<c-1?{id:-1,kh:-1,name:b[h],Xh:g}:{id:-1,kh:d,name:b[h],Xh:g};return{id:e,kh:d,name:b[h],Xh:g}}
function qd(a,b){var c=a.g[b];if(5===c.status)qd(M(a,c),c.g);else{var d=0;for(const e of c.Ea.keys())d+=24+Xc.encode(e).length;b=a.h[b]=new Uint8Array(d);c.size=d;d=0;for(const [e,g]of c.Ea)c=xd(a,g),d+=G(["Q","d","b","s"],[c.bb,d+13+8+1+2+Xc.encode(e).length,c.mode>>12,e],b,d)}}function ed(a,b){b=a.g[b];return 5===b.status?ed(M(a,b),b.g):16384===(b.mode&61440)}
function Cd(a,b){ed(a,b);b=a.g[b];if(5===b.status)return Cd(M(a,b),b.g);a=[];for(const c of b.Ea.keys())"."!==c&&".."!==c&&a.push(c);return a}function vd(a,b){ed(a,b);b=a.g[b];if(5!==b.status||0===b.g)return b.Ea.get("..");const c=vd(M(a,b),b.g);return Ed(a,b.i,c)}function zd(a,b,c,d){const e=a.g[b];5===e.status&&a.i[e.i].g.delete(e.g);e.status=5;e.i=c;e.g=d;a.i[c].g.set(d,b)}function jd(a,b,c){const d=bd(a),e=a.g.length;a.g.push(d);d.dd=e;zd(a,e,b,c);return e}
function Ed(a,b,c){const d=a.i[b].g.get(c);return void 0===d?jd(a,b,c):d}function M(a,b){return a.i[b.i].h}function hd(){this.type=2;this.start=0;this.length=Infinity;this.h=-1;this.g=""}hd.prototype.ha=function(){const a=[];a[0]=this.type;a[1]=this.start;a[2]=Infinity===this.length?0:this.length;a[3]=this.h;a[4]=this.g;return a};hd.prototype.I=function(a){this.type=a[0];this.start=a[1];this.length=0===a[2]?Infinity:a[2];this.h=a[3];this.g=a[4]};
function Ld(a){const b=new hd;b.I(a.ha());return b}function Md(a,b){return b.h===a.h&&b.g===a.g&&b.type===a.type}function Nd(a,b){return Md(a,b)&&b.start+b.length===a.start}function Od(a,b,c,d,e){const g=new hd;g.type=a;g.start=b;g.length=c;g.h=d;g.g=e;return g}
function Pd(a,b,c){b=a.g[b];if(5===b.status){var d=b.g;return Pd(M(a,b),d,c)}for(d of b.h)if(!(c.h===d.h&&c.g===d.g||2===c.type||2===d.type||1!==c.type&&1!==d.type||c.start+c.length<=d.start||d.start+d.length<=c.start))return Ld(d);return null}
function Qd(a,b,c,d){const e=a.g[b];if(5===e.status)return b=e.g,Qd(M(a,e),b,c,d);c=Ld(c);if(2!==c.type&&Pd(a,b,c))return 1;for(a=0;a<e.h.length;a++){d=e.h[a];if(d.start+d.length<=c.start)continue;if(c.start+c.length<=d.start)break;if(d.h!==c.h||d.g!==c.g)continue;b=c.start+c.length;const g=c.start-d.start,h=d.start+d.length-b;if(0<g&&0<h&&d.type===c.type)return 0;0<g&&(d.length=g);if(0>=g&&0<h)d.start=b,d.length=h;else if(0<h){for(;a<e.h.length&&e.h[a].start<b;)a++;e.h.splice(a,0,Od(d.type,b,h,d.h,
d.g))}else 0>=g&&(e.h.splice(a,1),a--)}if(2!==c.type){a=c;d=!1;for(b=0;b<e.h.length&&!(Nd(a,e.h[b])&&(e.h[b].length+=c.length,a=e.h[b],d=!0),c.start<=e.h[b].start);b++);d||(e.h.splice(b,0,a),b++);for(;b<e.h.length;b++)if(Md(e.h[b],a)){Nd(e.h[b],a)&&(a.length+=e.h[b].length,e.h.splice(b,1));break}}return 0}function Rd(a,b){b=Kd(a,b);if(-1!==b.id)return a=xd(a,b.id),Array.from(a.Ea.keys()).filter(c=>"."!==c&&".."!==c)}
Yc.prototype.Vf=function(a){a=Kd(this,a);if(-1===a.id)return Promise.resolve(null);const b=xd(this,a.id);return yd(this,a.id,0,b.size)};function Sd(a){this.kg=!1;this.C=function(){};var b=fb();this.s=b[0];this.ye=b[1];var c,d;const e=new WebAssembly.Table({element:"anyfunc",initial:1924});b={cpu_exception_hook:()=>this.C(),run_hardware_timers:function(h,f){var k=c;const m=k.A.Dg.Zd(f,!1),l=k.A.Qe.Zd(f,!1);let p=100,q=100;h&&(p=k.A.Ca.Zd(f),q=k.de(f));return Math.min(m,l,p,q)},cpu_event_halt:()=>{this.ye.send("cpu-event-halt")},abort:function(){},microtick:Sb,get_rand_int:function(){return ha()},stop_idling:function(){return c.Xe()},
io_port_read8:function(h){var f=c.B.ports[h];return f.Me.call(f.Jd,h)},io_port_read16:function(h){var f=c.B.ports[h];return f.sb.call(f.Jd,h)},io_port_read32:function(h){return db(c.B,h)},io_port_write8:function(h,f){h=c.B.ports[h];h.Qg.call(h.Jd,f)},io_port_write16:function(h,f){h=c.B.ports[h];h.cg.call(h.Jd,f)},io_port_write32:function(h,f){h=c.B.ports[h];h.Ua.call(h.Jd,f)},mmap_read8:function(h){return c.g[h>>>17](h)},mmap_read16:function(h){var f=c.g[h>>>17];return f(h)|f(h+1|0)<<8},mmap_read32:function(h){return c.Ba[h>>>
17](h)},mmap_write8:function(h,f){c.j[h>>>17](h,f)},mmap_write16:function(h,f){var k=c.j[h>>>17];k(h,f&255);k(h+1|0,f>>8)},mmap_write32:function(h,f){c.i[h>>>17](h,f)},mmap_write64:function(h,f,k){var m=c.i[h>>>17];m(h,f);m(h+4,k)},mmap_write128:function(h,f,k,m,l){var p=c.i[h>>>17];p(h,f);p(h+4,k);p(h+8,m);p(h+12,l)},log_from_wasm:function(h,f){Ca(d,h,f)},console_log_from_wasm:function(h,f){h=Ca(d,h,f);console.error(h)},dbg_trace_from_wasm:function(){},codegen_finalize:(h,f,k,m,l)=>{Td(c,h,f,k,m,
l)},jit_clear_func:h=>{c.Ya.Dh.set(h+1024,null)},jit_clear_all_funcs:()=>{const h=c.Ya.Dh;for(let f=0;900>f;f++)h.set(1024+f,null)},__indirect_function_table:e};let g=a.zm;g||(g=h=>new Promise(f=>{let k="v86.wasm",m="v86-fallback.wasm";a.$i?(k=a.$i,m=k.replace("v86.wasm","v86-fallback.wasm")):"undefined"===typeof window&&"string"===typeof __dirname?(k=__dirname+"/"+k,m=__dirname+"/"+m):(k="build/"+k,m="build/"+m);Aa(k,{done:async l=>{try{const {instance:p}=await WebAssembly.instantiate(l,h);this.v=
l;f(p.exports)}catch(p){Aa(m,{done:async q=>{const {instance:r}=await WebAssembly.instantiate(q,h);this.v=q;f(r.exports)}})}},progress:l=>{this.ye.send("download-progress",{If:0,Hf:1,pg:k,lengthComputable:l.lengthComputable,total:l.total,loaded:l.loaded})}})}));g({env:b}).then(h=>{d=h.memory;h.rust_init();h=this.Ha=new Ud(this.ye,{exports:h,Dh:e});c=h.u;Vd(this,h,a)});this.h=null;this.D=0}
async function Vd(a,b,c){function d(q,r){switch(q){case "hda":g.L=this.Bb.L=r;break;case "hdb":g.Db=this.Bb.Db=r;break;case "cdrom":g.P=this.Bb.P=r;break;case "fda":g.R=this.Bb.R=r;break;case "fdb":g.vb=this.Bb.vb=r;break;case "multiboot":g.$b=this.Bb.$b=r.buffer;break;case "bzimage":g.Kb=this.Bb.Kb=r.buffer;break;case "initrd":g.Wb=this.Bb.Wb=r.buffer;break;case "bios":g.zb=r.buffer;break;case "vga_bios":g.ae=r.buffer;break;case "initial_state":g.Nc=r.buffer;break;case "fs9p_json":g.Yh=r}}async function e(){if(g.Jc&&
g.Yh&&!g.Nc){var q=g.Jc,r=g.Yh;if(3!==r.version)throw"The filesystem JSON format has changed. Please recreate the filesystem JSON.";var C=r.fsroot;q.o=r.size;for(r=0;r<C.length;r++)ad(q,C[r],0);if(c.xf){const {sj:E,hk:z}=Wd(g.Jc),[u,A]=await Promise.all([g.Jc.Vf(z),g.Jc.Vf(E)]);d.call(this,"initrd",new Ga(u.buffer));d.call(this,"bzimage",new Ga(A.buffer))}}this.tc&&this.tc.show&&this.tc.show();this.Ha.qc(g);g.Nc&&(b.Fg(g.Nc),g.Nc=void 0);c.pj&&this.Ha.Wf();this.ye.send("emulator-loaded")}a.s.register("emulator-stopped",
function(){this.kg=!1;this.ob.pause()},a);a.s.register("emulator-started",function(){this.kg=!0;this.ob.continue()},a);var g={};a.Bb={R:void 0,vb:void 0,L:void 0,Db:void 0,P:void 0};var h=c.Sb?c.Sb:c.R?801:c.L?786:291;g.Ca=c.Ca;g.Bf=c.Bf;g.jk=!0;g.F=c.F||67108864;g.va=c.va||8388608;g.Sb=h;g.Uh=c.Uh||!1;g.R=void 0;g.vb=void 0;g.pf=c.pf;g.qf=c.qf;g.rf=c.rf;g.Tb=c.Tb;g.Ke=c.Ke;g.Yb=c.Yb;g.Id=c.Id;g.sf=c.sf;g.be=c.be;if(h=c.sm||c.Qc&&c.Qc.Tc)"fetch"===h?a.i=new Bc(a.s,c.Qc):"inbrowser"===h?a.i=new Rc(a.s,
c.Qc):h.startsWith("wisp://")||h.startsWith("wisps://")?a.i=new Gc(h,a.s,c.Qc):a.i=new fc(h,a.s);g.Qc=c.Qc||{type:"ne2k"};h=c.screen||{};c.Ll&&(h.ig=c.Ll);c.km||(a.o=new Lc(a.s));c.lm||(a.j=new Mc(a.s,h.ig));h.ig?a.ob=new Nc(h,()=>a.Ha.u.A.$d&&a.Ha.u.A.$d.sh()):a.ob=new Oc;g.screen=a.ob;g.wm=h;c.Nl?a.tc=new Qc(c.Nl,a.s):c.Ml&&(a.tc=new Pc(c.Ml,a.s));c.Cj||(a.g=new Zb(a.s));var f=[];h=(q,r)=>{if(r)if(r.get&&r.set&&r.load)f.push({name:q,Nf:r});else{if("bios"===q||"vga_bios"===q||"initial_state"===q||
"multiboot"===q||"bzimage"===q||"initrd"===q)r.async=!1;if("fda"===q||"fdb"===q)r.async=!1;r.url&&!r.async?f.push({name:q,url:r.url,size:r.size}):f.push({name:q,Nf:Na(r,a.Rg.bind(a))})}};c.state&&console.warn("Warning: Unknown option 'state'. Did you mean 'initial_state'?");h("bios",c.zb);h("vga_bios",c.ae);h("cdrom",c.P);h("hda",c.L);h("hdb",c.Db);h("fda",c.R);h("fdb",c.vb);h("initial_state",c.Nc);h("multiboot",c.$b);h("bzimage",c.Kb);h("initrd",c.Wb);if(c.filesystem&&c.filesystem.rg)g.rg=c.filesystem.rg;
else if(c.filesystem&&c.filesystem.yl)g.Li=c.filesystem.yl;else if(c.filesystem){h=c.filesystem.qj;var k=c.filesystem.fg;let q=new Sc;k&&(q=new Tc(q,k,a.Hh.bind(a)));g.Jc=a.Jc=new Yc(q);if(h){if("object"===typeof h){var m=h.size;h=h.url}f.push({name:"fs9p_json",url:h,size:m,bf:!0})}}var l=f.length,p=function(q){if(q===l)setTimeout(e.bind(this),0);else{var r=f[q];r.Nf?(r.Nf.onload=function(){d.call(this,r.name,r.Nf);p(q+1)}.bind(this),r.Nf.load()):Aa(r.url,{done:function(C){r.url.endsWith(".zst")&&
"initial_state"!==r.name&&(C=this.Hh(r.size,new Uint8Array(C)));d.call(this,r.name,r.bf?C:new Ga(C));p(q+1)}.bind(this),progress:function(C){200===C.target.status?a.ye.send("download-progress",{If:q,Hf:l,pg:r.url,lengthComputable:C.lengthComputable,total:C.total||r.size,loaded:C.loaded}):a.ye.send("download-error",{If:q,Hf:l,pg:r.url,request:C.target})},bf:r.bf})}}.bind(a);p(0)}n=Sd.prototype;
n.Hh=function(a,b){const c=this.Ha.u;this.l=c.bj(b.length);(new Uint8Array(c.Ia.buffer)).set(b,c.dj(this.l));b=c.tf(this.l,a);const d=c.Ia.buffer.slice(b,b+a);c.uf(b,a);c.cj(this.l);this.l=null;return d};
n.Rg=async function(a,b){if(!this.h){const c=URL.createObjectURL(new Blob(["("+function(){let d;globalThis.onmessage=function(e){if(d){var g=e.data.src,h=e.data.Bj;e=e.data.id;var f=d.exports,k=f.zstd_create_ctx(g.length);(new Uint8Array(f.memory.buffer)).set(g,f.zstd_get_src_ptr(k));g=f.zstd_read(k,h);var m=f.memory.buffer.slice(g,g+h);f.zstd_read_free(g,h);f.zstd_free_ctx(k);postMessage({result:m,id:e},[m])}else h=Object.fromEntries("cpu_exception_hook run_hardware_timers cpu_event_halt microtick get_rand_int stop_idling io_port_read8 io_port_read16 io_port_read32 io_port_write8 io_port_write16 io_port_write32 mmap_read8 mmap_read16 mmap_read32 mmap_write8 mmap_write16 mmap_write32 mmap_write64 mmap_write128 codegen_finalize jit_clear_func jit_clear_all_funcs".split(" ").map(l=>
[l,()=>console.error("zstd worker unexpectedly called "+l)])),h.__indirect_function_table=new WebAssembly.Table({element:"anyfunc",initial:1024}),h.abort=()=>{throw Error("zstd worker aborted");},h.log_from_wasm=h.console_log_from_wasm=(l,p)=>{console.log(Ca(d.exports.memory.buffer,l,p))},h.dbg_trace_from_wasm=()=>console.trace(),d=new WebAssembly.Instance(new WebAssembly.Module(e.data),{env:h})}}.toString()+")()"],{type:"text/javascript"}));this.h=new Worker(c);URL.revokeObjectURL(c);this.h.postMessage(this.v,
[this.v])}return new Promise(c=>{const d=this.D++,e=async g=>{g.data.id===d&&(this.h.removeEventListener("message",e),c(g.data.result))};this.h.addEventListener("message",e);this.h.postMessage({src:b,Bj:a,id:d},[b.buffer])})};
function Wd(a){const b=(Rd(a,"/")||[]).map(e=>"/"+e);a=(Rd(a,"/boot/")||[]).map(e=>"/boot/"+e);let c,d;for(const e of[].concat(b,a)){const g=/old/i.test(e)||/fallback/i.test(e),h=/initrd/i.test(e)||/initramfs/i.test(e);!/vmlinuz/i.test(e)&&!/bzimage/i.test(e)||d&&g||(d=e);!h||c&&g||(c=e)}c&&d||(console.log("Failed to find bzimage or initrd in filesystem. Files:"),console.log(b.join(" ")),console.log(a.join(" ")));return{hk:c,sj:d}}n.Wf=async function(){this.Ha.Wf()};
n.stop=async function(){this.kg&&await new Promise(a=>{const b=()=>{this.s.unregister("emulator-stopped",b);a()};Xd(this,"emulator-stopped",b);this.Ha.stop()})};n.Da=async function(){await this.stop();this.Ha.Da();this.o&&this.o.Da();this.i&&this.i.Da();this.j&&this.j.Da();this.ob&&this.ob.Da();this.tc&&this.tc.Da();this.g&&this.g.Da()};n.ph=function(){this.Ha.ph()};function Xd(a,b,c){a.s.register(b,c,a)}n.Fg=async function(a){this.Ha.Fg(a)};n.qh=async function(){return this.Ha.qh()};n.Ld=function(){return this.kg};
async function Yd(a,b){const c=a.Ha.u.A.cd.Na[0];if(b.url&&!b.async)await new Promise(d=>{Aa(b.url,{done:e=>{Zd(c,new Ga(e));d()}})});else{const d=Na(b,a.Rg.bind(a));d.onload=()=>{Zd(c,d)};await d.load()}}async function $d(a,b){const c=a.Ha.u.A.cd.Na[1];if(b.url&&!b.async)await new Promise(d=>{Aa(b.url,{done:e=>{Zd(c,new Ga(e));d()}})});else{const d=Na(b,a.Rg.bind(a));d.onload=()=>{Zd(c,d)};await d.load()}}
n.Hg=async function(a){if(a.url&&!a.async)Aa(a.url,{done:b=>{this.Ha.u.A.P.Hg(new Ga(b))}});else{const b=Na(a,this.Rg.bind(this));b.onload=()=>{this.Ha.u.A.P.Hg(b)};await b.load()}};async function ae(a,b){for(var c=0;c<b.length;c++)a.s.send("keyboard-code",b[c])}async function be(a,b){for(var c=0;c<b.length;c++)a.o.Vi(b[c])}async function ce(){const a=document.body;try{await a.requestPointerLock({unadjustedMovement:!0})}catch(b){await a.requestPointerLock()}}
n.vj=async function(a,b){var c=this.Jc;if(c){var d=a.split("/");d=d[d.length-1];a=Kd(c,a).kh;if(""!==d&&-1!==a)await nd(c,d,a,b);else return Promise.reject(new de)}};n.Vf=async function(a){var b=this.Jc;if(b)return(a=await b.Vf(a))?a:Promise.reject(new de)};function de(){this.message="File not found"}de.prototype=Error.prototype;
"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports.V86=Sd:"undefined"!==typeof window?window.V86=Sd:"function"===typeof importScripts&&(self.V86=Sd);function Ud(a,b){this.l=this.h=!1;this.C=!0;this.i=0;this.g=null;this.u=new ee(a,b,()=>{this.C&&fe(this,0)});this.s=a;this.j()}n=Ud.prototype;n.Wf=function(){this.l=!1;this.h||(this.h=!0,this.s.send("emulator-started"));fe(this,0)};function ge(a){if(a.l||!a.h)a.l=a.h=!1,a.s.send("emulator-stopped");else{a.C=!1;var b=a.u.me();fe(a,b)}}function fe(a,b){const c=++a.i;a.C=!0;a.v(b,c)}n.stop=function(){this.h&&(this.l=!0)};n.Da=function(){this.o()};n.ph=function(){this.u.Oa();he(this.u)};
n.qc=function(a){this.u.qc(a,this.s);this.s.send("emulator-ready")};
if("undefined"!==typeof process)Ud.prototype.v=function(a,b){1>a?global.setImmediate(c=>{c===this.i&&ge(this)},b):setTimeout(c=>{c===this.i&&ge(this)},a,b)},Ud.prototype.j=function(){},Ud.prototype.o=function(){};else if(globalThis.scheduler&&"function"===typeof globalThis.scheduler.postTask&&location.href.includes("use-scheduling-api"))Ud.prototype.v=function(a,b){a=Math.max(0,a);globalThis.scheduler.postTask(()=>{b===this.i&&ge(this)},{delay:a})},Ud.prototype.j=function(){},Ud.prototype.o=function(){};
else if("undefined"!==typeof Worker){function a(){let b;globalThis.onmessage=function(c){const d=c.data.t;b=b&&clearTimeout(b);1>d?postMessage(c.data.Zi):b=setTimeout(()=>postMessage(c.data.Zi),d)}}Ud.prototype.j=function(){const b=URL.createObjectURL(new Blob(["("+a.toString()+")()"],{type:"text/javascript"}));this.g=new Worker(b);this.g.onmessage=c=>{c.data===this.i&&ge(this)};URL.revokeObjectURL(b)};Ud.prototype.v=function(b,c){this.g.postMessage({t:b,Zi:c})};Ud.prototype.o=function(){this.g&&
this.g.terminate();this.g=null}}else Ud.prototype.v=function(a){setTimeout(()=>{ge(this)},a)},Ud.prototype.j=function(){},Ud.prototype.o=function(){};
Ud.prototype.qh=function(){for(var a=[],b=Lb(this.u,a),c=[],d=0,e=0;e<a.length;e++){var g=a[e].byteLength;c[e]={offset:d,length:g};d+=g;d=d+3&-4}e=JSON.stringify({buffer_infos:c,state:b});e=(new TextEncoder).encode(e);b=16+e.length;b=b+3&-4;g=b+d;d=new ArrayBuffer(g);var h=new Int32Array(d,0,4);(new Uint8Array(d,16,e.length)).set(e);b=new Uint8Array(d,b);h[0]=-2039052682;h[1]=6;h[2]=g;h[3]=e.length;for(e=0;e<a.length;e++)b.set(a[e],c[e].offset);return d};
Ud.prototype.Fg=function(a){return Nb(this.u,a)};if("object"===typeof performance&&performance.now)var Sb=performance.now.bind(performance);else if("function"===typeof require){const {performance:a}=require("perf_hooks");Sb=a.now.bind(a)}else"object"===typeof process&&process.hrtime?Sb=function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:Sb=Date.now;function ie(a){this.u=a;var b=a.B;je(a.A.mb,{nb:56,S:[134,128,19,113,7,0,128,2,8,0,128,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,1,0,0],bc:[],name:"acpi"});this.g=this.h=0;this.status=1;this.Sf=this.He=0;this.i=ke(this,Sb());this.Lc=new Uint8Array(4);x(b,45056,this,void 0,function(){return this.He});w(b,45056,this,void 0,function(c){this.He&=~c});x(b,45058,this,void 0,function(){return this.Sf});w(b,45058,this,void 0,function(c){this.Sf=
c});x(b,45060,this,function(){return this.status&255},function(){return this.status});w(b,45060,this,void 0,function(c){this.status=c});x(b,45064,this,void 0,void 0,function(){return ke(this,Sb())&16777215});x(b,45024,this,function(){return this.Lc[0]});x(b,45025,this,function(){return this.Lc[1]});x(b,45026,this,function(){return this.Lc[2]});x(b,45027,this,function(){return this.Lc[3]});w(b,45024,this,function(c){this.Lc[0]=c});w(b,45025,this,function(c){this.Lc[1]=c});w(b,45026,this,function(c){this.Lc[2]=
c});w(b,45027,this,function(c){this.Lc[3]=c})}ie.prototype.Zd=function(a){a=ke(this,a);var b=0!==((a^this.i)&8388608);this.Sf&1&&b?(this.He|=1,this.u.qb(9)):this.u.jb(9);this.i=a;return 100};function ke(a,b){b=Math.round(3579.545*b);b===a.h?3579.545>a.g&&a.g++:a.h+a.g<=b&&(a.g=0,a.h=b);return a.h+a.g}ie.prototype.ha=function(){var a=[];a[0]=this.status;a[1]=this.He;a[2]=this.Sf;a[3]=this.Lc;return a};ie.prototype.I=function(a){this.status=a[0];this.He=a[1];this.Sf=a[2];this.Lc=a[3]};function le(a,b,c){this.s=c;this.u=a;this.h=4;this.Nd=this.Gd=0;this.Be=96;this.hd=this.Gf=0;this.jd=1;this.ya=this.Gg=this.gb=this.Pf=0;this.input=[];switch(b){case 1016:this.g=0;this.ya=4;break;case 760:this.g=1;this.ya=3;break;case 1E3:this.g=2;this.ya=4;break;case 744:this.ya=this.g=3;break;default:this.g=0,this.ya=4}this.s.register("serial"+this.g+"-input",function(d){me(this,d)},this);this.s.register("serial"+this.g+"-modem-status-input",function(d){ne(this,d)},this);this.s.register("serial"+
this.g+"-carrier-detect-input",function(d){ne(this,d?this.gb|136:this.gb&-137)},this);this.s.register("serial"+this.g+"-ring-indicator-input",function(d){ne(this,d?this.gb|68:this.gb&-69)},this);this.s.register("serial"+this.g+"-data-set-ready-input",function(d){ne(this,d?this.gb|34:this.gb&-35)},this);this.s.register("serial"+this.g+"-clear-to-send-input",function(d){ne(this,d?this.gb|17:this.gb&-18)},this);a=a.B;w(a,b,this,function(d){oe(this,d)},function(d){oe(this,d&255);oe(this,d>>8)});w(a,b|
1,this,function(d){this.Nd&128?this.Gd=this.Gd&255|d<<8:(0===(this.hd&2)&&d&2&&pe(this,2),this.hd=d&15,qe(this))});x(a,b,this,function(){if(this.Nd&128)return this.Gd&255;let d=0;0!==this.input.length&&(d=this.input.shift());0===this.input.length&&(this.Be&=-2,re(this,12),re(this,4));return d});x(a,b|1,this,function(){return this.Nd&128?this.Gd>>8:this.hd&15});x(a,b|2,this,function(){var d=this.jd&15;2===this.jd&&re(this,2);this.Gf&1&&(d|=192);return d});w(a,b|2,this,function(d){this.Gf=d});x(a,b|
3,this,function(){return this.Nd});w(a,b|3,this,function(d){this.Nd=d});x(a,b|4,this,function(){return this.Pf});w(a,b|4,this,function(d){this.Pf=d});x(a,b|5,this,function(){return this.Be});w(a,b|5,this,function(){});x(a,b|6,this,function(){return this.gb&=240});w(a,b|6,this,function(d){ne(this,d)});x(a,b|7,this,function(){return this.Gg});w(a,b|7,this,function(d){this.Gg=d})}
le.prototype.ha=function(){var a=[];a[0]=this.h;a[1]=this.Gd;a[2]=this.Nd;a[3]=this.Be;a[4]=this.Gf;a[5]=this.hd;a[6]=this.jd;a[7]=this.Pf;a[8]=this.gb;a[9]=this.Gg;a[10]=this.ya;return a};le.prototype.I=function(a){this.h=a[0];this.Gd=a[1];this.Nd=a[2];this.Be=a[3];this.Gf=a[4];this.hd=a[5];this.jd=a[6];this.Pf=a[7];this.gb=a[8];this.Gg=a[9];this.ya=a[10]};
function qe(a){a.h&4096&&a.hd&1?(a.jd=12,a.u.qb(a.ya)):a.h&16&&a.hd&1?(a.jd=4,a.u.qb(a.ya)):a.h&4&&a.hd&2?(a.jd=2,a.u.qb(a.ya)):a.h&1&&a.hd&8?(a.jd=0,a.u.qb(a.ya)):(a.jd=1,a.u.jb(a.ya))}function pe(a,b){a.h|=1<<b;qe(a)}function re(a,b){a.h&=~(1<<b);qe(a)}function me(a,b){a.input.push(b);a.Be|=1;a.Gf&1?pe(a,12):pe(a,4)}function oe(a,b){a.Nd&128?a.Gd=a.Gd&-256|b:(pe(a,2),a.Pf&16?me(a,b):a.s.send("serial"+a.g+"-output-byte",b))}function ne(a,b){let c=(a.gb^b)>>4;c|=a.gb&15;a.gb=b;a.gb|=c};function se(a){this.rc=new Uint8Array(4);this.g=new Uint8Array(4);this.Fe=new Uint8Array(4);this.Ge=new Uint8Array(4);this.Ee=new Int32Array(this.rc.buffer);new Int32Array(this.g.buffer);this.oi=new Int32Array(this.Fe.buffer);this.ri=new Int32Array(this.Ge.buffer);this.Bc=[];this.A=[];this.u=a;for(var b=0;256>b;b++)this.Bc[b]=void 0,this.A[b]=void 0;this.B=a.B;w(a.B,3324,this,function(c){te(this,this.Ee[0],c)},function(c){ue(this,this.Ee[0],c)},function(c){var d=this.Ee[0],e=d>>8&65535,g=d&255;d=
this.Bc[e];e=this.A[e];if(d)if(16<=g&&40>g)if(e=e.bc[g-16>>2]){g>>=2;var h=d[g]&1;-1===(c|3|e.size-1)?(c=~(e.size-1)|h,0===h&&(d[g]=c)):0===h&&(d[g]=e.ni);1===h&&(ve(this,e,d[g]&65534,c&65534),d[g]=c|1)}else d[g>>2]=0;else 48===g?d[g>>2]=e.pi?-1===(c|2047)?-e.pi|0:e.qk|0:0:4!==g&&(d[g>>>2]=c)});w(a.B,3325,this,function(c){te(this,this.Ee[0]+1|0,c)});w(a.B,3326,this,function(c){te(this,this.Ee[0]+2|0,c)},function(c){ue(this,this.Ee[0]+2|0,c)});w(a.B,3327,this,function(c){te(this,this.Ee[0]+3|0,c)});
a.B.Oe(3324,this,function(){return this.Fe[0]},function(){return this.Fe[1]},function(){return this.Fe[2]},function(){return this.Fe[3]});a.B.Oe(3320,this,function(){return this.Ge[0]},function(){return this.Ge[1]},function(){return this.Ge[2]},function(){return this.Ge[3]});a.B.xd(3320,this,function(c){this.rc[0]=c&252},function(c){2===(this.rc[1]&6)&&6===(c&6)?we(a):this.rc[1]=c},function(c){this.rc[2]=c},function(c){this.rc[3]=c;c=this.rc[0]&252;var d=this.Bc[this.rc[2]<<8|this.rc[1]];void 0!==
d?(this.ri[0]=-2147483648,this.oi[0]=c<d.byteLength?d[c>>2]:0):(this.oi[0]=-1,this.ri[0]=0)});je(this,{nb:0,S:[134,128,55,18,0,0,0,0,2,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0],bc:[],name:"82441FX PMC"});this.i={nb:8,S:[134,128,0,112,7,0,0,2,0,0,1,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],bc:[],name:"82371SB PIIX3 ISA"};
this.j=je(this,this.i);this.h=new Uint8Array(this.j.buffer)}se.prototype.ha=function(){for(var a=[],b=0;256>b;b++)a[b]=this.Bc[b];a[256]=this.rc;a[257]=this.g;a[258]=this.Fe;a[259]=this.Ge;return a};se.prototype.I=function(a){for(var b=0;256>b;b++){var c=this.A[b],d=a[b];if(c&&d){for(var e=0;e<c.bc.length;e++){var g=d[4+e];if(g&1){var h=c.bc[e];ve(this,h,h.ni&65534,g&65534)}}this.Bc[b].set(d)}}this.rc.set(a[256]);this.g.set(a[257]);this.Fe.set(a[258]);this.Ge.set(a[259])};
function te(a,b,c){var d=b&255;(new Uint8Array(a.Bc[b>>8&65535].buffer))[d]=c}function ue(a,b,c){var d=b&255;a=new Uint16Array(a.Bc[b>>8&65535].buffer);!a||16<=d&&44>d||(a[d>>>1]=c)}function je(a,b){var c=b.nb,d=new Int32Array(64);d.set(new Int32Array((new Uint8Array(b.S)).buffer));a.Bc[c]=d;a.A[c]=b;c=d.slice(4,10);for(var e=0;e<b.bc.length;e++){var g=b.bc[e];if(g){var h=c[e],f=h&1;g.ni=h;g.entries=[];if(0!==f)for(h&=-2,f=0;f<g.size;f++)g.entries[f]=a.B.ports[h+f]}}return d}
function ve(a,b,c,d){for(var e=b.size,g=a.B.ports,h=0;h<e;h++){4096<=c+h&&(g[c+h]=Ya(a.B));var f=b.entries[h];4096<=d+h&&(g[d+h]=f)}}se.prototype.$a=function(a){this.u.qb(this.h[96+((this.Bc[a][15]>>8&255)-1+((a>>3)-1&255)&3)])};function xe(a,b){a.u.jb(a.h[96+((a.Bc[b][15]>>8&255)+(b>>3&255)-2&3)])};function ye(a,b,c){a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5]);a[6]===b[0]&&a[7]===b[1]&&a[8]===b[2]&&a[9]===b[3]&&a[10]===b[4]&&a[11]===b[5]&&(a[6]=c[0],a[7]=c[1],a[8]=c[2],a[9]=c[3],a[10]=c[4],a[11]=c[5]);var d=a[12]<<8|a[13];if(2048===d){if(a=a.subarray(14),4===a[0]>>4&&17===a[9]&&(a=a.subarray(20),d=a[2]<<8|a[3],67===(a[0]<<8|a[1])||67===d)){const e=a.subarray(8);if(1669485411===(e[236]<<24|e[237]<<
16|e[238]<<8|e[239]))for(e[28]===b[0]&&e[29]===b[1]&&e[30]===b[2]&&e[31]===b[3]&&e[32]===b[4]&&e[33]===b[5]&&(e[28]=c[0],e[29]=c[1],e[30]=c[2],e[31]=c[3],e[32]=c[4],e[33]=c[5],a[6]=a[7]=0),d=240;d<e.length;){const g=e[d++];if(255===g)break;const h=e[d++];61===g&&1===e[d+0]&&e[d+1]===b[0]&&e[d+2]===b[1]&&e[d+3]===b[2]&&e[d+4]===b[3]&&e[d+5]===b[4]&&e[d+6]===b[5]&&(e[d+1]=c[0],e[d+2]=c[1],e[d+3]=c[2],e[d+4]=c[3],e[d+5]=c[4],e[d+6]=c[5],a[6]=a[7]=0);d+=h}}}else 2054===d&&(a=a.subarray(14),a[8]===b[0]&&
a[9]===b[1]&&a[10]===b[2]&&a[11]===b[3]&&a[12]===b[4]&&a[13]===b[5]&&(a[8]=c[0],a[9]=c[1],a[10]=c[2],a[11]=c[3],a[12]=c[4],a[13]=c[5]))}function ze(a){return[a[0].toString(16).padStart(2,"0"),a[1].toString(16).padStart(2,"0"),a[2].toString(16).padStart(2,"0"),a[3].toString(16).padStart(2,"0"),a[4].toString(16).padStart(2,"0"),a[5].toString(16).padStart(2,"0")].join(":")}
function Ae(a,b,c,d){this.u=a;this.mb=a.A.mb;this.id=0;this.Ke=c;this.Yb=d;this.s=b;this.s.register("net"+this.id+"-receive",function(e){this.Ra(e)},this);this.port=768+256*this.id;this.name="ne2k";this.S=[236,16,41,128,3,1,0,0,0,0,0,2,0,0,0,0,this.port&255|1,this.port>>8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,184,254,0,0,0,0,0,0,0,0,0,1,0,0];this.nb=(0===this.id?5:7+this.id)<<3;this.bc=[{size:32}];this.tg=this.Md=0;this.Ab=1;this.Lg=this.Te=this.sc=this.zf=0;this.memory=
new Uint8Array(32768);this.Ah=this.lf=0;this.zh=1;this.ra=new Uint8Array([0,34,21,255*Math.random()|0,255*Math.random()|0,255*Math.random()|0]);this.s.send("net"+this.id+"-mac",ze(this.ra));this.Od=Uint8Array.of(255,255,255,255,255,255,255,255);this.Of=null;for(b=0;6>b;b++)this.memory[b<<1]=this.memory[b<<1|1]=this.ra[b];this.memory[28]=this.memory[29]=87;this.memory[30]=this.memory[31]=87;this.Ta=0;this.Sc=64;this.Gb=128;this.Hd=this.yc=76;b=a.B;x(b,this.port|0,this,function(){return this.Ab},function(){return this.Ab});
w(b,this.port|0,this,function(e){this.Ab=e;this.Ab&1||(e&24&&0===this.sc&&Be(this,64),e&4&&(e=this.Lg<<8,e=this.memory.subarray(e,e+this.Te),this.Of&&(e=new Uint8Array(e),ye(e,this.Of,this.ra)),this.s.send("net"+this.id+"-send",e),this.s.send("eth-transmit-end",[e.length]),this.Ab&=-5,Be(this,2)))});x(b,this.port|13,this,function(){return 1===O(this)?this.Od[5]:0});x(b,this.port|14,this,function(){return 1===O(this)?this.Od[6]:0},function(){return 0});x(b,this.port|15,this,function(){return 1===O(this)?
this.Od[7]:0});x(b,this.port|31,this,function(){Be(this,128);return 0});w(b,this.port|31,this,function(){});x(b,this.port|1,this,function(){var e=O(this);return 0===e?this.Sc:1===e?this.ra[0]:2===e?this.Sc:0});w(b,this.port|1,this,function(e){var g=O(this);0===g?this.Sc=e:1===g&&(this.ra[0]=e)});x(b,this.port|2,this,function(){var e=O(this);return 0===e?this.Gb:1===e?this.ra[1]:2===e?this.Gb:0});w(b,this.port|2,this,function(e){var g=O(this);0===g?(e>this.memory.length>>8&&(e=this.memory.length>>
8),this.Gb=e):1===g&&(this.ra[1]=e)});x(b,this.port|7,this,function(){var e=O(this);return 0===e?this.Md:1===e?this.yc:0});w(b,this.port|7,this,function(e){var g=O(this);0===g?(this.Md&=~e,Ce(this)):1===g&&(this.yc=e)});w(b,this.port|13,this,function(e){0===O(this)&&(this.Ah=e)});w(b,this.port|14,this,function(e){0===O(this)&&(this.zf=e)});x(b,this.port|10,this,function(){var e=O(this);return 0===e?80:1===e?this.Od[2]:0});w(b,this.port|10,this,function(e){0===O(this)&&(this.sc=this.sc&65280|e&255)});
x(b,this.port|11,this,function(){var e=O(this);return 0===e?67:1===e?this.Od[3]:0});w(b,this.port|11,this,function(e){0===O(this)&&(this.sc=this.sc&255|e<<8&65280)});x(b,this.port|8,this,function(){var e=O(this);return 0===e?this.Ta&255:1===e?this.Od[0]:0});w(b,this.port|8,this,function(e){0===O(this)&&(this.Ta=this.Ta&65280|e&255)});x(b,this.port|9,this,function(){var e=O(this);return 0===e?this.Ta>>8&255:1===e?this.Od[1]:0});w(b,this.port|9,this,function(e){0===O(this)&&(this.Ta=this.Ta&255|e<<
8&65280)});w(b,this.port|15,this,function(e){0===O(this)&&(this.tg=e,Ce(this))});x(b,this.port|3,this,function(){var e=O(this);return 0===e?this.Hd:1===e?this.ra[2]:0});w(b,this.port|3,this,function(e){var g=O(this);0===g?this.Hd=e:1===g&&(this.ra[2]=e)});x(b,this.port|4,this,function(){var e=O(this);return 0===e?this.zh:1===e?this.ra[3]:0});w(b,this.port|4,this,function(e){var g=O(this);0===g?this.Lg=e:1===g&&(this.ra[3]=e)});x(b,this.port|5,this,function(){var e=O(this);return 0===e?0:1===e?this.ra[4]:
0});w(b,this.port|5,this,function(e){var g=O(this);0===g?this.Te=this.Te&-256|e:1===g&&(this.ra[4]=e)});x(b,this.port|6,this,function(){var e=O(this);return 0===e?0:1===e?this.ra[5]:0});w(b,this.port|6,this,function(e){var g=O(this);0===g?this.Te=this.Te&255|e<<8:1===g&&(this.ra[5]=e)});x(b,this.port|12,this,function(){var e=O(this);return 0===e?9:1===e?this.Od[4]:0});w(b,this.port|12,this,function(e){0===O(this)&&(this.lf=e)});x(b,this.port|16,this,this.yj,this.Nh,this.xj);w(b,this.port|16,this,
this.Oh,this.Oh,this.zj);je(a.A.mb,this)}n=Ae.prototype;n.ha=function(){var a=[];a[0]=this.Md;a[1]=this.tg;a[2]=this.Ab;a[3]=this.zf;a[4]=this.sc;a[5]=this.Te;a[6]=this.Lg;a[7]=this.Ta;a[8]=this.Sc;a[9]=this.yc;a[10]=this.Hd;a[11]=this.Gb;a[12]=this.lf;a[13]=this.Ah;a[14]=this.zh;a[15]=this.ra;a[16]=this.memory;return a};
n.I=function(a){this.Md=a[0];this.tg=a[1];this.Ab=a[2];this.zf=a[3];this.sc=a[4];this.Te=a[5];this.Lg=a[6];this.Ta=a[7];this.Sc=a[8];this.yc=a[9];this.Hd=a[10];this.Gb=a[11];this.lf=a[12];this.Ah=a[13];this.zh=a[14];this.Ke?(this.ra=a[15],this.memory=a[16]):this.Yb&&(this.Of=a[15],this.memory=a[16]);this.s.send("net"+this.id+"-mac",ze(this.ra))};function Be(a,b){a.Md|=b;Ce(a)}function Ce(a){a.tg&a.Md?a.mb.$a(a.nb):xe(a.mb,a.nb)}
function De(a,b){if(16>=a.Ta||16384<=a.Ta&&32768>a.Ta)a.memory[a.Ta]=b;a.Ta++;a.sc--;a.Ta>=a.Gb<<8&&(a.Ta+=a.Sc-a.Gb<<8);0===a.sc&&Be(a,64)}n.Oh=function(a){De(this,a);this.zf&1&&De(this,a>>8)};n.zj=function(a){De(this,a);De(this,a>>8);De(this,a>>16);De(this,a>>24)};function Ee(a){let b=0;32768>a.Ta&&(b=a.memory[a.Ta]);a.Ta++;a.sc--;a.Ta>=a.Gb<<8&&(a.Ta+=a.Sc-a.Gb<<8);0===a.sc&&Be(a,64);return b}n.yj=function(){return this.Nh()&255};n.Nh=function(){return this.zf&1?Ee(this)|Ee(this)<<8:Ee(this)};
n.xj=function(){return Ee(this)|Ee(this)<<8|Ee(this)<<16|Ee(this)<<24};
n.Ra=function(a){if(!(this.Ab&1)&&(this.s.send("eth-receive-end",[a.length]),this.lf&16||this.lf&4&&255===a[0]&&255===a[1]&&255===a[2]&&255===a[3]&&255===a[4]&&255===a[5]||!(this.lf&8&&1===(a[0]&1)||a[0]!==this.ra[0]||a[1]!==this.ra[1]||a[2]!==this.ra[2]||a[3]!==this.ra[3]||a[4]!==this.ra[4]||a[5]!==this.ra[5]))){this.Of&&(a=new Uint8Array(a),ye(a,this.ra,this.Of));var b=this.yc<<8,c=Math.max(60,a.length)+4,d=b+4,e=this.yc+1+(c>>8);if(!((this.Hd>this.yc?this.Hd-this.yc:this.Gb-this.yc+this.Hd-this.Sc)<
1+(c>>8)&&0!==this.Hd)){if(b+c>this.Gb<<8){var g=(this.Gb<<8)-d;this.memory.set(a.subarray(0,g),d);this.memory.set(a.subarray(g),this.Sc<<8)}else this.memory.set(a,d),60>a.length&&this.memory.fill(0,d+a.length,d+60);e>=this.Gb&&(e+=this.Sc-this.Gb);this.memory[b]=1;this.memory[b+1]=e;this.memory[b+2]=c;this.memory[b+3]=c>>8;this.yc=e;Be(this,1)}}};function O(a){return a.Ab>>6&3};function Fe(a,b){this.s=b;this.rows=25;this.cols=80;this.ports=4;b=[{Xa:16,hb:0},{Xa:16,hb:1},{Xa:16,hb:2},{Xa:16,hb:3}];for(let c=1;c<this.ports;++c)b.push({Xa:16,hb:0}),b.push({Xa:8,hb:1});this.N=new Ge(a,{name:"virtio-console",nb:96,ve:4163,Xf:3,te:{ab:47104,T:b,features:[0,1,32],ih:()=>{}},notification:{ab:47360,Jg:!1,sg:[()=>{},c=>{const d=this.N.T[c],e=3<c?c-3>>1:0;for(;He(d);){const g=Ie(d),h=new Uint8Array(g.Eb);Je(g,h);this.s.send("virtio-console"+e+"-output-bytes",h);Oe(this,c,g)}},()=>
{},c=>{if(3===c)for(var d=this.N.T[c];He(d);){var e=Ie(d),g=new Uint8Array(e.Eb);Je(e,g);var h=K(["w","h","h"],g,{offset:0});g=h[0];h=h[1];Oe(this,c,e);switch(h){case 0:for(g=0;g<this.ports;++g)Pe(this,g,1,0);break;case 3:Oe(this,c,e);Pe(this,g,4,1);h=g;var f="virtio-"+g;e=Ie(this.N.T[2]);f=(new TextEncoder).encode(f);const k=new Uint8Array(f.length+9);G(["w","h","h"],[h,7,1],k,0);for(h=0;h<f.length;++h)k[h+8]=f[h];k[8+f.length]=0;this.Fd(2,e,k);Pe(this,g,6,1);break;case 6:Oe(this,c,e);0===g&&Qe(this,
g);break;default:return}}}]},Xb:{ab:46848},Af:{ab:46592,Vc:[{bytes:2,name:"cols",read:()=>this.cols,write:()=>{}},{bytes:2,name:"rows",read:()=>this.rows,write:()=>{}},{bytes:4,name:"max_nr_ports",read:()=>this.ports,write:()=>{}},{bytes:4,name:"emerg_wr",read:()=>0,write:()=>{}}]}});for(let c=0;c<this.ports;++c){const d=0===c?0:2*c+2;this.s.register("virtio-console"+c+"-input-bytes",function(e){var g=this.N.T[d];He(g)&&(g=Ie(g),this.Fd(d,g,new Uint8Array(e)))},this);this.s.register("virtio-console"+
c+"-resize",function(e){0===c&&(this.cols=e[0],this.rows=e[1]);Re(this.N.T[2])&&He(this.N.T[2])&&Qe(this,c,e[0],e[1])},this)}}function Qe(a,b,c,d){d=d||a.rows;c=c||a.cols;const e=Ie(a.N.T[2]),g=new Uint8Array(12);G(["w","h","h","h","h"],[b,5,0,d,c],g,0);a.Fd(2,e,g)}Fe.prototype.ha=function(){const a=[];a[0]=this.N;a[1]=this.rows;a[2]=this.cols;a[3]=this.ports;return a};Fe.prototype.I=function(a){this.N.I(a[0]);this.rows=a[1];this.cols=a[2];this.ports=a[3]};Fe.prototype.reset=function(){this.N.reset()};
function Pe(a,b,c,d){const e=Ie(a.N.T[2]),g=new Uint8Array(8);G(["w","h","h"],[b,c,d],g,0);a.Fd(2,e,g)}Fe.prototype.Fd=function(a,b,c){Se(b,c);Te(this.N.T[a],b);Ue(this.N.T[a])};function Oe(a,b,c){Se(c,new Uint8Array(0));Te(a.N.T[b],c);Ue(a.N.T[b])};function Ve(a,b){this.u=a;this.s=b;this.reset();this.s.register("keyboard-code",function(c){this.Df&&(this.Ga.push(c),this.$a())},this);this.s.register("mouse-click",function(c){this.Jf&&this.Ue&&(this.De=c[0]|c[2]<<1|c[1]<<2,this.Kd&&We(this,0,0))},this);this.s.register("mouse-delta",function(c){var d=c[1];this.Jf&&this.Ue&&(this.Oc+=1*c[0],this.Pc+=1*d,this.Kd&&(c=this.Oc|0,d=this.Pc|0,c||d))&&(this.Oc-=c,this.Pc-=d,We(this,c,d))},this);this.s.register("mouse-wheel",function(c){this.Wc-=c[0];this.Wc-=
2*c[1];this.Wc=Math.min(7,Math.max(-8,this.Wc));We(this,0,0)},this);x(a.B,96,this,this.ul);x(a.B,100,this,this.wl);w(a.B,96,this,this.vl);w(a.B,100,this,this.xl)}n=Ve.prototype;n.reset=function(){this.Ue=this.Kd=!1;this.Jf=!0;this.De=this.Pc=this.Oc=0;this.Ba=!0;this.$=this.Z=this.K=this.X=this.aa=this.O=this.Df=!1;this.Ga=new ra(1024);this.o=0;this.l=100;this.j=this.i=0;this.D=!1;this.Wc=0;this.pa=4;this.C=!1;this.g=new ra(1024);this.G=this.v=!1;this.h=5;this.sa=0;this.fa=this.da=this.ia=!1};
n.ha=function(){var a=[];a[0]=this.Kd;a[1]=this.Ue;a[2]=this.Jf;a[3]=this.Oc;a[4]=this.Pc;a[5]=this.De;a[6]=this.Ba;a[7]=this.Df;a[8]=this.O;a[9]=this.aa;a[10]=this.X;a[11]=this.K;a[12]=this.Z;a[13]=this.$;a[15]=this.o;a[16]=this.l;a[17]=this.pa;a[18]=this.C;a[20]=this.h;a[21]=this.ia;a[22]=this.da;a[23]=this.sa;a[24]=this.fa;a[25]=this.j;a[26]=this.i;a[27]=this.D;return a};
n.I=function(a){this.Kd=a[0];this.Ue=a[1];this.Jf=a[2];this.Oc=a[3];this.Pc=a[4];this.De=a[5];this.Ba=a[6];this.Df=a[7];this.O=a[8];this.aa=a[9];this.X=a[10];this.K=a[11];this.Z=a[12];this.$=a[13];this.o=a[15];this.l=a[16];this.pa=a[17];this.C=a[18];this.h=a[20];this.ia=a[21];this.da=a[22];this.sa=a[23];this.fa=a[24];this.j=a[25]||0;this.i=a[26]||0;this.D=a[27]||!1;this.G=this.v=!1;this.Ga.clear();this.g.clear();this.s.send("mouse-enable",this.Ue)};
n.$a=function(){this.v||(this.Ga.length?Xe(this):this.g.length&&Ye(this))};function Ye(a){a.v=!0;a.G=!0;a.h&2&&(a.u.jb(12),a.u.qb(12))}function Xe(a){a.v=!0;a.G=!1;a.h&1&&(a.u.jb(1),a.u.qb(1))}function We(a,b,c){a.g.push((0>c)<<5|(0>b)<<4|8|a.De);a.g.push(b);a.g.push(c);4===a.j?(a.g.push(0|a.Wc&15),a.Wc=0):3===a.j&&(a.g.push(a.Wc&255),a.Wc=0);a.$a()}
n.ul=function(){this.v=!1;if(!this.Ga.length&&!this.g.length)return this.o;this.G?(this.u.jb(12),this.o=this.g.shift()):(this.u.jb(1),this.o=this.Ga.shift());(this.Ga.length||this.g.length)&&this.$a();return this.o};n.wl=function(){var a=16;this.v&&(a|=1);this.G&&(a|=32);return a};
n.vl=function(a){if(this.da)this.h=a,this.da=!1;else if(this.ia)this.ia=!1,this.g.clear(),this.g.push(a),Ye(this);else if(this.aa){this.aa=!1;this.g.clear();this.g.push(250);this.l=a;switch(this.i){case -1:60===a?(this.D=!0,this.i=0):(this.D=!1,this.i=200===a?1:0);break;case 0:200===a&&(this.i=1);break;case 1:this.i=100===a?2:200===a?3:0;break;case 2:80===a&&(this.j=3);this.i=-1;break;case 3:80===a&&(this.j=4),this.i=-1}this.l||(this.l=100);Ye(this)}else if(this.$)this.$=!1,this.g.clear(),this.g.push(250),
this.pa=3<a?4:1<<a,Ye(this);else if(this.X)this.X=!1,this.Ga.push(250),Xe(this);else if(this.K)this.K=!1,this.Ga.push(250),Xe(this),a||this.Ga.push(1);else if(this.Z)this.Z=!1,this.Ga.push(250),Xe(this);else if(this.O){if(this.O=!1,this.Jf){this.Ga.clear();this.g.clear();this.g.push(250);switch(a){case 230:this.C=!1;break;case 231:this.C=!0;break;case 232:this.$=!0;break;case 233:We(this,0,0);break;case 235:We(this,0,0);break;case 242:this.g.push(this.j);this.De=this.Oc=this.Pc=0;this.$a();break;
case 243:this.aa=!0;break;case 244:this.Ue=this.Kd=!0;this.s.send("mouse-enable",!0);this.De=this.Oc=this.Pc=0;break;case 245:this.Kd=!1;break;case 246:this.Kd=!1;this.l=100;this.C=!1;this.pa=4;break;case 255:this.g.push(170),this.g.push(0),this.Ue=!0,this.s.send("mouse-enable",!0),this.Kd=!1,this.l=100,this.C=!1,this.pa=4,this.D||(this.j=0),this.De=this.Oc=this.Pc=0}Ye(this)}}else if(this.fa)this.fa=!1,this.sa=a;else{this.g.clear();this.Ga.clear();this.Ga.push(250);switch(a){case 237:this.X=!0;break;
case 240:this.K=!0;break;case 242:this.Ga.push(171);this.Ga.push(131);break;case 243:this.Z=!0;break;case 244:this.Df=!0;break;case 245:this.Df=!1;break;case 255:this.Ga.clear(),this.Ga.push(250),this.Ga.push(170),this.Ga.push(0)}Xe(this)}};
n.xl=function(a){switch(a){case 32:this.Ga.clear();this.g.clear();this.Ga.push(this.h);Xe(this);break;case 96:this.da=!0;break;case 209:this.fa=!0;break;case 211:this.ia=!0;break;case 212:this.O=!0;break;case 167:this.h|=32;break;case 168:this.h&=-33;break;case 169:this.Ga.clear();this.g.clear();this.Ga.push(0);Xe(this);break;case 170:this.Ga.clear();this.g.clear();this.Ga.push(85);Xe(this);break;case 171:this.Ga.clear();this.g.clear();this.Ga.push(0);Xe(this);break;case 173:this.h|=16;break;case 174:this.h&=
-17;break;case 254:we(this.u)}};const Ze=DataView.prototype,$e={size:1,get:Ze.getUint8,set:Ze.setUint8},af={size:2,get:Ze.getUint16,set:Ze.setUint16},bf={size:4,get:Ze.getUint32,set:Ze.setUint32},df=cf([{hi:bf},{re:$e},{data:$e},{Vl:$e},{tm:$e},{dm:$e},{um:function(a){return{size:a,get:()=>-1}}(7)},{type:af},{rm:af},{Wl:bf},{Sh:bf},{rk:bf},{Ol:bf},{flags:bf},{Mj:af},{si:af},{ti:af},{Si:af},{Ti:af},{xm:af}]);console.assert(52===df.reduce((a,b)=>a+b.size,0));
const ef=cf([{type:bf},{offset:bf},{Ch:bf},{Bg:bf},{Vh:bf},{gh:bf},{flags:bf},{align:bf}]);console.assert(32===ef.reduce((a,b)=>a+b.size,0));const ff=cf([{name:bf},{type:bf},{flags:bf},{em:bf},{offset:bf},{size:bf},{link:bf},{info:bf},{gm:bf},{nm:bf}]);console.assert(40===ff.reduce((a,b)=>a+b.size,0));function cf(a){return a.map(function(b){var c=Object.keys(b);console.assert(1===c.length);c=c[0];b=b[c];console.assert(0<b.size);return{name:c,type:b,size:b.size,get:b.get,set:b.set}})}
function gf(a,b){const c={};let d=0;for(const e of b)b=e.get.call(a,d,!0),console.assert(void 0===c[e.name]),c[e.name]=b,d+=e.size;return[c,d]}function hf(a,b,c){const d=[];let e=0;for(var g=0;g<c;g++){const [h,f]=gf(new DataView(a.buffer,a.byteOffset+e,void 0),b);d.push(h);e+=f}return[d,e]};const jf={[0]:0,[1]:525,[2]:525,[3]:350,[4]:350,[5]:350};
function kf(a,b,c){this.B=a.B;this.u=a;this.Lb=a.A.Lb;a=[{code:6,ea:31,ta:8,name:"READ",ua:this.Xj},{code:5,ea:63,ta:8,name:"WRITE",ua:this.ek},{code:15,ea:255,ta:2,name:"SEEK",ua:this.$j},{code:8,ea:255,ta:0,name:"SENSE INTERRUPT STATUS",ua:this.bk},{code:7,ea:255,ta:1,name:"RECALIBRATE",ua:this.Zj},{code:13,ea:191,ta:5,name:"FORMAT TRACK",ua:this.Tj},{code:2,ea:191,ta:8,name:"READ TRACK",ua:this.rb},{code:78,ea:255,ta:17,name:"RESTORE",ua:this.rb},{code:46,ea:255,ta:0,name:"SAVE",ua:this.rb},{code:12,
ea:31,ta:8,name:"READ DELETED DATA",ua:this.rb},{code:17,ea:31,ta:8,name:"SCAN EQUAL",ua:this.rb},{code:22,ea:31,ta:8,name:"VERIFY",ua:this.rb},{code:25,ea:31,ta:8,name:"SCAN LOW OR EQUAL",ua:this.rb},{code:29,ea:31,ta:8,name:"SCAN HIGH OR EQUAL",ua:this.rb},{code:9,ea:63,ta:8,name:"WRITE DELETED DATA",ua:this.rb},{code:10,ea:191,ta:1,name:"READ ID",ua:this.Yj},{code:3,ea:255,ta:2,name:"SPECIFY",ua:this.ck},{code:4,ea:255,ta:1,name:"SENSE DRIVE STATUS",ua:this.ak},{code:18,ea:255,ta:1,name:"PERPENDICULAR MODE",
ua:this.Wj},{code:19,ea:255,ta:3,name:"CONFIGURE",ua:this.Rj},{code:23,ea:255,ta:2,name:"POWERDOWN MODE",ua:this.rb},{code:51,ea:255,ta:1,name:"OPTION",ua:this.rb},{code:142,ea:255,ta:5,name:"DRIVE SPECIFICATION",ua:this.rb},{code:143,ea:255,ta:2,name:"RELATIVE SEEK OUT",ua:this.rb},{code:205,ea:255,ta:10,name:"FORMAT AND WRITE",ua:this.rb},{code:207,ea:255,ta:2,name:"RELATIVE SEEK IN",ua:this.rb},{code:20,ea:127,ta:0,name:"LOCK",ua:this.Uj},{code:14,ea:255,ta:0,name:"DUMP REGISTERS",ua:this.Sj},
{code:16,ea:255,ta:0,name:"VERSION",ua:this.dk},{code:24,ea:255,ta:0,name:"PART ID",ua:this.Vj},{code:0,ea:0,ta:0,name:"UNKNOWN COMMAND",ua:this.rb}];const d=Array(256);for(let e=a.length-1;0<=e;e--){const g=a[e];if(255===g.ea)d[g.code]=g;else for(let h=0;256>h;h++)(h&g.ea)===g.code&&(d[h]=g)}this.Va=d;this.v=0;this.aa=192;this.j=12;this.Oa=0;this.i=128;this.o=0;this.K=1;this.G=this.D=0;this.fa=new Uint8Array(17);this.C=this.X=0;this.g=new Uint8Array(15);this.Z=this.l=this.pb=this.h=this.$=this.O=
0;this.da=!1;this.sa=this.Ka=0;this.pa=96;this.ia=this.Ba=0;this.Na=[new lf("fda",(void 0)?.R,b),new lf("fdb",(void 0)?.vb,c)];Object.seal(this);this.u.A.Qe.ja[16]=this.Na[0].V<<4|this.Na[1].V;x(this.B,1008,this,this.Dl);x(this.B,1009,this,this.El);x(this.B,1010,this,this.Al);x(this.B,1011,this,this.Fl);x(this.B,1012,this,this.Cl);x(this.B,1013,this,this.Bl);x(this.B,1015,this,this.zl);w(this.B,1010,this,this.$l);w(this.B,1011,this,this.cm);w(this.B,1012,this,this.am);w(this.B,1013,this,this.bm);
w(this.B,1015,this,this.Zl)}n=kf.prototype;n.$a=function(){this.v&128||(this.u.qb(6),this.v|=128);this.Z=0};function mf(a){a.h=0;a.v&128&&(a.u.jb(6),a.v&=-129)}function nf(a,b){a.l=b&1;return a.Na[a.l]}function of(a){a.K=1;a.X=0;a.C=0;a.i&=-81;a.i|=128}function pf(a,b){a.K=3;a.O=0;a.$=b;a.i|=208}function qf(a){mf(a);a.v=0;a.aa=192;a.j=12;a.i=128;a.l=0;a.h|=192;a.O=0;a.$=0;a.Na[0].seek(0,0,1);a.Na[1].seek(0,0,1);of(a);a.$a("controller reset");a.Z=4}n.Dl=function(){return this.v};n.El=function(){return this.aa};
n.Al=function(){return this.j&-4|this.l};n.Fl=function(){return this.Oa};n.Cl=function(){this.o&=-65;this.j|=4;return this.i};n.Bl=function(){this.o&=-65;if(!(this.i&128&&this.i&64)||3!==this.K)return 0;if(this.O<this.$){const a=this.g[this.O++];this.O===this.$&&(this.i&=-129,of(this),mf(this));return a}return 0};n.zl=function(){return this.Na[this.l].hf?128:0};n.$l=function(a){this.aa=this.aa&-36|(a&16?1:0)|(a&32?2:0)|(a&1?32:0);!(this.j&4)&&a&4&&(qf(this),this.o&=-65);this.l=a&1;this.j=a};
n.cm=function(a){this.j&4&&(this.Oa=a&4)};n.am=function(a){this.j&4&&(a&128&&(this.j&=-5,qf(this),this.j|=4),a&64&&qf(this),this.o=a)};n.bm=function(a){this.o&=-65;if(this.j&4&&this.i&128&&!(this.i&64)&&1===this.K){if(0===this.C){const b=this.Va[a];this.D=a;this.C=b.ta;this.G=this.X=0;(6===b.code||5===b.code)&&this.D&128&&(this.G|=1);this.C&&(this.i|=128);this.i|=16}else this.fa[this.X++]=a,this.C--;0===this.C&&(this.K=2,this.Va[this.D].ua.call(this,this.fa.slice(0,this.X)))}};
n.Zl=function(a){this.j&4&&(this.o=this.o&-4|a&3)};n.rb=function(){this.h=128;this.g[0]=this.h;pf(this,1)};n.Xj=function(a){rf(this,a,!1)};n.ek=function(a){rf(this,a,!0)};n.$j=function(a){const b=nf(this,a[0]&1);a=a[1];of(this);b.seek(b.mc,a,b.Zc);this.h|=32;this.$a("SEEK command")};n.bk=function(){const a=this.Na[this.l];let b;if(0<this.Z)b=192|4-this.Z--;else if(this.v&128)b=this.h&-8|this.l;else{this.g[0]=128;pf(this,1);return}this.g[0]=b;this.g[1]=a.nc;pf(this,2);mf(this);this.h=192};
n.Zj=function(a){nf(this,a[0]&1).seek(0,0,1);of(this);this.h|=32;this.$a("RECALIBRATE command")};n.Tj=function(a){let b=0,c=0;nf(this,a[0]&1).Ne&&(b=96,c=2);sf(this,b,c)};n.Yj=function(a){const b=this.Na[this.l];b.mc=a[0]>>2&1;0!==b.Zb&&(b.Zc=b.Zc%b.Zb+1);sf(this,0,0)};n.ck=function(a){const b=a[1];this.Ka=a[0]>>4;this.sa=b>>1;this.j=b&1?this.j&-9:this.j|8;of(this)};n.ak=function(a){a=a[0];const b=nf(this,a&1);b.mc=a>>2&1;this.g[0]=(b.Ne?64:0)|(0===b.nc?16:0)|b.mc<<2|this.l|40;pf(this,1)};
n.Wj=function(a){a=a[0];a&128&&(this.Na[this.l].Cg=a&7);of(this)};n.Rj=function(a){this.pa=a[1];this.Ba=a[2];of(this)};n.Uj=function(){this.D&128?(this.da=!0,this.g[0]=16):(this.da=!1,this.g[0]=0);pf(this,1)};n.Sj=function(){const a=this.Na[this.l];this.g[0]=this.Na[0].nc;this.g[1]=this.Na[1].nc;this.g[2]=0;this.g[3]=0;this.g[4]=this.Ka;this.g[5]=this.sa<<1|(this.j&8?1:0);this.g[6]=a.Zb;this.g[7]=(this.da?128:0)|a.Cg<<2;this.g[8]=this.pa;this.g[9]=this.Ba;pf(this,10)};
n.dk=function(){this.g[0]=144;pf(this,1)};n.Vj=function(){this.g[0]=65;pf(this,1)};
function rf(a,b,c){const d=nf(a,b[0]&1),e=b[1],g=b[2],h=b[3];var f=b[4];const k=b[5];b=128>b[7]?b[7]:128;switch(d.seek(g,e,h)){case 2:sf(a,64,0);a.g[3]=e;a.g[4]=g;a.g[5]=h;return;case 3:sf(a,64,128);a.g[3]=e;a.g[4]=g;a.g[5]=h;return;case 1:a.h|=32}const m=128<<(7<f?7:f);f=((e*d.pd+g)*d.Zb+h-1)*m;if(128!==m&&(b=a.G&1?(2*k-h+1)*m:(k-h+1)*m,0>=b)){sf(a,64,1);a.g[3]=e;a.g[4]=g;a.g[5]=h;return}a.ia=k;c&&d.Ne?(sf(a,96,2),a.g[3]=e,a.g[4]=g,a.g[5]=h):a.j&8&&(a.i&=-129,(c?a.Lb.Cf:a.Lb.Jj).call(a.Lb,d.buffer,
f,b,2,l=>{if(l)sf(a,64,0);else{l=a.Na[a.l];let p=l.nc,q=l.mc,r=l.Zc;r>=l.Zb||r===a.ia?(r=1,a.G&1?0===q&&2===l.pd?q=1:(q=0,p++,a.h|=32):(a.h|=32,p++)):r++;l.seek(q,p,r);sf(a,0,0)}}))}function sf(a,b,c){const d=a.Na[a.l];a.h&=-8;a.h|=a.l;d.mc&&(a.h|=4);a.h|=b;a.i|=192;a.i&=-33;a.g[0]=a.h;a.g[1]=c;a.g[2]=0;a.g[3]=d.nc;a.g[4]=d.mc;a.g[5]=d.Zc;a.g[6]=2;pf(a,7);a.$a(a.Va[a.D].name+" command")}
n.ha=function(){const a=[];a[19]=this.v;a[20]=this.aa;a[21]=this.j;a[22]=this.Oa;a[23]=this.i;a[24]=this.o;a[25]=this.K;a[26]=this.D;a[27]=this.G;a[28]=this.fa;a[29]=this.X;a[30]=this.C;a[31]=this.g;a[32]=this.O;a[33]=this.$;a[34]=this.h;a[35]=this.pb;a[36]=this.l;a[37]=this.Z;a[38]=this.da;a[39]=this.Ka;a[40]=this.sa;a[41]=this.pa;a[42]=this.Ba;a[43]=this.ia;a[44]=this.Na[0].ha();a[45]=this.Na[1].ha();return a};
n.I=function(a){"undefined"!==typeof a[19]&&(this.v=a[19],this.aa=a[20],this.j=a[21],this.Oa=a[22],this.i=a[23],this.o=a[24],this.K=a[25],this.D=a[26],this.G=a[27],this.fa.set(a[28]),this.X=a[29],this.C=a[30],this.g.set(a[31]),this.O=a[32],this.$=a[33],this.h=a[34],this.pb=a[35],this.l=a[36],this.Z=a[37],this.da=a[38],this.Ka=a[39],this.sa=a[40],this.pa=a[41],this.Ba=a[42],this.ia=a[43],this.Na[0].I(a[44]),this.Na[1].I(a[45]))};
const tf=[{V:4,la:18,ma:80,ka:2},{V:4,la:20,ma:80,ka:2},{V:4,la:21,ma:80,ka:2},{V:4,la:21,ma:82,ka:2},{V:4,la:21,ma:83,ka:2},{V:4,la:22,ma:80,ka:2},{V:4,la:23,ma:80,ka:2},{V:4,la:24,ma:80,ka:2},{V:5,la:36,ma:80,ka:2},{V:5,la:39,ma:80,ka:2},{V:5,la:40,ma:80,ka:2},{V:5,la:44,ma:80,ka:2},{V:5,la:48,ma:80,ka:2},{V:4,la:8,ma:80,ka:2},{V:4,la:9,ma:80,ka:2},{V:4,la:10,ma:80,ka:2},{V:4,la:10,ma:82,ka:2},{V:4,la:10,ma:83,ka:2},{V:4,la:13,ma:80,ka:2},{V:4,la:14,ma:80,ka:2},{V:2,la:15,ma:80,ka:2},{V:2,la:18,
ma:80,ka:2},{V:2,la:18,ma:82,ka:2},{V:2,la:18,ma:83,ka:2},{V:2,la:20,ma:80,ka:2},{V:2,la:9,ma:80,ka:2},{V:2,la:11,ma:80,ka:2},{V:2,la:9,ma:40,ka:2},{V:2,la:9,ma:40,ka:1},{V:2,la:10,ma:41,ka:2},{V:2,la:10,ma:42,ka:2},{V:2,la:8,ma:40,ka:2},{V:2,la:8,ma:40,ka:1},{V:4,la:9,ma:80,ka:1},{V:1,la:10,ma:40,ka:1},{V:1,la:10,ma:40,ka:2}];
function lf(a,b,c){this.name=a;this.mc=this.nc=this.Zb=this.pd=this.g=this.V=0;this.Zc=1;this.Cg=0;this.Ne=!1;this.hf=!0;this.buffer=null;Object.seal(this);a=b?.V;void 0!==a&&0<=a&&5>=a&&(this.V=a);Zd(this,c,!!b?.Ne);0===this.V&&void 0===a&&(this.V=4)}function Zd(a,b,c){if(b){b instanceof Uint8Array&&(b=new Ga(b.buffer));var [d,e]=uf(b,a.V);d&&(a.g=e.ma,a.pd=e.ka,a.Zb=e.la,a.Ne=!!c,a.hf=!0,a.buffer=d,0===a.V&&(a.V=e.V))}}function vf(a){a.g=0;a.pd=0;a.Zb=0;a.hf=!0;a.buffer=null}
lf.prototype.Cb=function(){return this.buffer?this.buffer.buffer:null};function uf(a,b){const c=0===b,d=a.byteLength;let e=-1,g=-1,h=-1,f=-1,k=-1;for(let m=0;m<tf.length;m++){const l=tf[m],p=l.la*l.ma*l.ka*512;if(d===p)if(c||l.V===b){e=m;break}else c||jf[l.V]!==jf[b]?h=-1===h?m:h:g=-1===g?m:g;else d<p&&(-1===k||p<k)&&(f=m,k=p)}return-1!==e?[a,tf[e]]:-1!==g?[a,tf[g]]:-1!==h?[a,tf[h]]:-1!==f?(b=new Uint8Array(k),b.set(new Uint8Array(a.buffer)),[new Ga(b.buffer),tf[f]]):[null,null]}
lf.prototype.seek=function(a,b,c){if(b>this.g||0!==a&&1===this.pd)return 2;if(c>this.Zb)return 3;let d=0;(this.nc*this.pd+this.mc)*this.Zb+this.Zc-1!==(b*this.pd+a)*this.Zb+c-1&&(this.nc!==b&&(this.buffer&&(this.hf=!1),d=1),this.mc=a,this.nc=b,this.Zc=c);this.buffer||(d=2);return d};lf.prototype.ha=function(){const a=[];a[0]=this.V;a[1]=this.g;a[2]=this.pd;a[3]=this.Zb;a[4]=this.nc;a[5]=this.mc;a[6]=this.Zc;a[7]=this.Cg;a[8]=this.Ne;a[9]=this.hf;a[10]=this.buffer?this.buffer.ha():null;return a};
lf.prototype.I=function(a){this.V=a[0];this.g=a[1];this.pd=a[2];this.Zb=a[3];this.nc=a[4];this.mc=a[5];this.Zc=a[6];this.Cg=a[7];this.Ne=a[8];this.hf=a[9];a[10]?(this.buffer||(this.buffer=new Ga(new ArrayBuffer(0))),this.buffer.I(a[10])):this.buffer=null};const wf={[70]:{name:"GET CONFIGURATION",flags:0},[74]:{name:"GET EVENT STATUS NOTIFICATION",flags:0},[18]:{name:"INQUIRY",flags:0},[189]:{name:"MECHANISM STATUS",flags:0},[26]:{name:"MODE SENSE (6)",flags:0},[90]:{name:"MODE SENSE (10)",flags:0},[69]:{name:"PAUSE",flags:1},[30]:{name:"PREVENT ALLOW MEDIUM REMOVAL",flags:0},[40]:{name:"READ (10)",flags:1},[168]:{name:"READ (12)",flags:1},[37]:{name:"READ CAPACITY",flags:1},[190]:{name:"READ CD",flags:1},[81]:{name:"READ DISK INFORMATION",flags:1},
[66]:{name:"READ SUBCHANNEL",flags:1},[67]:{name:"READ TOC PMA ATIP",flags:1},[82]:{name:"READ TRACK INFORMATION",flags:1},[3]:{name:"REQUEST SENSE",flags:0},[27]:{name:"START STOP UNIT",flags:0},[0]:{name:"TEST UNIT READY",flags:1}};
function xf(a,b,c){this.u=a;this.s=b;this.Xd=this.cc=void 0;b=c&&c[0][0];const d=c&&c[1][0];if(b||d){b&&(this.cc=new yf(this,0,c[0],496,1014,14));d&&(this.Xd=new yf(this,1,c[1],368,886,15));c=b?this.cc.h:0;const e=b?this.cc.j:0,g=d?this.Xd.h:0,h=d?this.Xd.j:0;this.name="ide";this.nb=240;this.S=[134,128,16,112,5,0,160,2,0,128,1,1,0,0,0,0,c&255|1,c>>8,0,0,e&255|1,e>>8,0,0,g&255|1,g>>8,0,0,h&255|1,h>>8,0,0,1,180,0,0,0,0,0,0,0,0,0,0,67,16,212,130,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.bc=[b?{size:8}:void 0,b?{size:1}:void 0,d?{size:8}:void 0,d?{size:1}:void 0,{size:16}];je(a.A.mb,this)}Object.seal(this)}xf.prototype.ha=function(){const a=[];a[0]=this.cc;a[1]=this.Xd;return a};xf.prototype.I=function(a){this.cc&&this.cc.I(a[0]);this.Xd&&this.Xd.I(a[1])};
function yf(a,b,c,d,e,g){this.O=b;this.u=a.u;this.s=a.s;this.h=d;this.j=e;this.ya=g;this.name="ide"+b;d=c?c[0]:void 0;c=c?c[1]:void 0;this.wb=new zf(this,0,d?.buffer,d?.vg);this.Uc=new zf(this,1,c?.buffer,c?.vg);this.ga=this.wb;this.o=2;this.l=this.g=this.i=0;a=a.u;x(a.B,this.h|0,this,function(){return Af(this.ga,1)},function(){return Af(this.ga,2)},function(){return Af(this.ga,4)});x(a.B,this.h|1,this,function(){return this.ga.Za&255});x(a.B,this.h|2,this,function(){return this.ga.Aa&255});x(a.B,
this.h|3,this,function(){return this.ga.fb&255});x(a.B,this.h|4,this,function(){return this.ga.Qa&255});x(a.B,this.h|5,this,function(){return this.ga.Sa&255});x(a.B,this.h|6,this,function(){return this.ga.ef&255});x(a.B,this.h|7,this,function(){const h=this.Oi();this.u.jb(this.ya);return h});w(a.B,this.h|0,this,function(h){Bf(this.ga,h,1)},function(h){Bf(this.ga,h,2)},function(h){Bf(this.ga,h,4)});w(a.B,this.h|1,this,function(h){this.ga.Ff=(this.ga.Ff<<8|h)&65535});w(a.B,this.h|2,this,function(h){this.ga.Aa=
(this.ga.Aa<<8|h)&65535});w(a.B,this.h|3,this,function(h){this.ga.fb=(this.ga.fb<<8|h)&65535});w(a.B,this.h|4,this,function(h){this.ga.Qa=(this.ga.Qa<<8|h)&65535});w(a.B,this.h|5,this,function(h){this.ga.Sa=(this.ga.Sa<<8|h)&65535});w(a.B,this.h|6,this,function(h){const f=h&16;if(f&&this.ga===this.wb||!f&&this.ga===this.Uc)this.ga=f?this.Uc:this.wb;this.ga.ef=h;this.ga.Lf=h>>6&1;this.ga.head=h&15});w(a.B,this.h|7,this,function(h){this.ga.J&=-34;var f=this.ga;if(f.pa||144===h)switch(f.C=h,f.Za=0,h){case 8:f.i=
0;f.g=0;f.h=0;Cf(f);R(f);break;case 16:f.Qa=0;f.J=80;R(f);break;case 248:var k=f.j-1;f.fb=k&255;f.Qa=k>>8&255;f.Sa=k>>16&255;f.ef=f.ef&240|k>>24&15;f.J=80;R(f);break;case 39:k=f.j-1;f.fb=k&255;f.Qa=k>>8&255;f.Sa=k>>16&255;f.fb|=k>>24<<8&65280;f.J=80;R(f);break;case 32:f.v?(f.Qa=20,f.Sa=235,Df(f)):Ef(f,h);break;case 36:case 41:case 196:f.v?Df(f):Ef(f,h);break;case 48:case 52:case 57:case 197:if(f.v)Df(f);else{var m=52===h||57===h;k=Ff(f,m);m=Gf(f,m);h=48===h||52===h;k*=f.o;m*=f.o;m+k>f.buffer.byteLength?
(f.J=255,R(f)):(f.J=88,Hf(f,k),f.g=h?512:Math.min(k,512*f.Z),f.sa=m)}break;case 144:f.l.wb.J=80;f.l.wb.Za=1;R(f.l.wb);f.l.Uc.pa&&(f.l.Uc.J=80,f.l.Uc.Za=1,R(f.l.Uc));break;case 145:f.J=80;R(f);break;case 160:f.v?(If(f,12),f.g=12,f.Aa=1,f.J=88,R(f)):Df(f);break;case 161:f.v?(Jf(f),f.J=88,R(f)):Df(f);break;case 198:f.Z=f.Aa&255;f.J=80;R(f);break;case 200:case 37:k=37===h;m=Ff(f,k);Gf(f,k)*f.o+m*f.o>f.buffer.byteLength?(f.J=255,R(f)):(f.J=88,f.l.g|=1);break;case 202:case 53:k=53===h;m=Ff(f,k);Gf(f,k)*
f.o+m*f.o>f.buffer.byteLength?(f.J=255,R(f)):(f.J=88,f.l.g|=1);break;case 64:f.J=80;R(f);break;case 218:f.v&&(f.buffer||(f.Za|=2),f.X&&(f.Za|=32,f.X=!1),f.Za|=64);f.J=80;R(f);break;case 224:f.J=80;R(f);break;case 225:f.J=80;R(f);break;case 231:f.J=80;R(f);break;case 234:f.J=80;R(f);break;case 236:f.v?(f.Qa=20,f.Sa=235,Df(f)):(Jf(f),f.J=88,R(f));break;case 239:f.J=80;R(f);break;case 222:f.J=64;R(f);break;case 245:f.J=80;R(f);break;case 249:Df(f);break;case 0:Df(f);break;case 240:Df(f);break;default:Df(f)}this.u.jb(this.ya)});
x(a.B,this.j|0,this,this.Oi);w(a.B,this.j|0,this,this.Yl);b=46080+8*b;x(a.B,b|0,this,this.Fj,void 0,this.Ej);w(a.B,b|0,this,this.Ph,void 0,this.Ij);x(a.B,b|2,this,this.Gj);w(a.B,b|2,this,this.Qh);x(a.B,b|4,this,void 0,void 0,this.Dj);w(a.B,b|4,this,void 0,void 0,this.Hj)}n=yf.prototype;n.Oi=function(){return this.ga.pa?this.ga.J:0};n.Yl=function(a){a&4&&(this.u.jb(this.ya),Cf(this.wb),Cf(this.Uc));this.o=a};n.Dj=function(){return this.i};n.Hj=function(a){this.i=a};n.Gj=function(){return this.g};
n.Qh=function(a){this.g&=~(a&6)};n.Ej=function(){return this.l|this.g<<16};n.Fj=function(){return this.l};n.Ij=function(a){this.Ph(a&255);this.Qh(a>>16&255)};n.Ph=function(a){const b=this.l;this.l=a&9;if((b&1)!==(a&1))if(0===(a&1))this.g&=-2;else switch(this.g|=1,this.ga.C){case 200:case 37:Kf(this.ga);break;case 202:case 53:Lf(this.ga);break;case 160:Mf(this.ga);break;default:this.g&=-2,this.g|=2,Nf(this)}};function Nf(a){0===(a.o&2)&&(a.g|=4,a.u.qb(a.ya))}
n.ha=function(){var a=[];a[0]=this.wb;a[1]=this.Uc;a[2]=this.h;a[3]=this.ya;a[5]=this.j;a[7]=this.name;a[8]=this.o;a[9]=this.i;a[10]=this.g;a[11]=this.ga===this.wb;a[12]=this.l;return a};n.I=function(a){this.wb.I(a[0]);this.Uc.I(a[1]);this.h=a[2];this.ya=a[3];this.j=a[5];this.name=a[7];this.o=a[8];this.i=a[9];this.g=a[10];this.ga=a[11]?this.wb:this.Uc;this.l=a[12]};
function zf(a,b,c,d){this.l=a;this.name=a.name+"."+b;this.s=a.s;this.O=a.O;this.Oa=b;this.u=a.u;this.buffer=null;this.pa=d||!!c;this.o=d?2048:512;this.v=d;this.j=0;this.G=this.v?1:0;this.ef=this.head=this.Sa=this.Qa=this.Ff=this.fb=this.Aa=this.Lf=this.K=this.D=0;this.J=80;this.Z=128;this.i=this.Za=0;this.data=new Uint8Array(65536);this.ia=new Uint16Array(this.data.buffer);this.$=new Int32Array(this.data.buffer);this.g=this.h=0;this.C=-1;this.Va=this.sa=0;this.aa=new Set;this.Ka=new Set;this.Ba=-1;
this.da=this.fa=0;this.X=!1;Of(this,c);Object.seal(this)}function Pf(a){a.v&&a.buffer&&(a.X=!0,a.buffer=null,a.J=89,a.Za=96,R(a))}n=zf.prototype;n.Hg=function(a){this.v&&a&&(Of(this,a),this.X=!0)};
function Of(a,b){if(b){a.buffer=b;a.v&&(a.J=89,a.Za=96);a.j=a.buffer.byteLength/a.o;a.j!==(a.j|0)&&(a.j=Math.ceil(a.j));a.v?(a.G=1,a.D=2048):(a.G=16,a.D=63);a.K=a.j/a.G/a.D;a.K!==(a.K|0)&&(a.K=Math.floor(a.K));if(0===a.Oa){b=a.u.A.Qe;b.ja[57]|=1<<4*a.O;b.ja[18]=b.ja[18]&15|240;const c=0===a.O?27:36;b.ja[c]=a.K&255;b.ja[c+1]=a.K>>8&255;b.ja[c+2]=a.G&255;b.ja[c+3]=255;b.ja[c+4]=255;b.ja[c+5]=200;b.ja[c+6]=a.K&255;b.ja[c+7]=a.K>>8&255;b.ja[c+8]=a.D&255}a.l.u&&R(a)}}
function Cf(a){a.v?(a.J=0,a.Aa=1,a.Za=1,a.fb=1,a.Qa=20,a.Sa=235):(a.J=81,a.Aa=1,a.Za=1,a.fb=1,a.Qa=0,a.Sa=0);for(const b of a.aa)a.Ka.add(b);a.aa.clear()}function R(a){Nf(a.l)}function Df(a){a.Za=4;a.J=65;R(a)}function Qf(a,b,c){If(a,0);a.g=a.h;a.J=65;a.Za=b<<4;a.Aa=a.Aa&-8|3;a.fa=b;a.da=c}n.Cf=function(){this.J=80;var a=this.data.subarray(0,this.h);Rf(this,this.C,this.h/512);R(this);this.buffer.set(this.sa,a,function(){});Sf(this,this.h)};
function Tf(a,b){var c=((168===b[0]?b[6]<<24|b[7]<<16|b[8]<<8|b[9]:b[7]<<8|b[8])>>>0)*a.o;b=(b[2]<<24|b[3]<<16|b[4]<<8|b[5])*a.o;a.h=0;var d=a.Sa<<8&65280|a.Qa&255;a.Qa=a.Sa=0;65535===d&&d--;d>c&&(d=c);a.buffer?b>=a.buffer.byteLength?(a.J=255,R(a)):0===c?(a.J=80,a.i=0):(c=Math.min(c,a.buffer.byteLength-b),a.J=208,Uf(a),a.za(b,c,e=>{Vf(a,e);a.J=88;a.Aa=a.Aa&-8|2;R(a);d&=-4;a.g=d;a.g>a.h&&(a.g=a.h);a.Qa=a.g&255;a.Sa=a.g>>8&255;Wf(a,c)})):(a.J=255,a.Za=65,R(a))}
function Xf(a,b){var c=b[2]<<24|b[3]<<16|b[4]<<8|b[5];b=168===b[0]?b[6]<<24|b[7]<<16|b[8]<<8|b[9]:b[7]<<8|b[8];var d=(b>>>0)*a.o;c*=a.o;c>=a.buffer.byteLength?(a.J=255,R(a)):(a.J=208,Uf(a),a.za(c,d,e=>{Wf(a,d);a.J=88;a.Aa=a.Aa&-8|2;Vf(a,e);Mf(a)}))}
function Mf(a){if(0!==(a.l.g&1)&&0!==(a.J&8)){var b=a.l.i,c=0,d=a.data;do{var e=a.u.h(b),g=a.u.sb(b+4),h=a.u.Me(b+7)&128;g||(g=65536);Wa(a.u,d.subarray(c,Math.min(c+g,a.h)),e);c+=g;b+=8;if(c>=a.h&&!h)break}while(!h);a.J=80;a.l.g&=-2;a.Aa=a.Aa&-8|3;R(a)}}
function Af(a,b){if(a.i<a.g){var c=1===b?a.data[a.i]:2===b?a.ia[a.i>>>1]:a.$[a.i>>>2];a.i+=b;a.i>=a.g&&(160===a.C?a.g===a.h?(a.J=80,a.Aa=a.Aa&-8|3,R(a)):(a.J=88,a.Aa=a.Aa&-8|2,R(a),b=a.Sa<<8&65280|a.Qa&255,a.g+b>a.h?(a.Qa=a.h-a.g&255,a.Sa=a.h-a.g>>8&255,a.g=a.h):a.g+=b):(a.Za=0,a.i>=a.h?a.J=80:(b=41===a.C||196===a.C?Math.min(a.Z,(a.h-a.g)/512):1,Rf(a,a.C,b),a.g+=512*b,a.J=88,R(a))));return c}a.i+=b;return 0}
function Bf(a,b,c){if(!(a.i>=a.g)&&(1===c?a.data[a.i++]=b:2===c?(a.ia[a.i>>>1]=b,a.i+=2):(a.$[a.i>>>2]=b,a.i+=4),a.i===a.g))if(160===a.C)if(b=a.data[0],c=wf[b]?wf[b].flags:0,a.i=0,a.Ba=b,3!==b&&(a.fa=0,a.da=0),!a.buffer&&c&1)Qf(a,2,58),R(a);else{switch(b){case 0:a.buffer?(If(a,0),a.g=a.h,a.J=80):Qf(a,2,58);break;case 3:If(a,a.data[4]);a.g=a.h;a.J=88;a.data[0]=240;a.data[2]=a.fa;a.data[7]=8;a.data[12]=a.da;a.fa=0;a.da=0;break;case 18:b=a.data[4];a.J=88;a.data.set([5,128,1,49,31,0,0,0,83,79,78,89,32,
32,32,32,67,68,45,82,79,77,32,67,68,85,45,49,48,48,48,32,49,46,49,97]);a.g=a.h=Math.min(36,b);break;case 26:If(a,a.data[4]);a.g=a.h;a.J=88;break;case 30:If(a,0);a.g=a.h;a.J=80;break;case 37:b=a.j-1;Vf(a,new Uint8Array([b>>24&255,b>>16&255,b>>8&255,b&255,0,0,a.o>>8&255,a.o&255]));a.g=a.h;a.J=88;break;case 40:case 168:a.Ff&1?Xf(a,a.data):Tf(a,a.data);break;case 66:b=a.data[8];If(a,Math.min(8,b));a.g=a.h;a.J=88;break;case 67:b=a.data[8]|a.data[7]<<8;c=a.data[9]>>6;If(a,b);a.g=a.h;0===c?(b=a.j,a.data.set(new Uint8Array([0,
18,1,1,0,20,1,0,0,0,0,0,0,22,170,0,b>>24,b>>16&255,b>>8&255,b&255]))):1===c&&a.data.set(new Uint8Array([0,10,1,1,0,0,0,0,0,0,0,0]));a.J=88;break;case 70:b=Math.min(a.data[8]|a.data[7]<<8,32);If(a,b);a.g=a.h;a.data[0]=b-4>>24&255;a.data[1]=b-4>>16&255;a.data[2]=b-4>>8&255;a.data[3]=b-4&255;a.data[6]=8;a.data[10]=3;a.J=88;break;case 81:If(a,0);a.g=a.h;a.J=80;break;case 82:Qf(a,5,36);break;case 90:b=a.data[8]|a.data[7]<<8;42===a.data[2]&&If(a,Math.min(30,b));a.g=a.h;a.J=88;break;case 189:If(a,a.data[9]|
a.data[8]<<8);a.g=a.h;a.data[5]=1;a.J=88;break;case 27:b=a.data[4]&3;a.buffer&&2===b&&(a.X=!0,a.buffer=null);a.J=80;If(a,0);a.g=a.h;break;case 69:case 74:Qf(a,5,36);break;case 190:If(a,0);a.g=a.h;a.J=80;break;default:Qf(a,5,36)}a.Aa=a.Aa&-8|2;0===(a.J&128)&&R(a);0===(a.J&128)&&0===a.h&&(a.Aa|=1,a.J&=-9)}else a.i>=a.h?a.Cf():(a.J=88,a.g+=512,R(a))}
function Rf(a,b,c){a.Aa-=c;36===b||41===b||37===b||52===b||57===b||53===b?(b=c+Yf(a),a.fb=b&255|b>>16&65280,a.Qa=b>>8&255,a.Sa=b>>16&255):a.Lf?(b=c+Zf(a),a.fb=b&255,a.Qa=b>>8&255,a.Sa=b>>16&255,a.head=a.head&-16|b&15):(b=c+$f(a),c=b/(a.G*a.D)|0,a.Qa=c&255,a.Sa=c>>8&255,a.head=(b/a.D|0)%a.G&15,a.fb=b%a.D+1&255,$f(a))}
function Ef(a,b){var c=36===b||41===b,d=Ff(a,c);c=Gf(a,c);var e=32===b||36===b,g=d*a.o;c*=a.o;c+g>a.buffer.byteLength?(a.J=255,R(a)):(a.J=192,Uf(a),a.za(c,g,h=>{Vf(a,h);a.J=88;a.g=e?512:Math.min(g,512*a.Z);Rf(a,b,e?1:Math.min(d,a.D));R(a);Wf(a,g)}))}
function Kf(a){var b=37===a.C,c=Ff(a,b);b=Gf(a,b);var d=c*a.o;b*=a.o;Uf(a);a.za(b,d,e=>{var g=a.l.i,h=0;do{var f=a.u.h(g),k=a.u.sb(g+4),m=a.u.Me(g+7)&128;k||(k=65536);Wa(a.u,e.subarray(h,h+k),f);h+=k;g+=8}while(!m);Rf(a,a.C,c);a.J=80;a.l.g&=-2;a.C=-1;Wf(a,d);R(a)})}
function Lf(a){var b=53===a.C,c=Ff(a,b),d=Gf(a,b);b=c*a.o;d*=a.o;var e=a.l.i,g=0;const h=new Uint8Array(b);do{var f=a.u.h(e),k=a.u.sb(e+4),m=a.u.Me(e+7)&128;k||(k=65536);h.set(a.u.xb.subarray(f,f+k),g);g+=k;e+=8}while(!m);a.buffer.set(d,h,()=>{Rf(a,a.C,c);a.J=80;R(a);a.l.g&=-2;a.C=-1});Sf(a,b)}function $f(a){return((a.Qa&255|a.Sa<<8&65280)*a.G+a.head)*a.D+(a.fb&255)-1}function Zf(a){return a.fb&255|a.Qa<<8&65280|a.Sa<<16&16711680|(a.head&15)<<24}
function Yf(a){return(a.fb&255|a.Qa<<8&65280|a.Sa<<16&16711680|a.fb>>8<<24&4278190080)>>>0}function Gf(a,b){return b?Yf(a):a.Lf?Zf(a):$f(a)}function Ff(a,b){b?(a=a.Aa,0===a&&(a=65536)):(a=a.Aa&255,0===a&&(a=256));return a}
function Jf(a){const b=Math.min(16383,a.K),c=(f,k,m,l)=>{k<<=1;var p=m<<1;m=k+p;f.fill(32,k,p);for(p=0;p<l.length&&k<m;p++)p&1?(f[k]=l.charCodeAt(p),k+=2):f[k+1]=l.charCodeAt(p)},d=a.v?34112:64,e=160===a.C?0:1031,g=a.v?16928:16384,h=a.v?20480:29696;a.data.fill(0,0,512);Vf(a,[d&255,d>>8&255,b&255,b>>8&255,0,0,a.G&255,a.G>>8&255,a.D/512&255,a.D/512>>8&255,0,2,a.D&255,a.D>>8&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,1,0,0,2,0,0,0,2,0,2,7,0,b&255,b>>8&255,a.G&255,a.G>>8&255,a.D,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255,0,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255,0,0,e&255,e>>8&255,0,0,30,0,30,0,30,0,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,g&255,g>>8&255,h&255,h>>8&255,0,64,g&255,g>>8&255,h&255,h>>8&255,0,64,0,0,0,0,0,0,0,0,0,0,1,96,0,0,0,0,0,0,0,0,0,0,0,0,a.j&255,a.j>>8&255,a.j>>16&255,a.j>>24&255]);c(a.data,10,10,`8086-86${a.O}${a.Oa}`);c(a.data,
23,4,"1.00");c(a.data,27,20,a.v?"v86 ATAPI CD-ROM":"v86 ATA HD");a.h=512;a.g=512}function If(a,b){Hf(a,b);a.$.fill(0,0,b+3>>2)}function Hf(a,b){a.data.length<b&&(a.data=new Uint8Array(b+3&-4),a.ia=new Uint16Array(a.data.buffer),a.$=new Int32Array(a.data.buffer));a.h=b;a.i=0}function Vf(a,b){Hf(a,b.length);a.data.set(b)}function Uf(a){a.s.send("ide-read-start")}function Wf(a,b){a.s.send("ide-read-end",[a.O,b,b/a.o|0])}function Sf(a,b){a.s.send("ide-write-end",[a.O,b,b/a.o|0])}
n.za=function(a,b,c){const d=this.Va++;this.aa.add(d);this.buffer.get(a,b,e=>{this.Ka.delete(d)?this.aa.has(d):(this.aa.delete(d),c(e))})};
n.ha=function(){var a=[];a[0]=this.Aa;a[1]=this.K;a[2]=this.Sa;a[3]=this.Qa;a[4]=this.i;a[5]=0;a[6]=0;a[7]=0;a[8]=0;a[9]=this.ef;a[10]=this.Za;a[11]=this.head;a[12]=this.G;a[13]=this.v;a[14]=this.Lf;a[15]=this.Ff;a[16]=this.data;a[17]=this.h;a[18]=this.fb;a[19]=this.j;a[20]=this.o;a[21]=this.Z;a[22]=this.D;a[23]=this.J;a[24]=this.sa;a[25]=this.C;a[26]=this.g;a[27]=this.Ba;a[28]=this.buffer;return a};
n.I=function(a){this.Aa=a[0];this.K=a[1];this.Sa=a[2];this.Qa=a[3];this.i=a[4];this.ef=a[9];this.Za=a[10];this.head=a[11];this.G=a[12];this.v=a[13];this.Lf=a[14];this.Ff=a[15];this.data=a[16];this.h=a[17];this.fb=a[18];this.j=a[19];this.o=a[20];this.Z=a[21];this.D=a[22];this.J=a[23];this.sa=a[24];this.C=a[25];this.g=a[26];this.Ba=a[27];this.ia=new Uint16Array(this.data.buffer);this.$=new Int32Array(this.data.buffer);this.buffer&&this.buffer.I(a[28]);this.pa=this.v||this.buffer;this.X=!1};function ag(a,b,c,d=1500){this.s=b;this.id=a.A.oa?1:0;this.status=1;this.Ke=c;this.ra=new Uint8Array([0,34,21,255*Math.random()|0,255*Math.random()|0,255*Math.random()|0]);this.s.send("net"+this.id+"-mac",ze(this.ra));b=[];for(c=0;1>c;++c)b.push({Xa:1024,hb:0}),b.push({Xa:1024,hb:1});b.push({Xa:16,hb:2});this.N=new Ge(a,{name:"virtio-net",nb:80,ve:4161,Xf:1,te:{ab:51200,T:b,features:[5,16,22,3,17,23,32],ih:()=>{}},notification:{ab:51456,Jg:!1,sg:[()=>{},e=>{const g=this.N.T[e];for(;He(g);){const h=
Ie(g),f=new Uint8Array(h.Eb);Je(h,f);this.s.send("net"+this.id+"-send",f.subarray(12));this.s.send("eth-transmit-end",[f.length-12]);Te(this.N.T[e],h)}Ue(this.N.T[e])},e=>{if(2===e)for(var g=this.N.T[e];He(g);){const h=Ie(g),f=new Uint8Array(h.Eb);Je(h,f);const k=K(["b","b"],f,{offset:0});switch(k[0]<<8|k[1]){case 1024:K(["h"],f,{offset:2});this.Fd(e,h,new Uint8Array([0]));break;case 257:this.ra=f.subarray(2,8);this.Fd(e,h,new Uint8Array([0]));this.s.send("net"+this.id+"-mac",ze(this.ra));break;default:this.Fd(e,
h,new Uint8Array([1]));return}}}]},Xb:{ab:50944},Af:{ab:50688,Vc:[0,1,2,3,4,5].map((e,g)=>({bytes:1,name:"mac_"+g,read:()=>this.ra[g],write:()=>{}})).concat([{bytes:2,name:"status",read:()=>this.status,write:()=>{}},{bytes:2,name:"max_pairs",read:()=>1,write:()=>{}},{bytes:2,name:"mtu",read:()=>d,write:()=>{}}])}});this.s.register("net"+this.id+"-receive",e=>{this.s.send("eth-receive-end",[e.length]);const g=new Uint8Array(12+e.byteLength);(new DataView(g.buffer,g.byteOffset,g.byteLength)).setInt16(10,
1);g.set(e,12);e=this.N.T[0];He(e)?(e=Ie(e),Se(e,g),Te(this.N.T[0],e),Ue(this.N.T[0])):console.log("No buffer to write into!")},this)}ag.prototype.ha=function(){const a=[];a[0]=this.N;a[1]=this.id;a[2]=this.ra;return a};ag.prototype.I=function(a){this.N.I(a[0]);this.id=a[1];this.Ke&&(this.ra=a[2],this.s.send("net"+this.id+"-mac",ze(this.ra)))};ag.prototype.reset=function(){this.N.reset()};ag.prototype.Fd=function(a,b,c){Se(b,c);Te(this.N.T[a],b);Ue(this.N.T[a])};const bg=Uint32Array.from([655360,655360,720896,753664]),cg=Uint32Array.from([131072,65536,32768,32768]);
function dg(a,b,c,d){this.u=a;this.s=b;this.screen=c;this.va=d;this.Z=0;this.kd=14;this.de=15;this.pb=80;this.vd=25;this.oe=this.l=this.Bd=this.Qb=0;this.td=[];this.ne=this.h=0;this.fd=new Uint8Array(25);this.K=this.fa=this.me=this.Rb=this.C=this.G=this.od=this.rd=this.o=0;this.g=!1;this.aa=new Int32Array(256);this.D=0;this.dg=45253;this.$=this.v=0;this.j=!1;this.sa=32;this.ce=this.Ed=this.ec=this.Kc=0;void 0===this.va||262144>this.va?this.va=262144:268435456<this.va?this.va=268435456:this.va=qa(this.va);
this.S=[52,18,17,17,3,1,0,0,0,0,0,3,0,0,0,0,8,14680064,57344,224,0,0,0,0,0,0,191,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,190,254,0,0,0,0,0,0,0,0,0,0,0,0];this.nb=144;this.bc=[{size:this.va}];this.pi=65536;this.qk=4272947200;this.name="vga";this.xc=this.ld=this.wc=this.pa=0;this.Oa=255;this.Ka=new Uint8Array(16);this.X=-1;this.wd=32;this.vc=this.sd=this.ed=this.i=0;this.Cd=-1;this.Jb=15;this.fc=this.Dd=0;this.md=-1;this.Ic=this.Ib=this.le=this.Ba=0;this.je=255;this.da=this.ic=this.hc=this.Gc=
this.ke=this.zd=0;this.O=this.Xe=255;this.zc=!1;b=a.B;w(b,960,this,this.Yk);x(b,960,this,this.zi,this.Xk);x(b,961,this,this.Ai);w(b,962,this,this.Zk);b.xd(964,this,this.al,this.cl);x(b,964,this,this.$k);x(b,965,this,this.bl);b.xd(974,this,this.nl,this.pl);x(b,974,this,this.ml);x(b,975,this,this.ol);x(b,966,this,this.dl);w(b,966,this,this.el);w(b,967,this,this.gl);x(b,967,this,this.fl);w(b,968,this,this.il);x(b,968,this,this.hl);w(b,969,this,this.kl);x(b,969,this,this.jl);x(b,972,this,this.ll);w(b,
980,this,this.lh,this.Ci);w(b,981,this,this.Eg,this.Ei);x(b,980,this,this.Bi);x(b,981,this,this.mh,this.Di);w(b,948,this,this.lh,this.Ci);w(b,949,this,this.Eg,this.Ei);x(b,948,this,this.Bi);x(b,949,this,this.mh,this.Di);x(b,970,this,function(){return 0});x(b,986,this,this.Fi);x(b,954,this,this.Fi);this.ie=-1;this.Va=0;w(b,462,this,void 0,this.sk);w(b,463,this,void 0,this.uk);x(b,463,this,void 0,this.tk);c=a.$e(this.va)>>>0;this.af=t(Uint8Array,a.Ia,c,this.va);this.fe=this.va;this.ee=0;this.he=this.va;
this.ge=0;this.Mc=null;this.ia=new Uint8Array(262144);this.Ye=new Uint8Array(this.ia.buffer,0,65536);this.Ze=new Uint8Array(this.ia.buffer,65536,65536);this.Ad=new Uint8Array(this.ia.buffer,131072,65536);this.$e=new Uint8Array(this.ia.buffer,196608,65536);this.yd=new Uint8Array(524288);cb(b,655360,131072,e=>eg(this,e),(e,g)=>{if(this.j)this.u.Qg((e-655360|this.Kc)+3758096384|0,g);else{var h=this.Gc>>2&3;e-=bg[h];if(!(0>e||e>=cg[h]))if(this.g){var f=g;g=fg(this.je);var k=gg(this.zd);h=gg(this.ke);
switch(this.Ib&3){case 0:f=(f|f<<8)>>>(this.Ic&7)&255;var m=fg(f);f=gg(this.zd);m=hg(this,(m|h&f)&(~h|f),this.D);m=g&m|~g&this.D;break;case 1:m=this.D;break;case 2:m=gg(f);m=hg(this,m,this.D);m=g&m|~g&this.D;break;case 3:f=(f|f<<8)>>>(this.Ic&7)&255,g&=fg(f),m=g&k|~g&this.D}g=15;switch(this.Dd&12){case 0:g=5<<(e&1);e&=-2;break;case 8:case 12:g=1<<(e&3),e&=-4}g&=this.Jb;g&1&&(this.Ye[e]=m>>0&255);g&2&&(this.Ze[e]=m>>8&255);g&4&&(this.Ad[e]=m>>16&255);g&8&&(this.$e[e]=m>>24&255);m=ig(this,e);g=m+7;
m<this.he&&(this.he=m);g>this.ge&&(this.ge=g);m<this.fe&&(this.fe=m);g>this.ee&&(this.ee=g)}else if(this.Jb&3){if(h=e,this.ia[h]=g,e=Math.max(this.pb,2*this.fa),h>>1>=this.h?(f=(h>>1)-this.h,m=f/e|0,e=f%e):(f=h>>1,m=(f/e|0)+jg(this,this.K),e=f%e),!(e>=this.pb||m>=this.vd)){h&1?(f=g,g=this.ia[h&-2]):f=this.ia[h|1];var l=this.i&8;h=(l&&f&128?this.screen.o:0)|(!this.zc||f&8?0:this.screen.v);k=this.zc?7:15;l=l?7:15;this.s.send("screen-put-char",[m,e,g]);this.screen.j(m,e,g,h,this.aa[this.Oa&this.Ka[f>>
4&l]],this.aa[this.Oa&this.Ka[f&k]])}}else this.Jb&4&&(this.Ad[e]=g)}});je(a.A.mb,this)}n=dg.prototype;
n.ha=function(){var a=[];a[0]=this.va;a[1]=this.Z;a[2]=this.kd;a[3]=this.de;a[4]=this.pb;a[5]=this.vd;a[6]=this.ia;a[7]=this.xc;a[8]=this.h;a[9]=this.g;a[10]=this.aa;a[11]=this.D;a[12]=this.hc;a[13]=this.ic;a[14]=this.Gc;a[15]=this.v;a[16]=this.$;a[17]=this.o;a[18]=this.j;a[19]=this.sa;a[20]=this.Kc;a[21]=this.ec;a[22]=this.pa;a[23]=this.wc;a[24]=this.ld;a[25]=this.Ka;a[26]=this.Cd;a[27]=this.Jb;a[28]=this.Dd;a[29]=this.md;a[30]=this.le;a[31]=this.Ib;a[32]=this.Ic;a[33]=this.je;a[34]=this.da;a[35]=
this.Xe;a[36]=this.O;a[37]=this.ie;a[38]=this.Va;a[39]=this.af;a[41]=this.X;a[42]=this.fa;a[43]=this.zd;a[44]=this.ke;a[45]=this.ne;a[46]=this.fd;a[47]=this.rd;a[48]=this.od;a[49]=this.G;a[50]=this.C;a[51]=this.Rb;a[52]=this.me;a[53]=this.fa;a[54]=this.wd;a[55]=this.i;a[56]=this.ed;a[57]=this.sd;a[58]=this.vc;a[59]=this.fc;a[60]=this.K;a[61]=this.yd;a[62]=this.Oa;a[63]=this.Ba;a[64]=this.zc;return a};
n.I=function(a){this.va=a[0];this.Z=a[1];this.kd=a[2];this.de=a[3];this.pb=a[4];this.vd=a[5];a[6]&&this.ia.set(a[6]);this.xc=a[7];this.h=a[8];this.g=a[9];this.aa=a[10];this.D=a[11];this.hc=a[12];this.ic=a[13];this.Gc=a[14];this.v=a[15];this.$=a[16];this.o=a[17];this.j=a[18];this.sa=a[19];this.Kc=a[20];this.ec=a[21];this.pa=a[22];this.wc=a[23];this.ld=a[24];this.Ka=a[25];this.Cd=a[26];this.Jb=a[27];this.Dd=a[28];this.md=a[29];this.le=a[30];this.Ib=a[31];this.Ic=a[32];this.je=a[33];this.da=a[34];this.Xe=
a[35];this.O=a[36];this.ie=a[37];this.Va=a[38];this.af.set(a[39]);this.X=a[41];this.fa=a[42];this.zd=a[43];this.ke=a[44];this.ne=a[45];this.fd.set(a[46]);this.rd=a[47];this.od=a[48];this.G=a[49];this.C=a[50];this.Rb=a[51];this.me=a[52];this.fa=a[53];this.wd=a[54];this.i=a[55];this.ed=a[56];this.sd=a[57];this.vc=a[58];this.fc=a[59];this.K=a[60];a[61]&&this.yd.set(a[61]);this.Oa=void 0===a[62]?255:a[62];this.Ba=void 0===a[63]?0:a[63];this.zc=void 0===a[64]?0:a[64];this.screen.g(this.g);this.g?(this.Bd=
this.Qb=0,this.j?(kg(this,this.v,this.$,this.v,this.$,this.sa),lg(this)):(mg(this),lg(this),ng(this))):(og(this,!0),pg(this,this.pb,this.vd),qg(this),rg(this),sg(this));tg(this)};
function eg(a,b){if(a.j)return a.u.Me((b-655360|a.Kc)+3758096384|0);var c=a.Gc>>2&3;b-=bg[c];if(0>b||b>=cg[c])return 0;a.D=a.Ye[b];a.D|=a.Ze[b]<<8;a.D|=a.Ad[b]<<16;a.D|=a.$e[b]<<24;if(a.Ib&8)return c=255,a.ic&1&&(c&=a.Ye[b]^~(a.hc&1?255:0)),a.ic&2&&(c&=a.Ze[b]^~(a.hc&2?255:0)),a.ic&4&&(c&=a.Ad[b]^~(a.hc&4?255:0)),a.ic&8&&(c&=a.$e[b]^~(a.hc&8?255:0)),c;c=a.le;a.g?a.Dd&8?(c=b&3,b&=-4):a.Ib&16&&(c=b&1,b&=-2):c&=3;return a.ia[c<<16|b]}function fg(a){return a|a<<8|a<<16|a<<24}
function gg(a){return(a&1?255:0)|(a&2?255:0)<<8|(a&4?255:0)<<16|(a&8?255:0)<<24}function hg(a,b,c){switch(a.Ic&24){case 8:return b&c;case 16:return b|c;case 24:return b^c}return b}
function ug(a){const b=jg(a,a.K),c=Math.max(0,2*(2*a.fa-a.pb)),d=a.i&8,e=a.zc?7:15,g=d?7:15,h=a.screen.o,f=a.screen.v;let k=a.h<<1;for(let m=0;m<a.vd;m++){m===b&&(k=0);for(let l=0;l<a.pb;l++){const p=a.ia[k],q=a.ia[k|1],r=(d&&q&128?h:0)|(!a.zc||q&8?0:f);a.s.send("screen-put-char",[m,l,p]);a.screen.j(m,l,p,r,a.aa[a.Oa&a.Ka[q>>4&g]],a.aa[a.Oa&a.Ka[q&e]]);k+=2}k+=c}}
function sg(a){var b=Math.max(a.pb,2*a.fa);let c;a.Z>=a.h?(c=(a.Z-a.h)/b|0,b=(a.Z-a.h)%b):(c=(a.Z/b|0)+jg(a,a.K),b=a.Z%b);a.screen.G(c,b)}function tg(a){a.g?a.j?a.u.yd():(a.fe=0,a.ee=524288):ug(a)}function ng(a){a.g&&!a.j&&(a.he=0,a.ge=524288,tg(a))}n.Da=function(){};function vg(a){var b=128+(~a.Rb&a.o&64);b-=a.Rb&64;b-=a.i&64;return b>>>6}
function ig(a,b){var c=vg(a);if(~a.o&3){var d=b-a.h;d&=a.o<<13|-24577;d<<=c;var e=d/a.l|0;d%=a.l;switch(a.o&3){case 2:e=e<<1|b>>13&1;break;case 1:e=e<<1|b>>14&1;break;case 0:e=e<<2|b>>13&3}return e*a.l+d+(a.h<<c)}return b<<c}function jg(a,b){a.da&128&&(b>>>=1);b=Math.ceil(b/(1+(a.da&31)));a.o&1||(b<<=1);a.o&2||(b<<=1);return b}function pg(a,b,c){a.pb=b;a.vd=c;a.screen.i(b,c);a.s.send("screen-set-size",[b,c,0])}
function kg(a,b,c,d,e,g){d=Math.max(d,1);e=Math.max(e,1);if(a.Qb!==b||a.Bd!==c||a.l!==d||a.oe!==e){a.Qb=b;a.Bd=c;a.l=d;a.oe=e;if("undefined"!==typeof ImageData){const h=d*e,f=a.u.Ze(h)>>>0;a.vf=f;a.Mc=new ImageData(new Uint8ClampedArray(a.u.Ia.buffer,f,4*h),d,e);a.u.yd()}a.screen.h(b,c);a.s.send("screen-set-size",[b,c,g])}}
function mg(a){if(!a.j){var b=Math.min(1+a.rd,a.od),c=Math.min(1+a.G,a.C);if(b&&c)if(a.g){b<<=3;var d=a.fa<<4,e=4;a.i&64?(b>>>=1,d>>>=1,e=8):a.i&2&&(e=1);c=jg(a,c);var g=cg[0];var h=a.fa<<2;a.Rb&64?h<<=1:a.o&64&&(h>>>=1);kg(a,b,c,d,h?Math.ceil(g/h):c,e);wg(a);lg(a)}else a.da&128&&(c>>>=1),d=c/(1+(a.da&31))|0,b&&d&&pg(a,b,d)}}
function lg(a){a.g||ug(a);if(a.j)a.td=[];else if(a.l&&a.Qb)if(!a.wd||a.fc&32)a.td=[],a.screen.O();else{var b=a.ne,c=a.sd;a.i&64&&(c>>>=1);var d=a.me>>5&3,e=ig(a,b+d);b=e/a.l|0;var g=e%a.l+c;e=jg(a,1+a.K);e=Math.min(e,a.Bd);var h=a.Bd-e;a.td=[];g=-g;for(var f=0;g<a.Qb;g+=a.l,f++)a.td.push({Mc:a.Mc,th:g,uh:0,gg:0,hg:b+f,Vg:a.l,Ug:e});b=0;a.i&32||(b=ig(a,d)+c);g=-b;for(f=0;g<a.Qb;g+=a.l,f++)a.td.push({Mc:a.Mc,th:g,uh:e,gg:0,hg:f,Vg:a.l,Ug:h})}}function wg(a){a.O|=8;a.ne!==a.h&&(a.ne=a.h,lg(a))}
function rg(a){var b=a.da&31;const c=Math.min(b,a.kd&31);b=Math.min(b,a.de&31);a.screen.K(c,b,!(a.kd&32)&&c<b)}
n.Yk=function(a){if(-1===this.X)this.X=a&31,this.wd!==(a&32)&&(this.wd=a&32,lg(this));else{if(16>this.X)this.Ka[this.X]=a,this.i&64||tg(this);else switch(this.X){case 16:if(this.i!==a){var b=this.i;this.i=a;const c=0!==(a&1);this.j||this.g===c||(this.g=c,this.screen.g(this.g));(b^a)&64&&ng(this);mg(this);tg(this);og(this,!1)}break;case 18:this.ed!==a&&(this.ed=a,tg(this));break;case 19:this.sd!==a&&(this.sd=a&15,lg(this));break;case 20:this.vc!==a&&(this.vc=a,tg(this))}this.X=-1}};
n.zi=function(){return(this.X|this.wd)&255};n.Xk=function(){return this.zi()|this.Ai()<<8&65280};n.Ai=function(){if(16>this.X)return this.Ka[this.X]&255;switch(this.X){case 16:return this.i;case 18:return this.ed;case 19:return this.sd;case 20:return this.vc}return 255};n.Zk=function(a){this.Xe=a};n.al=function(a){this.Cd=a};n.$k=function(){return this.Cd};
n.cl=function(a){switch(this.Cd){case 1:var b=this.fc;this.fc=a;(b^a)&32&&lg(this);og(this,!1);break;case 2:b=this.Jb;this.Jb=a;this.g||!(b&4)||this.Jb&4||og(this,!0);break;case 3:b=this.Ba;this.Ba=a;this.g||b===a||qg(this);break;case 4:this.Dd=a}};n.bl=function(){switch(this.Cd){case 1:return this.fc;case 2:return this.Jb;case 3:return this.Ba;case 4:return this.Dd;case 6:return 18}return 0};n.el=function(a){this.Oa!==a&&(this.Oa=a,tg(this))};n.dl=function(){return this.Oa};
n.gl=function(a){this.ld=3*a;this.xc&=0};n.fl=function(){return this.xc};n.il=function(a){this.wc=3*a;this.xc|=3};n.hl=function(){return this.wc/3&255};n.kl=function(a){var b=this.wc/3|0,c=this.wc%3,d=this.aa[b];if(0===(this.Va&32)){a&=63;const e=a&1;a=a<<2|e<<1|e}d=0===c?d&-16711681|a<<16:1===c?d&-65281|a<<8:d&-256|a;this.aa[b]!==d&&(this.aa[b]=d,tg(this));this.wc++};n.jl=function(){var a=this.aa[this.ld/3|0]>>8*(2-this.ld%3)&255;this.ld++;return this.Va&32?a:a>>2};n.ll=function(){return this.Xe};
n.nl=function(a){this.md=a};n.ml=function(){return this.md};n.pl=function(a){switch(this.md){case 0:this.zd=a;break;case 1:this.ke=a;break;case 2:this.hc=a;break;case 3:this.Ic=a;break;case 4:this.le=a;break;case 5:var b=this.Ib;this.Ib=a;(b^a)&96&&ng(this);break;case 6:this.Gc!==a&&(this.Gc=a,mg(this));break;case 7:this.ic=a;break;case 8:this.je=a}};
n.ol=function(){switch(this.md){case 0:return this.zd;case 1:return this.ke;case 2:return this.hc;case 3:return this.Ic;case 4:return this.le;case 5:return this.Ib;case 6:return this.Gc;case 7:return this.ic;case 8:return this.je}return 0};n.lh=function(a){this.pa=a};n.Ci=function(a){this.lh(a&255);this.Eg(a>>8&255)};n.Bi=function(){return this.pa};
n.Eg=function(a){switch(this.pa){case 1:this.rd!==a&&(this.rd=a,mg(this));break;case 2:this.od!==a&&(this.od=a,mg(this));break;case 7:var b=this.G;this.G&=255;this.G=this.G|a<<3&512|a<<7&256;b!==this.G&&mg(this);this.K=this.K&767|a<<4&256;b=this.C;this.C=this.C&767|a<<5&256;b!==this.C&&mg(this);lg(this);break;case 8:this.me=a;lg(this);break;case 9:var c=this.da;this.da=a;this.K=this.K&511|a<<3&512;b=this.C;this.C=this.C&511|a<<4&512;((c^this.da)&159||b!==this.C)&&mg(this);rg(this);lg(this);og(this,
!1);break;case 10:this.kd=a;rg(this);break;case 11:this.de=a;rg(this);break;case 12:(this.h>>8&255)!==a&&(this.h=this.h&255|a<<8,lg(this),~this.o&3&&ng(this));break;case 13:(this.h&255)!==a&&(this.h=this.h&65280|a,lg(this),~this.o&3&&ng(this));break;case 14:this.Z=this.Z&255|a<<8;sg(this);break;case 15:this.Z=this.Z&65280|a;sg(this);break;case 18:(this.G&255)!==a&&(this.G=this.G&768|a,mg(this));break;case 19:this.fa!==a&&(this.fa=a,mg(this),~this.o&3&&ng(this));break;case 20:this.Rb!==a&&(b=this.Rb,
this.Rb=a,mg(this),(b^a)&64&&ng(this));break;case 21:(this.C&255)!==a&&(this.C=this.C&768|a,mg(this));break;case 23:this.o!==a&&(b=this.o,this.o=a,mg(this),(b^a)&67&&ng(this));break;case 24:this.K=this.K&768|a;lg(this);break;default:this.pa<this.fd.length&&(this.fd[this.pa]=a)}};n.Ei=function(a){this.Eg(a&255)};
n.mh=function(){switch(this.pa){case 1:return this.rd;case 2:return this.od;case 7:return this.G>>7&2|this.C>>5&8|this.K>>4&16|this.G>>3&64;case 8:return this.me;case 9:return this.da;case 10:return this.kd;case 11:return this.de;case 12:return this.h&255;case 13:return this.h>>8;case 14:return this.Z>>8;case 15:return this.Z&255;case 18:return this.G&255;case 19:return this.fa;case 20:return this.Rb;case 21:return this.C&255;case 23:return this.o;case 24:return this.K&255}return this.pa<this.fd.length?
this.fd[this.pa]:0};n.Di=function(){return this.mh()};n.Fi=function(){var a=this.O;this.g?(this.O^=1,this.O&=1):(this.O&1&&(this.O^=8),this.O^=1);this.X=-1;return a};n.sk=function(a){this.ie=a};
n.uk=function(a){const b=this.j;switch(this.ie){case 0:45248<=a&&45253>=a&&(this.dg=a);break;case 1:this.v=a;2560<this.v&&(this.v=2560);break;case 2:this.$=a;1600<this.$&&(this.$=1600);break;case 3:this.sa=a;break;case 4:(this.j=1===(a&1))&&0===(a&128)&&this.af.fill(0);this.Va=a;break;case 5:this.Kc=a<<16;break;case 8:this.Ed!==a&&(this.Ed=a,this.ec=this.ce*this.v+this.Ed,tg(this));break;case 9:this.ce!==a&&(this.ce=a,this.ec=this.ce*this.v+this.Ed,tg(this))}!this.j||this.v&&this.$||(this.j=!1);this.j&&
!b&&(this.ce=this.Ed=this.ec=0,this.g=!0,this.screen.g(this.g),kg(this,this.v,this.$,this.v,this.$,this.sa));b&&!this.j&&(this.g=a=0!==(this.i&1),this.screen.g(a),mg(this),og(this,!1),tg(this));this.j||(this.Kc=0);lg(this)};n.tk=function(){return xg(this,this.ie)};
function xg(a,b){switch(b){case 0:return a.dg;case 1:return a.Va&2?2560:a.v;case 2:return a.Va&2?1600:a.$;case 3:return a.Va&2?32:a.sa;case 4:return a.Va;case 5:return a.Kc>>>16;case 6:return a.Qb?a.Qb:1;case 8:return a.Ed;case 9:return a.ce;case 10:return a.va/65536|0}return 255}
n.sh=function(){if(this.g){if(0===this.Mc.data.byteLength){var a=new Uint8ClampedArray(this.u.Ia.buffer,this.vf,4*this.l*this.oe);this.Mc=new ImageData(a,this.l,this.oe);lg(this)}if(this.j){a=0;var b=this.$;if(8===this.sa)for(var c=new Int32Array(this.u.Ia.buffer,this.vf,this.Qb*this.Bd),d=new Uint8Array(this.u.Ia.buffer,this.af.byteOffset,this.va),e=0;e<c.length;e++){var g=this.aa[d[e]];c[e]=g&65280|g<<16|g>>16|4278190080}else this.u.dg(this.sa,this.ec),e=15===this.sa?2:this.sa/8,a=((this.u.vf[0]/
e|0)-this.ec)/this.v|0,b=(((this.u.af[0]/e|0)-this.ec)/this.v|0)+1;a<b&&(a=Math.max(a,0),b=Math.min(b,this.$),this.screen.l([{Mc:this.Mc,th:0,uh:a,gg:0,hg:a,Vg:this.v,Ug:b-a}]))}else{a=Math.min(this.ge|15,524287);e=vg(this);g=~this.o&3;b=this.Ib&96;c=this.i&64;for(d=this.he&-16;d<=a;){var h=d>>>e;if(g){var f=d/this.l|0,k=d-this.l*f;switch(g){case 1:h=(f&1)<<13;f>>>=1;break;case 2:h=(f&1)<<14;f>>>=1;break;case 3:h=(f&3)<<13,f>>>=2}h|=(f*this.l+k>>>e)+this.h}f=this.Ye[h];k=this.Ze[h];var m=this.Ad[h],
l=this.$e[h];h=new Uint8Array(8);switch(b){case 0:f<<=0;k<<=1;m<<=2;l<<=3;for(var p=7;0<=p;p--)h[7-p]=f>>p&1|k>>p&2|m>>p&4|l>>p&8;break;case 32:h[0]=f>>6&3|m>>4&12;h[1]=f>>4&3|m>>2&12;h[2]=f>>2&3|m>>0&12;h[3]=f>>0&3|m<<2&12;h[4]=k>>6&3|l>>4&12;h[5]=k>>4&3|l>>2&12;h[6]=k>>2&3|l>>0&12;h[7]=k>>0&3|l<<2&12;break;case 64:case 96:h[0]=f>>4&15,h[1]=f>>0&15,h[2]=k>>4&15,h[3]=k>>0&15,h[4]=m>>4&15,h[5]=m>>0&15,h[6]=l>>4&15,h[7]=l>>0&15}if(c)for(f=p=0;4>p;p++,d++,f+=2)this.yd[d]=h[f]<<4|h[f+1];else for(p=0;8>
p;p++,d++)this.yd[d]=h[p]}c=this.fe;a=Math.min(this.ee,524287);b=new Int32Array(this.u.Ia.buffer,this.vf,this.l*this.oe);e=255;g=0;this.i&128&&(e&=207,g|=this.vc<<4&48);if(this.i&64)for(;c<=a;c++)d=this.yd[c]&e|g,d=this.aa[d],b[c]=d&65280|d<<16|d>>16|4278190080;else for(e&=63,g|=this.vc<<4&192;c<=a;c++)d=this.Ka[this.yd[c]&this.ed]&e|g,d=this.aa[d],b[c]=d&65280|d<<16|d>>16|4278190080;this.screen.l(this.td)}this.fe=this.va;this.ee=0;this.he=this.va;this.ge=0}wg(this)};
function og(a,b){const c=a.da&31;if(c&&!a.g){const d=!!(a.fc&8);a.screen.C(c+1,!d&&!(a.fc&1),d,!!(a.i&4),a.Ad,b)}}function qg(a){const b=[0,2,4,6,1,3,5,7],c=(a.Ba&12)>>2|(a.Ba&32)>>3,d=a.Ba&3|(a.Ba&16)>>2;a.zc=c!==d;a.screen.D(b[c],b[d]);tg(a)};const yg="SWAP_IN SWAP_OUT MAJFLT MINFLT MEMFREE MEMTOT AVAIL CACHES HTLB_PGALLOC HTLB_PGFAIL".split(" ");
function zg(a,b){this.s=b;this.j=this.h=this.g=this.i=0;this.N=new Ge(a,{name:"virtio-balloon",nb:88,ve:4165,Xf:5,te:{ab:55296,T:[{Xa:32,hb:0},{Xa:32,hb:0},{Xa:2,hb:1},{Xa:64,hb:2}],features:[1,3,32],ih:()=>{}},notification:{ab:55552,Jg:!1,sg:[c=>{const d=this.N.T[c];for(;He(d);){var e=Ie(d);const g=new Uint8Array(e.Eb);Je(e,g);Te(this.N.T[c],e);e=g.byteLength/4;this.g+=0===c?e:-e}Ue(this.N.T[c])},c=>{var d=this.N.T[c];if(He(d)){d=Ie(d);const e=new Uint8Array(d.Eb);Je(d,e);let g={};for(let h=0;h<
d.Eb;h+=10){let [f,k]=K(["h","d"],e,{offset:h});g[yg[f]]=k}Te(this.N.T[c],d);this.o&&this.o(g)}},c=>{const d=this.N.T[c];for(;He(d);){const g=Ie(d);if(0<g.Eb){var e=new Uint8Array(g.Eb);Je(g,e);[e]=K(["w"],e,{offset:0});0===e&&(this.l&&this.l(this.j),1<this.h&&(this.h=1),e=this.N,e.D=!0,e.i&4&&e.$a(2))}if(0<g.j)for(new Uint8Array(0),e=0;e<g.i.length;++e){let h=g.i[e];this.j+=h.nd;this.N.u.Ed(h.eg,h.nd)}Te(this.N.T[c],g)}Ue(this.N.T[c])}]},Xb:{ab:55040},Af:{ab:54784,Vc:[{bytes:4,name:"num_pages",read:()=>
this.i,write:()=>{}},{bytes:4,name:"actual",read:()=>this.g,write:()=>{}},{bytes:4,name:"free_page_hint_cmd_id",read:()=>this.h,write:()=>{}}]}})}zg.prototype.ha=function(){const a=[];a[0]=this.N;a[1]=this.i;a[2]=this.g;return a};zg.prototype.I=function(a){this.N.I(a[0]);this.i=a[1];this.g=a[2]};function Ag(a,b,c,d){var e=new Uint8Array(b);const g=new Uint16Array(b);var h=new Uint32Array(b),f=e[497]||4;if(43605===g[255]&&1400005704===(g[257]|g[258]<<16)){var k=e[529];e[528]=255;e[529]=k&-97|128;g[274]=56832;g[253]=65535;d+="\x00";h[138]=581632;for(e=0;e<d.length;e++)a[581632+e]=d.charCodeAt(e);f=512*(f+1);d=new Uint8Array(b,0,f);b=new Uint8Array(b,f);e=f=0;c&&(f=67108864,e=c.byteLength,a.set(new Uint8Array(c),f));h[134]=f;h[135]=e;a.set(d,524288);a.set(b,1048576);a=new Uint8Array(512);(new Uint16Array(a.buffer))[0]=
43605;a[2]=1;c=3;a[c++]=250;a[c++]=184;a[c++]=32768;a[c++]=128;a[c++]=142;a[c++]=192;a[c++]=142;a[c++]=216;a[c++]=142;a[c++]=224;a[c++]=142;a[c++]=232;a[c++]=142;a[c++]=208;a[c++]=188;a[c++]=57344;a[c++]=224;a[c++]=234;a[c++]=0;a[c++]=0;a[c++]=32800;a[c++]=128;h=a[c]=0;for(b=0;b<a.length;b++)h+=a[b];a[c]=-h;return{name:"genroms/kernel.bin",data:a}}};function ee(a,b,c){this.Xe=c;this.Ya=b;Bg(this);b=Object.create(null);b.m=this.Ya.exports.memory;for(var d of Object.keys(this.Ya.exports))d.startsWith("_")||d.startsWith("zstd")||d.endsWith("_js")||(b[d]=this.Ya.exports[d]);this.le=b;this.Ia=d=this.Ya.exports.memory;this.F=t(Uint32Array,d,812,1);this.xb=new Uint8Array(0);new Int32Array(this.xb.buffer);this.C=t(Uint8Array,d,724,8);this.pb=t(Int32Array,d,736,8);this.Va=t(Uint32Array,d,768,8);this.v=t(Uint8Array,d,512,8);this.Ka=t(Int32Array,d,800,
1);this.Ic=t(Int32Array,d,564,1);this.Gc=t(Int32Array,d,568,1);this.wc=t(Int32Array,d,572,1);this.vc=t(Int32Array,d,576,1);this.Cd=t(Int32Array,d,1128,1);this.od=t(Uint32Array,d,540,8);this.Ab=t(Int32Array,d,580,8);this.Rb=t(Uint8Array,d,612,1);this.sa=t(Int32Array,d,804,1);this.Jb=t(Int32Array,d,808,1);this.Kc=t(Uint8Array,d,616,1);this.ld=t(Int32Array,d,620,1);this.hc=t(Int32Array,d,624,1);this.zd=t(Int32Array,d,636,1);this.Bd=t(Int32Array,d,640,1);this.Ad=t(Int32Array,d,644,1);this.rd=t(Int32Array,
d,648,1);this.flags=t(Int32Array,d,120,1);this.ic=t(Int32Array,d,100,1);this.fd=t(Int32Array,d,96,1);this.ed=t(Int32Array,d,104,1);this.kd=t(Int32Array,d,112,1);this.fe=t(Uint32Array,d,960,2);this.A={};this.pa=t(Int32Array,d,556,1);this.sd=t(Int32Array,d,560,1);t(Uint8Array,d,548,1);this.Qb=t(Uint8Array,d,552,1);this.g=[];this.j=[];this.Ba=[];this.i=[];this.zb={eh:null,$d:null};this.ik=t(Uint32Array,d,664,1);this.o=t(Int32Array,d,64,8);this.ec=t(Int32Array,d,1152,32);this.$=t(Uint8Array,d,816,1);
this.$[0]=255;this.aa=t(Uint8Array,d,1032,1);this.aa[0]=0;this.D=t(Uint16Array,d,1036,1);this.D[0]=895;this.da=t(Uint16Array,d,1040,1);this.da[0]=0;this.O=t(Int32Array,d,1048,1);this.O[0]=0;this.X=t(Int32Array,d,1052,1);this.X[0]=0;this.Z=t(Int32Array,d,1044,1);this.Z[0]=0;this.G=t(Int32Array,d,1056,1);this.G[0]=0;this.K=t(Int32Array,d,1060,1);this.K[0]=0;this.vd=t(Int32Array,d,832,32);this.md=t(Int32Array,d,824,1);this.Ib=t(Uint16Array,d,668,8);this.fc=t(Int32Array,d,684,8);this.td=t(Int32Array,
d,968,8);this.vf=t(Uint32Array,d,716,1);this.af=t(Uint32Array,d,720,1);this.Mb=[];this.ah=0;this.Pd=[];this.B=void 0;this.s=a;this.wd(0,0)}function Wa(a,b,c){b.length&&(a.l(c),a.l(c+b.length-1),a.ke(c,c+b.length),a.xb.set(b,c))}
function Bg(a){const b=c=>{const d=a.Ya.exports[c];console.assert(d,"Missing import: "+c);return d};a.Oa=b("reset_cpu");b("getiopl");b("get_eflags");b("handle_irqs");a.me=b("main_loop");a.oe=b("set_jit_config");a.Me=b("read8");a.sb=b("read16");a.h=b("read32s");a.Qg=b("write8");a.cg=b("write16");a.Ua=b("write32");a.l=b("in_mapped_range");b("fpu_load_tag_word");b("fpu_load_status_word");b("fpu_get_sti_f64");b("translate_address_system_read_js");a.he=b("get_seg_cs");b("get_real_eip");b("clear_tlb");
a.ge=b("full_clear_tlb");a.Dd=b("update_state_flags");a.wd=b("set_tsc");a.Ye=b("store_current_tsc");a.ne=b("set_cpuid_level");a.qb=b("device_raise_irq");a.jb=b("device_lower_irq");a.de=b("apic_timer");a.je=b("jit_clear_cache_js");a.ke=b("jit_dirty_cache");a.ee=b("codegen_finalize_finished");a.ce=b("allocate_memory");a.Ed=b("zero_memory");a.ie=b("is_memory_zeroed");a.$e=b("svga_allocate_memory");a.Ze=b("svga_allocate_dest_buffer");a.dg=b("svga_fill_pixel_buffer");a.yd=b("svga_mark_dirty");a.xc=b("get_pic_addr_master");
a.zc=b("get_pic_addr_slave");a.fa=b("get_apic_addr");a.ia=b("get_ioapic_addr");a.bj=b("zstd_create_ctx");a.dj=b("zstd_get_src_ptr");a.cj=b("zstd_free_ctx");a.tf=b("zstd_read");a.uf=b("zstd_read_free")}
ee.prototype.ha=function(){var a=[];a[0]=this.F[0];a[1]=new Uint8Array([...this.C,...this.v]);a[2]=this.pb;a[3]=this.Va;a[4]=this.Ka[0];a[5]=this.Gc[0];a[6]=this.Ic[0];a[7]=this.vc[0];a[8]=this.wc[0];a[9]=this.od[0];a[10]=this.Ab;a[11]=this.Rb[0];a[13]=this.sa[0];a[16]=this.Jb[0];a[17]=this.Kc[0];a[18]=this.ld[0];a[19]=this.hc[0];a[22]=this.zd[0];a[23]=this.Ad[0];a[24]=this.Bd[0];a[25]=this.rd[0];a[26]=this.flags[0];a[27]=this.ic[0];a[28]=this.ed[0];a[30]=this.fd[0];a[37]=this.pa[0];a[38]=this.sd[0];
a[39]=this.o;a[40]=this.Ib;a[41]=this.fc;a[42]=this.td;this.Ye();a[43]=this.fe;a[45]=this.A.Ve;a[46]=new Uint8Array(this.Ia.buffer,this.fa(),184);a[47]=this.A.Qe;a[48]=this.A.mb;a[49]=this.A.Lb;a[50]=this.A.Ca;a[52]=this.A.$d;a[53]=this.A.Tf;a[54]=this.A.Bh;a[55]=this.A.cd;this.A.Vb.Xd?a[85]=this.A.Vb:this.A.Vb.cc?.wb.qm?a[56]=this.A.Vb.cc:a[57]=this.A.Vb.cc;a[58]=this.A.Dg;a[59]=this.A.oa;var b=new Uint8Array(this.Ia.buffer,this.xc(),13),c=new Uint8Array(this.Ia.buffer,this.zc(),13),d=[];const e=
[];d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=e;d[6]=b[6];d[7]=b[7];d[8]=b[8];d[9]=b[9];d[10]=b[10];d[11]=b[11];d[12]=b[12];e[0]=c[0];e[1]=c[1];e[2]=c[2];e[3]=c[3];e[4]=c[4];e[5]=null;e[6]=c[6];e[7]=c[7];e[8]=c[8];e[9]=c[9];e[10]=c[10];e[11]=c[11];e[12]=c[12];a[60]=d;a[61]=this.A.rh;a[62]=this.Mb;a[63]=new Uint8Array(this.Ia.buffer,this.ia(),208);a[64]=this.Cd[0];a[66]=this.vd;a[67]=this.ec;a[68]=this.$[0];a[69]=this.aa[0];a[70]=this.D[0];a[71]=this.O[0];a[72]=this.X[0];a[73]=this.G[0];
a[74]=this.K[0];a[75]=this.Z[0];c=this.xb.length>>12;b=[];for(d=0;d<c;d++)this.ie(d<<12,4096)||b.push(d);c=new za(c);d=new Uint8Array(b.length<<12);for(const [f,k]of b.entries())c.set(k,1),b=k<<12,d.set(this.xb.subarray(b,b+4096),f<<12);const {pk:g,rj:h}={rj:c,pk:d};a[77]=g;a[78]=new Uint8Array(h.Cb());a[79]=this.A.pf;a[80]=this.A.qf;a[81]=this.A.rf;a[82]=this.A.be;a[83]=this.A.bg;a[84]=this.A.sf;a[86]=this.kd;a[87]=this.da;a[88]=this.md;return a};
ee.prototype.I=function(a){this.F[0]=a[0];this.xb.length!==this.F[0]&&console.warn("Note: Memory size mismatch. we="+this.xb.length+" state="+this.F[0]);8===a[1].length?(this.C.set(a[1]),this.v.fill(242),this.v[1]=250):16===a[1].length&&(this.C.set(a[1].subarray(0,8)),this.v.set(a[1].subarray(8,16)));this.pb.set(a[2]);this.Va.set(a[3]);this.Ka[0]=a[4];this.Gc[0]=a[5];this.Ic[0]=a[6];this.vc[0]=a[7];this.wc[0]=a[8];this.od[0]=a[9];this.Ab.set(a[10]);this.Rb[0]=a[11];this.sa[0]=a[13];this.Jb[0]=a[16];
this.Kc[0]=a[17];this.ld[0]=a[18];this.hc[0]=a[19];this.zd[0]=a[22];this.Ad[0]=a[23];this.Bd[0]=a[24];this.rd[0]=a[25];this.flags[0]=a[26];this.ic[0]=a[27];this.ed[0]=a[28];this.fd[0]=a[30];this.pa[0]=a[37];this.sd[0]=a[38];this.o.set(a[39]);this.Ib.set(a[40]);this.fc.set(a[41]);a[42]&&this.td.set(a[42]);this.wd(a[43][0],a[43][1]);this.A.Ve&&this.A.Ve.I(a[45]);if(a[46]){var b=a[46];if(b instanceof Array){var c=new Int32Array(this.Ia.buffer,this.fa(),46);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=
b[4];c[8]=b[6];c[9]=b[7];c[10]=b[8];c[11]=b[9];c[12]=b[10];c[13]=b[11];c[14]=b[12];c[15]=b[13];c.set(b[15],16);c.set(b[15],24);c.set(b[16],32);c[40]=b[17];c[41]=b[18];c[42]=b[19];c[43]=b[20];c[44]=b[21];c[45]=b[22]||65536}else(new Uint8Array(this.Ia.buffer,this.fa(),184)).set(b)}this.A.Qe&&this.A.Qe.I(a[47]);this.A.Lb&&this.A.Lb.I(a[49]);this.A.Ca&&this.A.Ca.I(a[50]);this.A.$d&&this.A.$d.I(a[52]);this.A.Tf&&this.A.Tf.I(a[53]);this.A.Bh&&this.A.Bh.I(a[54]);this.A.cd&&this.A.cd.I(a[55]);a[56]||a[57]?
(b=[[void 0,void 0],[void 0,void 0]],b[0][0]=a[56]?{vg:!0,buffer:this.A.P.buffer}:{vg:!1,buffer:this.A.Vb.cc.wb.buffer},this.A.Vb=new xf(this,this.A.Vb.s,b),this.A.P=a[56]?this.A.Vb.cc.wb:void 0,this.A.Vb.cc.I(a[56]||a[57])):a[85]&&this.A.Vb.I(a[85]);this.A.mb&&this.A.mb.I(a[48]);this.A.Dg&&this.A.Dg.I(a[58]);this.A.oa&&this.A.oa.I(a[59]);b=a[60];c=new Uint8Array(this.Ia.buffer,this.xc(),13);var d=new Uint8Array(this.Ia.buffer,this.zc(),13);c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];var e=
b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];d[4]=e[4];d[6]=e[6];d[7]=e[7];d[8]=e[8];d[9]=e[9];d[10]=e[10];d[11]=e[11];d[12]=e[12];this.A.rh&&this.A.rh.I(a[61]);this.A.pf&&this.A.pf.I(a[79]);this.A.qf&&this.A.qf.I(a[80]);this.A.rf&&this.A.rf.I(a[81]);this.A.be&&this.A.be.I(a[82]);this.A.bg&&this.A.bg.I(a[83]);this.A.sf&&this.A.sf.I(a[84]);this.Mb=a[62];a[63]&&(b=a[63],b instanceof Array?(c=new Int32Array(this.Ia.buffer,this.ia(),
52),c.set(b[0],0),c.set(b[1],24),c[48]=b[2],c[49]=b[3],c[50]=b[4],c[51]=b[5]):(new Uint8Array(this.Ia.buffer,this.ia(),208)).set(b));this.Cd[0]=a[64];this.vd.set(a[66]);this.ec.set(a[67]);this.$[0]=a[68];this.aa[0]=a[69];this.D[0]=a[70];this.O[0]=a[71];this.X[0]=a[72];this.G[0]=a[73];this.K[0]=a[74];this.Z[0]=a[75];void 0!==a[86]&&(this.kd=a[86]);void 0!==a[87]&&(this.da=a[87]);void 0!==a[88]&&(this.md=a[88]);b=new za(a[78].buffer);a=a[77];this.Ed(0,this.F[0]);c=this.F[0]>>12;d=0;for(e=0;e<c;e++)if(b.get(e)){const g=
d<<12;this.xb.set(a.subarray(g,g+4096),e<<12);d++}this.Dd();this.ge();this.je()};function we(a){a.Oa();a.Mb=[];a.A.Ve&&a.A.Ve.reset();a.A.be&&a.A.be.reset();a.A.bg&&a.A.bg.reset();a.A.Tf&&a.A.Tf.reset();he(a)}function Cg(a,b,c){b<c?b=c:0>(b|0)&&(b=Math.pow(2,31)-131072);b=(b-1|131071)+1|0;console.assert(0===a.F[0],"Expected uninitialised memory");a.F[0]=b;c=a.ce(b);a.xb=t(Uint8Array,a.Ia,c,b);t(Uint32Array,a.Ia,c,b>>2)}
ee.prototype.qc=function(a,b){Cg(this,a.F||67108864,a.Wb?67108864:1048576);a.Bf&&this.oe(0,1);a.Id&&this.ne(a.Id);this.Qb[0]=+a.Ca;this.Oa();var c=new Xa(this);this.B=c;this.zb.eh=a.zb;this.zb.$d=a.ae;he(this);if(a.Kb){const e=Ag(this.xb,a.Kb,a.Wb,a.Tb||"");e&&this.Pd.push(e)}x(c,179,this,function(){return 0});var d=0;x(c,146,this,function(){return d});w(c,146,this,function(e){d=e});x(c,1297,this,function(){return this.ah<this.Mb.length?this.Mb[this.ah++]:0});w(c,1296,this,void 0,function(e){function g(k){return new Uint8Array(Int32Array.of(k).buffer)}
function h(k){return k>>8|k<<8&65280}function f(k){return k<<24|k<<8&16711680|k>>8&65280|k>>>24}this.ah=0;if(0===e)this.Mb=g(1431127377);else if(1===e)this.Mb=g(0);else if(3===e)this.Mb=g(this.F[0]);else if(5===e)this.Mb=g(1);else if(15===e)this.Mb=g(1);else if(13===e)this.Mb=new Uint8Array(16);else if(25===e){e=new Int32Array(4+64*this.Pd.length);const k=new Uint8Array(e.buffer);e[0]=f(this.Pd.length);for(let m=0;m<this.Pd.length;m++){const {name:l,data:p}=this.Pd[m],q=4+64*m;e[q>>2]=f(p.length);
e[q+4>>2]=h(49152+m);for(let r=0;r<l.length;r++)k[q+8+r]=l.charCodeAt(r)}this.Mb=k}else this.Mb=32768<=e&&49152>e?g(0):49152<=e&&e-49152<this.Pd.length?this.Pd[e-49152].data:g(0)});this.A={};a.jk&&(this.A.mb=new se(this),this.Qb[0]&&(this.A.Ca=new ie(this)),this.A.Qe=new Pb(this),Dg(this,this.A.Qe,a),this.A.Lb=new Qa(this),this.A.$d=new dg(this,b,a.screen,a.va||8388608),this.A.Tf=new Ve(this,b),this.A.Bh=new le(this,1016,b),a.pf&&(this.A.pf=new le(this,760,b)),a.qf&&(this.A.qf=new le(this,1E3,b)),
a.rf&&(this.A.rf=new le(this,744,b)),this.A.cd=new kf(this,a.R,a.vb),c=[[void 0,void 0],[void 0,void 0]],a.L&&(c[0][0]={buffer:a.L},c[0][1]={buffer:a.Db}),c[1][0]={vg:!0,buffer:a.P},this.A.Vb=new xf(this,b,c),this.A.P=this.A.Vb.Xd.wb,this.A.Dg=new Tb(this,b),"ne2k"===a.Qc.type?this.A.oa=new Ae(this,b,a.Ke,a.Yb):"virtio"===a.Qc.type&&(this.A.bg=new ag(this,b,a.Ke,a.Qc.lb)),a.Jc?this.A.Ve=new Eg(a.Jc,this,b):a.rg?this.A.Ve=new Fg(a.rg,this):a.Li&&(this.A.Ve=new Gg(a.Li,this)),a.be&&(this.A.be=new Fe(this,
b)),a.sf&&(this.A.sf=new zg(this,b)),this.A.rh=new mb(this,b));a.$b&&(a=Hg(this,a.$b,a.Wb,a.Tb))&&(this.zb.eh?this.Pd.push(a):this.o[0]=db(this.B,244))};
function Hg(a,b,c,d){if(8192>b.byteLength){var e=new Int32Array(2048);(new Uint8Array(e.buffer)).set(new Uint8Array(b))}else e=new Int32Array(b,0,2048);for(var g=0;8192>g;g+=4){if(464367618===e[g>>2]){var h=e[g+4>>2];if(464367618+h+e[g+8>>2]|0)continue}else continue;var f=a;x(a.B,244,a,function(){return 0},function(){return 0},function(){var l=31860,p=0;if(d){p|=4;f.Ua(31760,l);d+="\x00";var q=(new TextEncoder).encode(d);Wa(f,q,l);l+=q.length}if(h&2){p|=64;q=0;f.Ua(31788,0);f.Ua(31792,l);var r=0;
var C=!1;for(let z=0;4294967296>z;z+=131072)C&&void 0!==f.g[z>>>17]?(f.Ua(l,20),f.Ua(l+4,r),f.Ua(l+8,0),f.Ua(l+12,z-r),f.Ua(l+16,0),f.Ua(l+20,1),l+=24,q+=24,C=!1):C||void 0!==f.g[z>>>17]||(r=z,C=!0);f.Ua(31788,q)}f.Ua(31744,p);q=p=0;if(h&65536){p=e[g+16>>2];var E=e[g+20>>2];q=e[g+24>>2];r=e[g+28>>2];C=new Uint8Array(b,g-(e[g+12>>2]-p),0===E?void 0:E-p);Wa(f,C,p);p=r|0;q=Math.max(E,q)}else if(1179403647===e[0]){r=new DataView(b);const [z,u]=gf(r,df);console.assert(52===u);console.assert(1179403647===
z.hi,"Bad magic");console.assert(1===z.re,"Unimplemented: 64 bit elf");console.assert(1===z.data,"Unimplemented: big endian");console.assert(1===z.Vl,"Bad version0");console.assert(2===z.type,"Unimplemented type");console.assert(1===z.Wl,"Bad version1");console.assert(52===z.Mj,"Bad header size");console.assert(32===z.si,"Bad program header size");console.assert(40===z.Si,"Bad section header size");[p]=hf(new DataView(r.buffer,r.byteOffset+z.rk,z.si*z.ti),ef,z.ti);hf(new DataView(r.buffer,r.byteOffset+
z.Ol,z.Si*z.Ti),ff,z.Ti);r=z;C=p;p=r.Sh;for(E of C)0!==E.type&&1===E.type&&E.Bg+E.gh<f.F[0]&&(E.Vh&&(C=new Uint8Array(b,E.offset,E.Vh),Wa(f,C,E.Bg)),q=Math.max(q,E.Bg+E.gh),p===r.Sh&&E.Ch<=p&&E.Ch+E.gh>p&&(p=p-E.Ch+E.Bg))}c&&(f.Ua(31764,1),f.Ua(31768,l),E=q,0!==(E&4095)&&(E=(E&-4096)+4096),q=E+c.byteLength,f.Ua(l,E),f.Ua(l+4,q),f.Ua(l+8,0),f.Ua(l+12,0),Wa(f,new Uint8Array(c),E));f.o[3]=31744;f.Ab[0]=1;f.Ka[0]=1;f.flags[0]=2;f.sa[0]=1;f.Jb[0]=1;for(l=0;6>l;l++)f.C[l]=0,f.pb[l]=0,f.Va[l]=4294967295,
f.Ib[l]=45058;f.pa[0]=f.he()+p|0;f.Dd();return 732803074});a.B.xd(244,a,function(l){console.log("Test exited with code "+fa(l,2));throw"HALT";},function(){},function(){},function(){});for(let l=0;15>=l;l++){function p(q){q?this.qb(l):this.jb(l)}w(a.B,8192+l,a,p,p,p)}a=new Uint8Array(512);(new Uint16Array(a.buffer))[0]=43605;a[2]=1;var k=3;a[k++]=102;a[k++]=229;a[k++]=244;let m=a[k]=0;for(let l=0;l<a.length;l++)m+=a[l];a[k]=-m;return{name:"genroms/multiboot.bin",data:a}}}
function Dg(a,b,c){var d=c.Sb||291;b.ja[56]=1|d>>4&240;b.ja[61]=d&255;b.ja[21]=128;b.ja[22]=2;d=0;1048576<=a.F[0]&&(d=a.F[0]-1048576>>10,d=Math.min(d,65535));b.ja[23]=d&255;b.ja[24]=d>>8&255;b.ja[48]=d&255;b.ja[49]=d>>8&255;d=0;16777216<=a.F[0]&&(d=a.F[0]-16777216>>16,d=Math.min(d,65535));b.ja[52]=d&255;b.ja[53]=d>>8&255;b.ja[91]=0;b.ja[92]=0;b.ja[93]=0;b.ja[20]=47;b.ja[95]=0;c.Uh&&(b.ja[63]=1)}
function he(a){var b=a.zb.eh,c=a.zb.$d;if(b){var d=new Uint8Array(b);Wa(a,d,1048576-b.byteLength);if(c){var e=new Uint8Array(c);Wa(a,e,786432);cb(a.B,4272947200,1048576,function(g){g=g-4272947200|0;return g<e.length?e[g]:0},function(){})}cb(a.B,4293918720,1048576,function(g){return this.xb[g&1048575]}.bind(a),function(g,h){this.xb[g&1048575]=h}.bind(a))}}
function Td(a,b,c,d,e,g){const h=new Uint8Array(a.Ia.buffer,e>>>0,g>>>0);WebAssembly.instantiate(h,{e:a.le}).then(f=>{a.Ya.Dh.set(b+1024,f.instance.exports.f);a.ee(b,c,d);a.oj&&a.oj(h)})};function Ge(a,b){this.u=a;this.mb=a.A.mb;this.ve=b.ve;this.S=[244,26,b.ve&255,b.ve>>8,7,5,16,0,1,0,2,0,0,0,0,0,1,168,0,0,0,16,191,254,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,b.Xf&255,b.Xf>>8,0,0,0,0,64,0,0,0,0,0,0,0,0,1,0,0];this.S=this.S.concat(Array(256-this.S.length).fill(0));this.nb=b.nb;this.bc=[];this.name=b.name;this.j=this.v=0;this.o=new Uint32Array(4);this.h=new Uint32Array(4);for(var c of b.te.features)this.o[c>>>5]|=1<<(c&31),this.h[c>>>5]|=1<<(c&31);b.te.features.includes(32);this.C=
!0;this.i=0;this.D=!1;this.G=0;this.T=[];for(var d of b.te.T)this.T.push(new Ig(a,this,d));this.l=0;this.g=this.T[0];this.Xb=0;c=[];c.push(Jg(this,b.te));c.push(Kg(b.notification));c.push(Lg(this,b.Xb));b.Af&&(d=c.push,b=b.Af,b={type:4,cf:3,port:b.ab,ag:!1,offset:0,Ef:new Uint8Array(0),Vc:b.Vc},d.call(c,b));Mg(this,c);je(a.A.mb,this);this.reset()}
function Jg(a,b){return{type:1,cf:0,port:b.ab,ag:!1,offset:0,Ef:new Uint8Array(0),Vc:[{bytes:4,name:"device_feature_select",read:()=>a.v,write:c=>{a.v=c}},{bytes:4,name:"device_feature",read:()=>a.o[a.v]||0,write:()=>{}},{bytes:4,name:"driver_feature_select",read:()=>a.j,write:c=>{a.j=c}},{bytes:4,name:"driver_feature",read:()=>a.h[a.j]||0,write:c=>{const d=a.o[a.j];a.j<a.h.length&&(a.h[a.j]=c&d);a.C=a.C&&!(c&~d)}},{bytes:2,name:"msix_config",read:()=>65535,write:()=>{}},{bytes:2,name:"num_queues",
read:()=>a.T.length,write:()=>{}},{bytes:1,name:"device_status",read:()=>a.i,write:c=>{0===c&&a.reset();c&~a.i&4&&a.i&64&&(a.D=!0,a.i&4&&a.$a(2));a.C||(c&=-9);a.i=c}},{bytes:1,name:"config_generation",read:()=>a.G,write:()=>{}},{bytes:2,name:"queue_select",read:()=>a.l,write:c=>{a.l=c;a.l<a.T.length?a.g=a.T[a.l]:a.g=null}},{bytes:2,name:"queue_size",read:()=>a.g?a.g.size:0,write:c=>{if(a.g){c&c-1&&(c=1<<ia(c-1)+1);c>a.g.Xa&&(c=a.g.Xa);var d=a.g;d.size=c;d.ea=c-1}}},{bytes:2,name:"queue_msix_vector",
read:()=>65535,write:()=>{}},{bytes:2,name:"queue_enable",read:()=>a.g?a.g.enabled|0:0,write:c=>{a.g&&1===c&&Re(a.g)&&(a.g.enabled=!0)}},{bytes:2,name:"queue_notify_off",read:()=>a.g?a.g.hb:0,write:()=>{}},{bytes:4,name:"queue_desc (low dword)",read:()=>a.g?a.g.l:0,write:c=>{a.g&&(a.g.l=c)}},{bytes:4,name:"queue_desc (high dword)",read:()=>0,write:()=>{}},{bytes:4,name:"queue_avail (low dword)",read:()=>a.g?a.g.g:0,write:c=>{a.g&&(a.g.g=c)}},{bytes:4,name:"queue_avail (high dword)",read:()=>0,write:()=>
{}},{bytes:4,name:"queue_used (low dword)",read:()=>a.g?a.g.h:0,write:c=>{a.g&&(a.g.h=c)}},{bytes:4,name:"queue_used (high dword)",read:()=>0,write:()=>{}}]}}function Kg(a){const b=[];let c;c=a.Jg?0:2;for(const [d,e]of a.sg.entries())b.push({bytes:2,name:"notify"+d,read:()=>65535,write:e||(()=>{})});return{type:2,cf:1,port:a.ab,ag:!1,offset:0,Ef:new Uint8Array([c&255,c>>8&255,c>>16&255,c>>24]),Vc:b}}
function Lg(a,b){return{type:3,cf:2,port:b.ab,ag:!1,offset:0,Ef:new Uint8Array(0),Vc:[{bytes:1,name:"isr_status",read:()=>{const c=a.Xb;a.Xb=0;xe(a.mb,a.nb);return c},write:()=>{}}]}}
function Mg(a,b){let c=a.S[52]=64;var d=c;for(const g of b){b=16+g.Ef.length;d=c;c=d+b;var e=g.Vc.reduce((h,f)=>h+f.bytes,0);e+=g.offset;e=16>e?16:1<<ia(e-1)+1;a.bc[g.cf]={size:e};a.S[d]=9;a.S[d+1]=c;a.S[d+2]=b;a.S[d+3]=g.type;a.S[d+4]=g.cf;a.S[d+5]=0;a.S[d+6]=0;a.S[d+7]=0;a.S[d+8]=g.offset&255;a.S[d+9]=g.offset>>>8&255;a.S[d+10]=g.offset>>>16&255;a.S[d+11]=g.offset>>>24;a.S[d+12]=e&255;a.S[d+13]=e>>>8&255;a.S[d+14]=e>>>16&255;a.S[d+15]=e>>>24;for(const [h,f]of g.Ef.entries())a.S[d+16+h]=f;d=16+4*
g.cf;a.S[d]=g.port&254|!g.ag;a.S[d+1]=g.port>>>8&255;a.S[d+2]=g.port>>>16&255;a.S[d+3]=g.port>>>24&255;d=g.port+g.offset;for(const h of g.Vc){let f=h.read;b=h.write;if(!g.ag){e=function(l){return f(l&-2)>>((l&1)<<3)&255};const k=function(l){return f(l&-4)>>((l&3)<<3)&255},m=function(l){return f(l)};switch(h.bytes){case 4:x(a.u.B,d,a,k,void 0,f);x(a.u.B,d+1,a,k);x(a.u.B,d+2,a,k);x(a.u.B,d+3,a,k);w(a.u.B,d,a,void 0,void 0,b);break;case 2:x(a.u.B,d,a,e,f,m);x(a.u.B,d+1,a,e);w(a.u.B,d,a,void 0,b);break;
case 1:x(a.u.B,d,a,f),w(a.u.B,d,a,b)}}d+=h.bytes}}a.S[c]=9;a.S[c+1]=0;a.S[c+2]=20;a.S[c+3]=5;a.S[c+4]=0;a.S[c+5]=0;a.S[c+6]=0;a.S[c+7]=0;a.S[c+8]=0;a.S[c+9]=0;a.S[c+10]=0;a.S[c+11]=0;a.S[c+12]=0;a.S[c+13]=0;a.S[c+14]=0;a.S[c+15]=0;a.S[c+16]=0;a.S[c+17]=0;a.S[c+18]=0;a.S[c+19]=0}Ge.prototype.ha=function(){let a=[];a[0]=this.v;a[1]=this.j;a[2]=this.o;a[3]=this.h;a[4]=this.C;a[5]=this.i;a[6]=this.D;a[7]=this.G;a[8]=this.Xb;a[9]=this.l;return a=a.concat(this.T)};
Ge.prototype.I=function(a){this.v=a[0];this.j=a[1];this.o=a[2];this.h=a[3];this.C=a[4];this.i=a[5];this.D=a[6];this.G=a[7];this.Xb=a[8];this.l=a[9];let b=0;for(const c of a.slice(10))this.T[b].I(c),b++;this.g=this.T[this.l]||null};Ge.prototype.reset=function(){this.j=this.v=0;this.h.set(this.o);this.C=!0;this.l=this.i=0;this.g=this.T[0];for(const a of this.T)a.reset();this.D=!1;this.Xb=this.G=0;xe(this.mb,this.nb)};Ge.prototype.$a=function(a){this.Xb|=a;this.mb.$a(this.nb)};
function Ig(a,b,c){this.u=a;this.N=b;this.Xa=this.size=c.Xa;this.ea=this.size-1;this.enabled=!1;this.hb=c.hb;this.j=this.h=this.i=this.g=this.l=0;this.reset()}Ig.prototype.ha=function(){const a=[];a[0]=this.size;a[1]=this.Xa;a[2]=this.enabled;a[3]=this.hb;a[4]=this.l;a[5]=this.g;a[6]=this.i;a[7]=this.h;a[8]=this.j;a[9]=1;return a};
Ig.prototype.I=function(a){this.size=a[0];this.Xa=a[1];this.enabled=a[2];this.hb=a[3];this.l=a[4];this.g=a[5];this.i=a[6];this.h=a[7];this.j=a[8];this.ea=this.size-1;this.o=1!==a[9]};Ig.prototype.reset=function(){this.enabled=!1;this.j=this.h=this.i=this.g=this.l=0;var a=this.Xa;this.size=a;this.ea=a-1};function Re(a){return a.l&&a.g&&a.h}function He(a){a.o&&(a.o=!1,a.i=(a.u.sb(a.g+2)&~a.ea)+(a.i&a.ea));return 0!==(a.u.sb(a.g+2)-a.i&65535)}
function Ie(a){He(a);var b=a.u.sb(a.g+4+2*(a.i&a.ea));b=new Ng(a,b);a.i=a.i+1&65535;return b}function Te(a,b){const c=a.u.sb(a.h+2)+a.j&a.ea;var d=b.l;a.u.Ua(a.h+4+8*c,b.D);a.u.Ua(a.h+8+8*c,d);a.j++}function Ue(a){if(0!==a.j){var b=a.u.sb(a.h+2)+a.j&65535;a.u.cg(a.h+2,b);a.j=0;0<(a.N.h[0]&536870912)?(a.u.sb(a.g+4+2*a.size),a.N.$a(1)):~a.u.sb(a.g)&1&&a.N.$a(1)}}
function Ng(a,b){this.u=a.u;this.N=a.N;this.D=b;this.v=[];this.Eb=this.g=this.o=0;this.i=[];this.j=this.l=this.h=this.C=0;let c=a.l;var d=b;b=0;let e=a.size,g=!1;const h=0<(this.N.h[0]&268435456);do{var f=a,k=c;f={eg:f.u.h(k+16*d),fm:f.u.h(k+16*d+4),nd:f.u.h(k+16*d+8),flags:f.u.sb(k+16*d+12),next:f.u.sb(k+16*d+14)};if(h&&f.flags&4)c=f.eg,b=d=0,e=f.nd/16;else{if(f.flags&2)g=!0,this.i.push(f),this.j+=f.nd;else{if(g)break;this.v.push(f);this.Eb+=f.nd}b++;if(b>e)break;if(f.flags&1)d=f.next;else break}}while(1)}
function Je(a,b){let c=0,d=b.length;for(;d&&a.o!==a.v.length;){var e=a.v[a.o],g=e.eg+a.g;let m=e.nd-a.g;m>d?(m=d,a.g+=d):(a.o++,a.g=0);e=b;var h=e.set,f=a.u,k=m;k&&(f.l(g),f.l(g+k-1));h.call(e,f.xb.subarray(g,g+k),c);c+=m;d-=m}}function Se(a,b){let c=0,d=b.length;for(;d&&a.C!==a.i.length;){var e=a.i[a.C];const g=e.eg+a.h;e=e.nd-a.h;e>d?(e=d,a.h+=d):(a.C++,a.h=0);Wa(a.u,b.subarray(c,c+e),g);c+=e;d-=e}a.l+=c};function Og(a,b,c,d){const e=new Ge(a,{name:"virtio-9p",nb:48,ve:4169,Xf:9,te:{ab:43008,T:[{Xa:32,hb:0}],features:[0,32,29,28],ih:()=>{}},notification:{ab:43264,Jg:!1,sg:[g=>{if(0===g){for(g=e.T[0];He(g);){var h=Ie(g);d(h)}h=g.u.sb(g.g+2)+0&65535;g.u.cg(g.h+4+8*g.size,h)}}]},Xb:{ab:42752},Af:{ab:42496,Vc:[{bytes:2,name:"mount tag length",read:()=>b,write:()=>{}}].concat(Array.from(Array(254).keys()).map(g=>({bytes:1,name:"mount tag name "+g,read:()=>c[g]||0,write:()=>{}})))}});return e}
function Eg(a,b,c){this.h=a;this.s=c;this.o=[104,111,115,116,57,112];this.D=this.o.length;this.N=Og(b,this.D,this.o,this.K.bind(this));this.G=this.N.T[0];this.C="9P2000.L";this.j=this.l=8192;this.i=new Uint8Array(2*this.j);this.v=0;this.g=[]}Eg.prototype.ha=function(){var a=[];a[0]=this.o;a[1]=this.D;a[2]=this.N;a[3]=this.C;a[4]=this.l;a[5]=this.j;a[6]=this.i;a[7]=this.v;a[8]=this.g.map(function(b){return[b.qa,b.type,b.uid,b.$c]});a[9]=this.h;return a};
Eg.prototype.I=function(a){this.o=a[0];this.D=a[1];this.N.I(a[2]);this.G=this.N.T[0];this.C=a[3];this.l=a[4];this.j=a[5];this.i=a[6];this.v=a[7];this.g=a[8].map(function(b){return{qa:b[0],type:b[1],uid:b[2],$c:b[3]}});this.h.I(a[9])};Eg.prototype.reset=function(){this.g=[];this.N.reset()};function W(a,b,c,d){G(["w","b","h"],[d+7,b+1,c],a.i,0);a.v=d+7}function Pg(a,b,c){c=G(["w"],[c],a.i,7);W(a,6,b,c)}function Y(a,b){Se(b,a.i.subarray(0,a.v));Te(a.G,b);Ue(a.G)}
Eg.prototype.K=async function(a){var b=new Uint8Array(a.Eb);Je(a,b);var c={offset:0},d=K(["w","b","h"],b,c),e=d[1];d=d[2];switch(e){case 8:var g=Hd(this.h);var h=Id(this.h),f=[16914839];f[1]=this.l;f[2]=Math.floor(h/f[1]);f[3]=f[2]-Math.floor(g/f[1]);f[4]=f[2]-Math.floor(g/f[1]);f[5]=Fd(this.h);f[6]=Gd(this.h);f[7]=0;f[8]=256;g=G("wwddddddw".split(""),f,this.i,7);W(this,e,d,g);Y(this,a);break;case 112:case 12:f=K(["w","w"],b,c);g=f[0];c=f[1];f=this.g[g].qa;b=xd(this.h,f);await pd(this.h,f,c);f=[];
f[0]=b.bb;f[1]=this.j-24;G(["Q","w"],f,this.i,7);W(this,e,d,17);Y(this,a);break;case 70:f=K(["w","w","s"],b,c);b=f[0];g=f[1];h=f[2];g=Jd(this.h,this.g[b].qa,this.g[g].qa,h);if(0>g){Pg(this,d,-g);Y(this,a);break}W(this,e,d,0);Y(this,a);break;case 16:f=K(["w","s","s","w"],b,c);g=f[0];h=f[1];var k=f[3];f=md(this.h,h,this.g[g].qa,f[2]);b=xd(this.h,f);b.uid=this.g[g].uid;b.kb=k;G(["Q"],[b.bb],this.i,7);W(this,e,d,13);Y(this,a);break;case 18:f=K("wswwww".split(""),b,c);g=f[0];h=f[1];c=f[2];b=f[3];var m=
f[4];k=f[5];f=ld(this.h,h,this.g[g].qa,b,m);b=xd(this.h,f);b.mode=c;b.uid=this.g[g].uid;b.kb=k;G(["Q"],[b.bb],this.i,7);W(this,e,d,13);Y(this,a);break;case 22:f=K(["w"],b,c);g=f[0];b=xd(this.h,this.g[g].qa);g=G(["s"],[b.Yf],this.i,7);W(this,e,d,g);Y(this,a);break;case 72:f=K(["w","s","w","w"],b,c);g=f[0];h=f[1];c=f[2];k=f[3];f=Zc(this.h,h,this.g[g].qa);b=xd(this.h,f);b.mode=c|16384;b.uid=this.g[g].uid;b.kb=k;G(["Q"],[b.bb],this.i,7);W(this,e,d,13);Y(this,a);break;case 14:f=K(["w","s","w","w","w"],
b,c);g=f[0];h=f[1];c=f[3];k=f[4];this.s.send("9p-create",[h,this.g[g].qa]);f=kd(this.h,h,this.g[g].qa);this.g[g].qa=f;this.g[g].type=1;this.g[g].$c=h;b=xd(this.h,f);b.uid=this.g[g].uid;b.kb=k;b.mode=c|32768;G(["Q","w"],[b.bb,this.j-24],this.i,7);W(this,e,d,17);Y(this,a);break;case 52:f=K("wbwddws".split(""),b,c);g=f[0];h=f[2];b=0===f[4]?Infinity:f[4];f=Od(f[1],f[3],b,f[5],f[6]);g=Qd(this.h,this.g[g].qa,f,h);G(["b"],[g],this.i,7);W(this,e,d,1);Y(this,a);break;case 54:f=K("wbddws".split(""),b,c);g=
f[0];b=0===f[3]?Infinity:f[3];f=Od(f[1],f[2],b,f[4],f[5]);g=Pd(this.h,this.g[g].qa,f);g||(g=f,g.type=2);g=G(["b","d","d","w","s"],[g.type,g.start,Infinity===g.length?0:g.length,g.h,g.g],this.i,7);W(this,e,d,g);Y(this,a);break;case 24:f=K(["w","d"],b,c);g=f[0];b=xd(this.h,this.g[g].qa);if(!b||4===b.status){Pg(this,d,2);Y(this,a);break}f[0]=f[1];f[1]=b.bb;f[2]=b.mode;f[3]=b.uid;f[4]=b.kb;f[5]=b.Fb;f[6]=b.wg<<8|b.xg;f[7]=b.size;f[8]=this.l;f[9]=Math.floor(b.size/512+1);f[10]=b.qe;f[11]=0;f[12]=b.qd;
f[13]=0;f[14]=b.df;f[15]=0;f[16]=0;f[17]=0;f[18]=0;f[19]=0;G("dQwwwddddddddddddddd".split(""),f,this.i,7);W(this,e,d,153);Y(this,a);break;case 26:f=K("wwwwwddddd".split(""),b,c);g=f[0];b=xd(this.h,this.g[g].qa);f[1]&1&&(b.mode=f[2]);f[1]&2&&(b.uid=f[3]);f[1]&4&&(b.kb=f[4]);f[1]&16&&(b.qe=Math.floor((new Date).getTime()/1E3));f[1]&32&&(b.qd=Math.floor((new Date).getTime()/1E3));f[1]&64&&(b.df=Math.floor((new Date).getTime()/1E3));f[1]&128&&(b.qe=f[6]);f[1]&256&&(b.qd=f[8]);f[1]&8&&await Ad(this.h,
this.g[g].qa,f[5]);W(this,e,d,0);Y(this,a);break;case 50:K(["w","d"],b,c);W(this,e,d,0);Y(this,a);break;case 40:case 116:f=K(["w","d","w"],b,c);g=f[0];h=f[1];f=f[2];b=xd(this.h,this.g[g].qa);if(!b||4===b.status){Pg(this,d,2);Y(this,a);break}if(2===this.g[g].type){(void 0).length<h+f&&(f=(void 0).length-h);for(k=0;k<f;k++)this.i[11+k]=(void 0)[h+k];G(["w"],[f],this.i,7);W(this,e,d,4+f)}else{await pd(this.h,this.g[g].qa,void 0);c=this.g[g].qa;f=Math.min(f,this.i.length-11);if(b.size<h+f)f=b.size-h;
else if(40===e){f=h+f;m=this.h.h[c];if(f>=m.length)f=m.length;else{for(k=0;;){var l=K(["Q","d"],m,{offset:k})[1];if(l>f)break;k=l}f=k}f-=h}h>b.size&&(f=0);this.s.send("9p-read-start",[this.g[g].$c]);h=await yd(this.h,c,h,f);this.s.send("9p-read-end",[this.g[g].$c,f]);h&&this.i.set(h,11);G(["w"],[f],this.i,7);W(this,e,d,4+f)}Y(this,a);break;case 118:f=K(["w","d","w"],b,c);g=f[0];h=f[1];f=f[2];k=this.g[g].$c;if(2===this.g[g].type){Pg(this,d,95);Y(this,a);break}else await Bd(this.h,this.g[g].qa,h,f,
b.subarray(c.offset));this.s.send("9p-write-end",[k,f]);G(["w"],[f],this.i,7);W(this,e,d,4);Y(this,a);break;case 74:f=K(["w","s","w","s"],b,c);g=await td(this.h,this.g[f[0]].qa,f[1],this.g[f[2]].qa,f[3]);if(0>g){Pg(this,d,-g);Y(this,a);break}W(this,e,d,0);Y(this,a);break;case 76:f=K(["w","s","w"],b,c);b=f[0];h=f[1];g=gd(this.h,this.g[b].qa,h);if(-1===g){Pg(this,d,2);Y(this,a);break}g=wd(this.h,this.g[b].qa,h);if(0>g){Pg(this,d,-g);Y(this,a);break}W(this,e,d,0);Y(this,a);break;case 100:g=K(["w","s"],
b,c);this.j!==g[0]&&(this.j=g[0],this.i=new Uint8Array(Math.min(16777216,2*this.j)));g=G(["w","s"],[this.j,this.C],this.i,7);W(this,e,d,g);Y(this,a);break;case 104:f=K(["w","w","s","s","w"],b,c);g=f[0];this.g[g]={qa:0,type:1,uid:f[4],$c:""};b=xd(this.h,this.g[g].qa);G(["Q"],[b.bb],this.i,7);W(this,e,d,13);Y(this,a);this.s.send("9p-attach");break;case 108:K(["h"],b,c);W(this,e,d,0);Y(this,a);break;case 110:f=K(["w","w","h"],b,c);g=f[0];m=f[1];l=f[2];if(0===l){this.g[m]={qa:this.g[g].qa,type:1,uid:this.g[g].uid,
$c:this.g[g].$c};G(["h"],[0],this.i,7);W(this,e,d,2);Y(this,a);break}h=[];for(k=0;k<l;k++)h.push("s");b=K(h,b,c);f=this.g[g].qa;h=9;for(k=c=0;k<l;k++){f=gd(this.h,f,b[k]);if(-1===f)break;h+=G(["Q"],[xd(this.h,f).bb],this.i,h);c++;this.g[m]={qa:f,type:1,uid:this.g[g].uid,$c:b[k]}}G(["h"],[c],this.i,7);W(this,e,d,h-7);Y(this,a);break;case 120:f=K(["w"],b,c);this.g[f[0]]&&0<=this.g[f[0]].qa&&(await rd(this.h,this.g[f[0]].qa),this.g[f[0]].qa=-1,this.g[f[0]].type=-1);W(this,e,d,0);Y(this,a);break;case 32:f=
K(["w","s","d","w"],b,c);g=f[0];this.g[g].type=2;W(this,e,d,0);Y(this,a);break;case 30:K(["w","w","s"],b,c),Pg(this,d,95),Y(this,a)}};
function Fg(a,b){this.l=a;this.g=new Map;this.h=[104,111,115,116,57,112];this.i=this.h.length;this.N=Og(b,this.i,this.h,async c=>{const d=new Uint8Array(c.Eb);Je(c,d);var e=K(["w","b","h"],d,{offset:0})[2];this.g.set(e,c);this.l(d,g=>{var h=K(["w","b","h"],g,{offset:0})[2];const f=this.g.get(h);f?(Se(f,g),Te(this.j,f),Ue(this.j),this.g.delete(h)):console.error("No bufchain found for tag: "+h)})});this.j=this.N.T[0]}
Fg.prototype.ha=function(){var a=[];a[0]=this.h;a[1]=this.i;a[2]=this.N;a[3]=this.g;return a};Fg.prototype.I=function(a){this.h=a[0];this.i=a[1];this.N.I(a[2]);this.j=this.N.T[0];this.g=a[3]};Fg.prototype.reset=function(){this.N.reset()};
function Gg(a,b){this.g=void 0;this.u=b;this.h=[];this.url=a;this.C=Date.now()-1E4;this.v=!1;this.i=new Map;this.j=[104,111,115,116,57,112];this.l=this.j.length;this.N=Og(b,this.l,this.j,async c=>{const d=new Uint8Array(c.Eb);Je(c,d);const e=K(["w","b","h"],d,{offset:0})[2];this.i.set(e,c);this.send(d)});this.o=this.N.T[0]}n=Gg.prototype;n.ha=function(){var a=[];a[0]=this.j;a[1]=this.l;a[2]=this.N;a[3]=this.i;return a};
n.I=function(a){this.j=a[0];this.l=a[1];this.N.I(a[2]);this.o=this.N.T[0];this.i=a[3]};n.reset=function(){this.N.reset()};n.mj=function(a){a=new Uint8Array(a.data);const b=K(["w","b","h"],a,{offset:0})[2],c=this.i.get(b);c?(Se(c,a),Te(this.o,c),Ue(this.o),this.i.delete(b)):console.error("Virtio9pProxy: No bufchain found for tag: "+b)};n.kj=function(){this.v||(this.connect(),setTimeout(this.connect.bind(this),1E4))};n.nj=function(){for(var a=0;a<this.h.length;a++)this.send(this.h[a]);this.h=[]};
n.lj=function(){};n.Da=function(){this.v=!0;this.g&&this.g.close()};n.connect=function(){if("undefined"!==typeof WebSocket){if(this.g){var a=this.g.readyState;if(0===a||1===a)return}if(!(this.C+1E4>Date.now())){this.C=Date.now();try{this.g=new WebSocket(this.url)}catch(b){console.error(b);return}this.g.binaryType="arraybuffer";this.g.onopen=this.nj.bind(this);this.g.onmessage=this.mj.bind(this);this.g.onclose=this.kj.bind(this);this.g.onerror=this.lj.bind(this)}}};
n.send=function(a){this.g&&1===this.g.readyState?this.g.send(a):(this.h.push(a),128<this.h.length&&(this.h=this.h.slice(-64)),this.connect())};function Qg(a){function b(A){return 1+Math.floor((A-1)/2048)}function c(A){const v=A.lastIndexOf(".");return-1===v?A.substr(0,8):A.substr(0,Math.min(8,v))+"."+A.substr(v+1,3)}const d=new TextEncoder,e=new Date,g=(A,v)=>{A.buffer[A.offset++]=v;A.buffer[A.offset++]=v>>8},h=(A,v)=>{A.buffer[A.offset++]=v;A.buffer[A.offset++]=v>>8;A.buffer[A.offset++]=v>>16;A.buffer[A.offset++]=v>>24},f=(A,v)=>{A.buffer[A.offset++]=v>>8;A.buffer[A.offset++]=v},k=(A,v)=>{A.buffer[A.offset++]=v>>24;A.buffer[A.offset++]=
v>>16;A.buffer[A.offset++]=v>>8;A.buffer[A.offset++]=v},m=(A,v)=>{g(A,v);f(A,v)},l=(A,v)=>{h(A,v);k(A,v)},p=(A,v,H)=>{A.buffer.fill(H,A.offset,A.offset+=v)},q=(A,v)=>{A.offset+=d.encodeInto(v,A.buffer.subarray(A.offset)).written},r=A=>{p(A,16,32);A.buffer[A.offset++]=0},C=(A,v,H,N,P,da)=>{N||(v=c(v.toUpperCase().replace(/[^A-Z0-9_.]/g,""))+";1");A=d.encodeInto(v,A.buffer.subarray(A.offset+33)).written;v=A&1?0:1;u.buffer[u.offset++]=33+A+v;u.buffer[u.offset++]=0;l(u,P);l(u,da);P=u;da=e.getUTCFullYear()-
1900;P.buffer[P.offset++]=da;da=1+e.getUTCMonth();P.buffer[P.offset++]=da;da=e.getUTCDate();P.buffer[P.offset++]=da;da=e.getUTCHours();P.buffer[P.offset++]=da;da=e.getUTCMinutes();P.buffer[P.offset++]=da;da=e.getUTCSeconds();P.buffer[P.offset++]=da;P.buffer[P.offset++]=0;u.buffer[u.offset++]=H;u.buffer[u.offset++]=0;u.buffer[u.offset++]=0;m(u,1);u.buffer[u.offset++]=A;u.offset+=A+v};aa(0===b(0));aa(1===b(1));aa(1===b(2047));aa(1===b(2048));aa(2===b(2049));aa(2===b(4096));aa(3===b(4097));aa(11===b(20481));
aa("abcdefgh.qwe"===c("abcdefghijkl.qwerty"));aa("abcdefgh"===c("abcdefghijkl"));let E=24;a=a.map(({name:A,jg:v})=>{const H=E;E+=b(v.length);A=c(A);return{name:A,jg:v,gi:H}});const z=E,u={buffer:new Uint8Array(2048*z),offset:32768};u.buffer[u.offset++]=1;q(u,"CD001");u.buffer[u.offset++]=1;u.buffer[u.offset++]=0;u.offset+=d.encodeInto("V86".padEnd(32),u.buffer.subarray(u.offset)).written;u.offset+=d.encodeInto("CDROM".padEnd(32),u.buffer.subarray(u.offset)).written;u.offset+=8;l(u,z);u.offset+=32;
m(u,1);m(u,1);m(u,2048);l(u,10);h(u,19);h(u,0);k(u,21);k(u,0);C(u,"\x00",2,!0,23,2048);p(u,128,32);p(u,128,32);p(u,128,32);p(u,128,32);p(u,37,32);p(u,37,32);p(u,37,32);r(u);r(u);r(u);r(u);u.buffer[u.offset++]=1;u.buffer[u.offset++]=0;u.offset+=512;u.offset+=653;u.buffer[u.offset++]=255;q(u,"CD001");u.buffer[u.offset++]=1;u.offset=38912;u.buffer[u.offset++]=1;u.buffer[u.offset++]=0;h(u,23);g(u,1);q(u,"\x00");u.offset=43008;u.buffer[u.offset++]=1;u.buffer[u.offset++]=0;k(u,23);f(u,1);q(u,"\x00");u.offset=
47104;C(u,"\x00",2,!0,23,2048);C(u,"\u0001",2,!0,23,2048);for(const {name:A,jg:v,gi:H}of a)C(u,A,0,!1,H,v.length);for(let {jg:A,gi:v}of a)u.buffer.set(A,2048*v);return u.buffer};const Rg=!location.hostname.endsWith("copy.sh"),Sg=["wss://relay.widgetry.org/","ws://localhost:8080/"];function Tg(){const a=Z("version");return a?"?"+a.textContent:""}function Ug(a){document.title=a+" - v86";const b=document.querySelector("meta[name=description]");b&&(b.content="Running "+a)}function Vg(a){return!!a&&"0"!==a}function Wg(a){return new Promise((b,c)=>{const d=new FileReader;d.onload=()=>b(d.result);d.onerror=e=>c(e);d.readAsArrayBuffer(a)})}let Xg=0;
function Z(a){return document.getElementById(a)}const Yg="memory_size video_memory_size networking_proxy disable_audio enable_acpi boot_order".split(" ");for(const a of Yg)try{window.localStorage.removeItem(a)}catch(b){}
function Zg(){function a(){const k=[];for(const m of f){const l=m.filter(p=>p.element.checked);l.length&&k.push(l)}for(const m of h)m.element.style.display=k.every(l=>l.some(p=>p.Ma(m)))?"":"none"}function b(k,m){if(k=Z(k))k.onclick=()=>Z("relay_url").value=m}if(window.WebAssembly){Z("start_emulation").onclick=function(k){$g(null,null);Z("start_emulation").blur();k.preventDefault()};var c=new URLSearchParams(location.search),d=c.get("cdn")||(Rg?"images/":"//i.copy.sh/");d=[{id:"archlinux",name:"Arch Linux",
F:536870912,va:8388608,state:{url:d+"arch_state-v3.bin.zst"},filesystem:{fg:d+"arch/"},ac:"virtio"},{id:"archlinux-boot",name:"Arch Linux",F:536870912,va:8388608,filesystem:{fg:d+"arch/",qj:{url:d+"fs.json"}},Tb:"rw apm=off vga=0x344 video=vesafb:ypan,vremap:8 root=host9p rootfstype=9p rootflags=trans=virtio,cache=loose mitigations=off audit=0 init_on_free=on tsc=reliable random.trust_cpu=on nowatchdog init=/usr/bin/init-openrc net.ifnames=0 biosdevname=0",xf:!0,ac:"virtio"},{id:"copy/skiffos",name:"SkiffOS",
P:{url:d+"skiffos/.iso",size:124672E3,async:!0,M:1048576,ba:!0},F:536870912},{id:"serenity",name:"SerenityOS",L:{url:d+"serenity-v3/.img.zst",size:734003200,async:!0,M:1048576,ba:!0},F:536870912,state:{url:d+"serenity_state-v4.bin.zst"},H:"https://serenityos.org/",Yb:!0},{id:"serenity-boot",name:"SerenityOS",L:{url:d+"serenity-v3/.img.zst",size:734003200,async:!0,M:1048576,ba:!0},F:536870912,H:"https://serenityos.org/"},{id:"redox",name:"Redox",L:{url:d+"redox_demo_i686_2024-09-07_1225_harddrive/.img",
size:671088640,async:!0,M:1048576,ba:!0},F:1073741824,state:{url:d+"redox_state-v2.bin.zst"},H:"https://www.redox-os.org/",Ca:!0},{id:"redox-boot",name:"Redox",L:{url:d+"redox_demo_i686_2024-09-07_1225_harddrive/.img",size:671088640,async:!0,M:1048576,ba:!0},F:1073741824,H:"https://www.redox-os.org/",Ca:!0},{id:"helenos",F:268435456,P:{url:d+"HelenOS-0.14.1-ia32.iso",size:25792512,async:!1},name:"HelenOS",H:"http://www.helenos.org/"},{id:"fiwix",F:268435456,L:{url:d+"FiwixOS-3.4-i386/.img",size:1073741824,
async:!0,M:1048576,ba:!0},name:"FiwixOS",H:"https://www.fiwix.org/"},{id:"haiku",F:536870912,L:{url:d+"haiku-v5/.img",size:1342177280,async:!0,M:1048576,ba:!0},state:{url:d+"haiku_state-v5.bin.zst"},name:"Haiku",H:"https://www.haiku-os.org/",Ca:!0},{id:"haiku-boot",F:536870912,L:{url:d+"haiku-v5/.img",size:1342177280,async:!0,M:1048576,ba:!0},name:"Haiku",H:"https://www.haiku-os.org/",Ca:!0},{id:"beos",F:536870912,L:{url:d+"beos5/.img",size:536870912,async:!0,M:1048576,ba:!0},name:"BeOS 5"},{id:"msdos",
L:{url:d+"msdos622/.img",size:67108864,async:!0,M:262144,ba:!0},name:"MS-DOS 6.22"},{id:"msdos4",R:{url:d+"msdos4.img",size:1474560},name:"MS-DOS 4"},{id:"freedos",R:{url:d+"freedos722.img",size:737280},name:"FreeDOS"},{id:"freegem",L:{url:d+"freegem/.bin",size:209715200,async:!0,M:262144,ba:!0},name:"Freedos with FreeGEM"},{id:"xcom",R:{url:d+"xcom144.img",size:1474560},name:"Freedos with Xcom",H:"http://xcom.infora.hu/index.html"},{id:"psychdos",L:{url:d+"psychdos/.img",size:549453824,async:!0,
M:262144,ba:!0},name:"PsychDOS",H:"https://psychoslinux.gitlab.io/DOS/INDEX.HTM"},{id:"86dos",R:{url:d+"pc86dos.img",size:163840},name:"86-DOS",H:"https://www.os2museum.com/wp/pc-86-dos/"},{id:"oberon",L:{url:d+"oberon.img",size:25165824,async:!1},name:"Oberon"},{id:"windows1",R:{url:d+"windows101.img",size:1474560},name:"Windows 1.01"},{id:"windows2",L:{url:d+"windows2.img",size:4177920,async:!1},name:"Windows 2.03"},{id:"linux26",P:{url:d+"linux.iso",size:6547456,async:!1},name:"Linux"},{id:"linux3",
P:{url:d+"linux3.iso",size:8638464,async:!1},name:"Linux"},{id:"linux4",P:{url:d+"linux4.iso",size:7731200,async:!1},name:"Linux",filesystem:{}},{id:"buildroot",Kb:{url:d+"buildroot-bzimage.bin",size:5166352,async:!1},name:"Buildroot Linux",filesystem:{},Tb:"tsc=reliable mitigations=off random.trust_cpu=on",nk:!0},{id:"buildroot6",Kb:{url:d+"buildroot-bzimage68.bin",size:10068480,async:!1},name:"Buildroot Linux 6.8",filesystem:{},Tb:"tsc=reliable mitigations=off random.trust_cpu=on"},{id:"basiclinux",
L:{url:d+"bl3-5.img",size:104857600,async:!1},name:"BasicLinux"},{id:"xpud",P:{url:d+"xpud-0.9.2.iso",size:67108864,async:!1},name:"xPUD",F:268435456},{id:"elks",L:{url:d+"elks-hd32-fat.img",size:32514048,async:!1},name:"ELKS",H:"https://github.com/ghaerr/elks"},{id:"nodeos",Kb:{url:d+"nodeos-kernel.bin",size:14452E3,async:!1},name:"NodeOS",Tb:"tsc=reliable mitigations=off random.trust_cpu=on"},{id:"dsl",F:268435456,P:{url:d+"dsl-4.11.rc2.iso",size:52824064,async:!1},name:"Damn Small Linux",H:"http://www.damnsmalllinux.org/"},
{id:"xwoaf",F:268435456,P:{url:d+"xwoaf_rebuild4.iso",size:2205696,async:!1},name:"xwoaf",H:"https://pupngo.dk/xwinflpy/xwoaf_rebuild.html"},{id:"minix",name:"Minix",F:268435456,P:{url:d+"minix-3.3.0/.iso",size:605581312,async:!0,M:1048576,ba:!0},H:"https://www.minix3.org/"},{id:"unix-v7",name:"Unix V7",L:{url:d+"unix-v7x86-0.8a/.img",size:152764416,async:!0,M:262144,ba:!0}},{id:"kolibrios",R:{url:Rg?d+"kolibri.img":"//builds.kolibrios.org/en_US/data/data/kolibri.img",size:1474560},name:"KolibriOS",
H:"https://kolibrios.org/en/"},{id:"kolibrios-fallback",R:{url:d+"kolibri.img",size:1474560},name:"KolibriOS"},{id:"mu",L:{url:d+"mu-shell.img",size:10321920,async:!1},F:268435456,name:"Mu",H:"https://github.com/akkartik/mu"},{id:"openbsd",L:{url:d+"openbsd/.img",size:1073741824,async:!0,M:1048576,ba:!0},state:{url:d+"openbsd_state-v2.bin.zst"},F:268435456,name:"OpenBSD"},{id:"sortix",P:{url:d+"sortix-1.0-i686.iso",size:71075840,async:!1},F:536870912,name:"Sortix"},{id:"openbsd-boot",L:{url:d+"openbsd/.img",
size:1073741824,async:!0,M:1048576,ba:!0},F:268435456,name:"OpenBSD"},{id:"netbsd",L:{url:d+"netbsd/.img",size:511000064,async:!0,M:1048576,ba:!0},F:268435456,name:"NetBSD"},{id:"crazierl",$b:{url:d+"crazierl-elf.img",size:896592,async:!1},Wb:{url:d+"crazierl-initrd.img",size:18448316,async:!1},Ca:!0,Tb:"kernel /libexec/ld-elf32.so.1",F:134217728,name:"Crazierl"},{id:"solos",R:{url:d+"os8.img",size:1474560},name:"Sol OS",H:"http://oby.ro/os/"},{id:"bootchess",R:{url:d+"bootchess.img",size:1474560},
name:"BootChess",H:"http://www.pouet.net/prod.php?which=64962"},{id:"bootbasic",R:{url:d+"bootbasic.img",size:512},name:"bootBASIC",H:"https://github.com/nanochess/bootBASIC"},{id:"bootlogo",R:{url:d+"bootlogo.img",size:512},name:"bootLogo",H:"https://github.com/nanochess/bootLogo"},{id:"pillman",R:{url:d+"pillman.img",size:512},name:"Pillman",H:"https://github.com/nanochess/Pillman"},{id:"invaders",R:{url:d+"invaders.img",size:512},name:"Invaders",H:"https://github.com/nanochess/Invaders"},{id:"bootos",
R:{url:d+"bootos-all.img",size:368640},name:"bootOS",H:"https://github.com/nanochess/bootOS"},{id:"sectorlisp",R:{url:d+"sectorlisp-friendly.bin",size:512},name:"SectorLISP",H:"https://justine.lol/sectorlisp2/"},{id:"sectorforth",R:{url:d+"sectorforth.img",size:512},name:"sectorforth",H:"https://github.com/cesarblum/sectorforth"},{id:"floppybird",R:{url:d+"floppybird.img",size:1474560},name:"Floppy Bird",H:"http://mihail.co/floppybird"},{id:"stillalive",R:{url:d+"stillalive-os.img",size:368640},name:"Still Alive",
H:"https://github.com/maniekx86/stillalive-os"},{id:"hello-v86",R:{url:d+"hello-v86.img",size:512},name:"Hello v86"},{id:"tetros",R:{url:d+"tetros.img",size:512},name:"TetrOS",H:"https://github.com/daniel-e/tetros"},{id:"dino",R:{url:d+"bootdino.img",size:512},name:"dino",H:"https://github.com/franeklubi/dino"},{id:"bootrogue",R:{url:d+"bootrogue.img",size:512},name:"bootRogue",H:"https://github.com/nanochess/bootRogue"},{id:"duskos",L:{url:d+"duskos.img",async:!1,size:8388608},name:"Dusk OS",H:"http://duskos.org/"},
{id:"windows2000",F:536870912,L:{url:d+"windows2k-v2/.img",size:2147483648,async:!0,M:262144,ba:!0},name:"Windows 2000",state:{url:d+"windows2k_state-v4.bin.zst"},Yb:!0},{id:"windows2000-boot",F:536870912,L:{url:d+"windows2k-v2/.img",size:2147483648,async:!0,M:262144,ba:!0},name:"Windows 2000"},{id:"windows-me",F:268435456,L:{url:d+"windowsme-v2/.img",size:834666496,async:!0,M:262144,ba:!0},state:{url:d+"windows-me_state-v2.bin.zst"},name:"Windows ME"},{id:"windowsnt4",F:536870912,L:{url:d+"winnt4_noacpi/.img",
size:523837440,async:!0,M:262144,ba:!0},name:"Windows NT 4.0",Id:2},{id:"windowsnt35",F:268435456,L:{url:d+"windowsnt351/.img",size:163577856,async:!0,M:262144,ba:!0},name:"Windows NT 3.51"},{id:"windowsnt3",F:268435456,L:{url:d+"winnt31/.img",size:91226112,async:!0,M:262144,ba:!0},name:"Windows NT 3.1"},{id:"windows98",F:134217728,L:{url:d+"windows98/.img",size:314572800,async:!0,M:262144,ba:!0},name:"Windows 98",state:{url:d+"windows98_state-v2.bin.zst"},Yb:!0},{id:"windows98-boot",F:134217728,
L:{url:d+"windows98/.img",size:314572800,async:!0,M:262144,ba:!0},name:"Windows 98"},{id:"windows95",F:67108864,L:{url:d+"windows95-v2/.img",size:471859200,async:!0,M:262144,ba:!0},name:"Windows 95"},{id:"windows95-boot",F:67108864,L:{url:d+"windows95-v2/.img",size:471859200,async:!0,M:262144,ba:!0},name:"Windows 95"},{id:"windows30",F:67108864,P:{url:d+"Win30.iso",size:7774208,async:!1},name:"Windows 3.0"},{id:"windows31",F:67108864,L:{url:d+"win31.img",async:!1,size:34463744},name:"Windows 3.1"},
{id:"tilck",F:134217728,L:{url:d+"tilck.img",async:!1,size:37748736},name:"Tilck",H:"https://github.com/vvaltchev/tilck"},{id:"littlekernel",$b:{url:d+"littlekernel-multiboot.img",async:!1,size:969580},name:"Little Kernel",H:"https://github.com/littlekernel/lk"},{id:"sanos",F:134217728,L:{url:d+"sanos-flp.img",async:!1,size:1474560},name:"Sanos",H:"http://www.jbox.dk/sanos/"},{id:"freebsd",F:268435456,L:{url:d+"freebsd/.img",size:2147483648,async:!0,M:1048576,ba:!0},state:{url:d+"freebsd_state-v2.bin.zst"},
name:"FreeBSD"},{id:"freebsd-boot",F:268435456,L:{url:d+"freebsd/.img",size:2147483648,async:!0,M:1048576,ba:!0},name:"FreeBSD"},{id:"reactos",F:536870912,L:{url:d+"reactos-v3/.img",size:734003200,async:!0,M:1048576,ba:!0},state:{url:d+"reactos_state-v3.bin.zst"},Yb:!0,name:"ReactOS",Ca:!0,ac:"virtio",H:"https://reactos.org/"},{id:"reactos-boot",F:536870912,L:{url:d+"reactos-v2/.img",size:681574400,async:!0,M:1048576,ba:!0},name:"ReactOS",Ca:!0,H:"https://reactos.org/"},{id:"skift",P:{url:d+"skift-20200910.iso",
size:64452608,async:!1},name:"Skift",H:"https://skiftos.org/"},{id:"snowdrop",R:{url:d+"snowdrop.img",size:1474560},name:"Snowdrop",H:"http://www.sebastianmihai.com/snowdrop/"},{id:"openwrt",L:{url:d+"openwrt-18.06.1-x86-legacy-combined-squashfs.img",size:19846474,async:!1},name:"OpenWrt"},{id:"qnx",R:{url:d+"qnx-demo-network-4.05.img",size:1474560},name:"QNX 4.05"},{id:"9front",F:134217728,L:{url:d+"9front-10931.386/.iso",size:489453568,async:!0,M:1048576,ba:!0},state:{url:d+"9front_state-v3.bin.zst"},
Ca:!0,name:"9front",H:"https://9front.org/"},{id:"9front-boot",F:134217728,L:{url:d+"9front-10931.386/.iso",size:489453568,async:!0,M:1048576,ba:!0},Ca:!0,name:"9front",H:"https://9front.org/"},{id:"9legacy",F:536870912,L:{url:d+"9legacy.img",async:!1,size:16E6},name:"9legacy",H:"http://www.9legacy.org/"},{id:"mobius",R:{url:d+"mobius-fd-release5.img",size:1474560},name:"Mobius"},{id:"android",F:536870912,P:{url:d+"android-x86-1.6-r2/.iso",size:54661120,async:!0,M:1048576,ba:!0},name:"Android"},{id:"android4",
F:536870912,P:{url:d+"android_x86_nonsse3_4.4r1_20140904/.iso",size:247463936,async:!0,M:1048576,ba:!0},name:"Android 4"},{id:"tinycore",F:268435456,L:{url:d+"TinyCore-11.0.iso",size:19922944,async:!1},name:"Tinycore",H:"http://www.tinycorelinux.net/"},{id:"slitaz",F:536870912,L:{url:d+"slitaz-rolling-2024.iso",size:56573952,async:!1},name:"SliTaz",H:"https://slitaz.org/"},{id:"freenos",F:268435456,P:{url:d+"FreeNOS-1.0.3.iso",async:!1,size:11014144},name:"FreeNOS",Ca:!0,H:"http://www.freenos.org/"},
{id:"syllable",F:536870912,L:{url:d+"syllable-destop-0.6.7/.img",async:!0,size:524288E3,M:524288,ba:!0},name:"Syllable",H:"http://syllable.metaproject.frl/"},{id:"toaruos",F:536870912,P:{url:d+"toaruos-1.6.1-core.iso",size:67567616,async:!1},name:"ToaruOS",Ca:!0,H:"https://toaruos.org/"},{id:"nopeos",P:{url:d+"nopeos-0.1.iso",size:532480,async:!1},name:"Nope OS",H:"https://github.com/d99kris/nopeos"},{id:"soso",P:{url:d+"soso.iso",size:22546432,async:!1},name:"Soso",H:"https://github.com/ozkl/soso"},
{id:"pcmos",R:{url:d+"PCMOS386-9-user-patched.img",size:1474560},name:"PC-MOS/386",H:"https://github.com/roelandjansen/pcmos386v501"},{id:"jx",R:{url:d+"jx-demo.img",size:1474560},name:"JX",H:"https://www4.cs.fau.de/Projects/JX/index.html"},{id:"house",R:{url:d+"hOp-0.8.img",size:1474560},name:"House",H:"https://programatica.cs.pdx.edu/House/"},{id:"bleskos",name:"BleskOS",P:{url:d+"bleskos_2024u32.iso",size:1835008,async:!1},H:"https://github.com/VendelinSlezak/BleskOS"},{id:"boneos",name:"BoneOS",
P:{url:d+"BoneOS.iso",size:11429888,async:!1},H:"https://amanuel.io/projects/BoneOS/"},{id:"mikeos",name:"MikeOS",P:{url:d+"mikeos.iso",size:3311616,async:!1},H:"https://mikeos.sourceforge.net/"},{id:"bluejay",name:"Blue Jay",R:{url:d+"bj050.img",size:1474560},H:"https://archiveos.org/blue-jay/"},{id:"t3xforth",name:"T3XFORTH",R:{url:d+"t3xforth.img",size:1474560},H:"https://t3x.org/t3xforth/"},{id:"nanoshell",name:"NanoShell",P:{url:d+"nanoshell.iso",size:6785024,async:!1},H:"https://github.com/iProgramMC/NanoShellOS"},
{id:"catk",name:"CatK",P:{url:d+"catkernel.iso",size:11968512,async:!1},H:"https://catk.neocities.org/"},{id:"mcp",name:"M/CP",R:{url:d+"mcp2.img",size:512},H:"https://github.com/ybuzoku/MCP"},{id:"ibm-exploring",name:"Exploring The IBM Personal Computer",R:{url:d+"ibm-exploring.img",size:368640}},{id:"leetos",name:"lEEt/OS",R:{url:d+"leetos.img",size:1474560},H:"http://sininenankka.dy.fi/leetos/index.php"},{id:"newos",name:"NewOS",R:{url:d+"newos-flp.img",size:1474560,async:!1},H:"https://newos.org/"},
{id:"aros-broadway",name:"AROS Broadway",F:536870912,P:{url:d+"broadway10/.iso",size:742051840,async:!0,M:524288,ba:!0},H:"https://web.archive.org/web/20231109224346/http://www.aros-broadway.de/"},{id:"icaros",name:"Icaros Desktop",F:536870912,P:{url:d+"icaros-pc-i386-2.3/.iso",size:726511616,async:!0,M:524288,ba:!0},H:"http://vmwaros.blogspot.com/"},{id:"tinyaros",name:"Tiny Aros",F:536870912,P:{url:d+"tinyaros-pc-i386/.iso",size:111175680,async:!0,M:524288,ba:!0},H:"https://www.tinyaros.it/"},{id:"dancy",
name:"Dancy",P:{url:d+"dancy.iso",size:10485760,async:!1},H:"https://github.com/Tiihala/Dancy"},{id:"curios",name:"CuriOS",L:{url:d+"curios.img",size:83886080,async:!1},H:"https://github.com/h5n1xp/CuriOS"},{id:"os64",name:"OS64",P:{url:d+"os64boot.iso",size:5580800,async:!1},H:"https://os64.blogspot.com/"},{id:"ipxe",name:"iPXE",P:{url:d+"ipxe.iso",size:4194304,async:!1},H:"https://ipxe.org/"},{id:"netboot.xyz",name:"netboot.xyz",P:{url:d+"netboot.xyz.iso",size:2398208,async:!1},H:"https://netboot.xyz/",
ac:"virtio"},{id:"squeaknos",name:"SqueakNOS",P:{url:d+"SqueakNOS.iso",size:61171712,async:!1},F:536870912,H:"https://squeaknos.blogspot.com/"},{id:"chokanji4",name:"Chokanji 4",L:{url:d+"chokanji4/.img.zst",size:10737418240,async:!0,M:262144,ba:!0},F:536870912,H:"https://archive.org/details/brightv4000"},{id:"archhurd",name:"Arch Hurd",L:{url:d+"archhurd-2018.09.28/.img.zst",size:4294967296,async:!0,M:1048576,ba:!0},F:536870912,H:"https://archhurd.org/"},{id:"prettyos",name:"PrettyOS",R:{url:d+"prettyos.img",
size:1474560,async:!1},H:"https://www.prettyos.de/Image.html"},{id:"vanadium",name:"Vanadium OS",P:{url:d+"vanadiumos.iso",size:8388608,async:!1},H:"https://www.durlej.net/software.html"},{id:"xenus",name:"XENUS",L:{url:d+"xenushdd.img",size:52428800,async:!1},H:"https://www.durlej.net/xenus/"},{id:"mojo",name:"Mojo OS",P:{url:d+"mojo-0.2.2.iso",size:4048896,async:!1},H:"https://archiveos.org/mojoos/"},{id:"bsdos",F:134217728,name:"BSD/OS",L:{url:d+"bsdos43/.img.zst",size:1073741824,async:!0,M:1048576,
ba:!0},state:{url:d+"bsdos43_state.bin"},H:"https://en.wikipedia.org/wiki/BSD/OS"},{id:"bsdos-boot",F:134217728,name:"BSD/OS",L:{url:d+"bsdos43/.img.zst",size:1073741824,async:!0,M:1048576,ba:!0},H:"https://en.wikipedia.org/wiki/BSD/OS"},{id:"asuro",name:"Asuro",P:{url:d+"asuro.iso",size:5361664,async:!1},H:"https://asuro.xyz/"}];var e=c.get("profile");if(!e){var g=document.createElement("link");g.rel="prefetch";g.href="build/v86.wasm"+Tg();document.head.appendChild(g)}g=document.createElement("link");
g.rel="prefetch";g.href="build/xterm.js";document.head.appendChild(g);for(const k of d){if(e===k.id){$g(k,c);return}const m=Z("start_"+k.id);m&&(m.onclick=l=>{l.ctrlKey||(l.preventDefault(),m.blur(),$g(k,null))})}if("custom"===e){if(c.has("hda.url")||c.has("cdrom.url")||c.has("fda.url")){$g(null,c);return}}else if(/^[a-zA-Z0-9\-_]+\/[a-zA-Z0-9\-_]+$/g.test(e)){const k="https://v86-user-images.b-cdn.net/"+e;fetch(k+"/profile.json").catch(()=>alert("Profile not found: "+e)).then(m=>m.json()).then(m=>
{function l(p){return p&&{url:k+"/"+p.url,async:p.async,size:p.size}}m={id:m.id,name:m.name,F:m.memory_size,va:m.vga_memory_size,Ca:m.acpi,Sb:m.boot_order,L:l(m.hda),P:l(m.cdrom),R:l(m.fda),$b:l(m.multiboot),Kb:l(m.bzimage),Wb:l(m.initrd)};$g(m,c)})}c.has("m")&&(Z("memory_size").value=c.get("m"));c.has("vram")&&(Z("vga_memory_size").value=c.get("vram"));c.has("relay_url")&&(Z("relay_url").value=c.get("relay_url"));c.has("mute")&&(Z("disable_audio").checked=Vg(c.get("mute")));c.has("acpi")&&(Z("acpi").checked=
Vg(c.get("acpi")));c.has("boot_order")&&(Z("boot_order").value=c.get("boot_order"));c.has("net_device_type")&&(Z("net_device_type").value=c.get("net_device_type"));c.has("mtu")&&(Z("mtu").value=c.get("mtu"));for(const k of["fda","fdb"]){const m=Z(k+"_toggle_empty_disk");m&&(m.onclick=function(l){l.preventDefault();l=document.createElement("select");l.id=k+"_empty_size";for(var p of[320,360,400,640,720,800,1440,2400,2880,3444,5760,7680]){const q=512*p,r=document.createElement("option");r.textContent=
1024E3>q?q/1024+" kB":(q/1024E3).toFixed(2)+" MB";2880===p&&(r.selected=!0);r.value=q;l.appendChild(r)}p=m.parentNode;p.innerHTML="";p.append("Empty disk of ",l)})}for(const k of["hda","hdb"]){const m=Z(k+"_toggle_empty_disk");m&&(m.onclick=function(l){l.preventDefault();l=document.createElement("input");l.id=k+"_empty_size";l.type="number";l.min="0";l.max="2000";l.step="100";l.value="100";const p=m.parentNode;p.innerHTML="";p.append("Empty disk of ",l," MB")})}var h=Array.from(document.querySelectorAll("#oses a.tr")).map(k=>
{const [,m,l]=k.children[1].textContent.match(/([\d\.]+)\+? (\w+)/);let p=+m;"MB"===l?p*=1048576:"KB"===l&&(p*=1024);return{element:k,size:p,ci:"gui_icon"===k.children[2].firstChild.className,family:k.children[3].textContent.replace(/-like/,""),Ih:k.children[4].textContent,status:k.children[5].textContent,source:k.children[6].textContent,languages:new Set(k.children[7].textContent.split(", ")),fh:k.children[8].textContent}});d=[[{id:"linux",Ma:k=>"Linux"===k.family},{id:"bsd",Ma:k=>"BSD"===k.family},
{id:"windows",Ma:k=>"Windows"===k.family},{id:"unix",Ma:k=>"Unix"===k.family},{id:"dos",Ma:k=>"DOS"===k.family},{id:"custom",Ma:k=>"Custom"===k.family}],[{id:"graphical",Ma:k=>k.ci},{id:"text",Ma:k=>!k.ci}],[{id:"floppy",Ma:k=>"Floppy"===k.fh},{id:"cd",Ma:k=>"CD"===k.fh},{id:"hd",Ma:k=>"HD"===k.fh}],[{id:"bootsector",Ma:k=>512>=k.size},{id:"lt5mb",Ma:k=>5242880>=k.size},{id:"gt5mb",Ma:k=>5242880<k.size}],[{id:"modern",Ma:k=>"Modern"===k.status},{id:"historic",Ma:k=>"Historic"===k.status}],[{id:"opensource",
Ma:k=>"Open-source"===k.source},{id:"proprietary",Ma:k=>"Proprietary"===k.source}],[{id:"16bit",Ma:k=>"16-bit"===k.Ih},{id:"32bit",Ma:k=>"32-bit"===k.Ih}],[{id:"asm",Ma:k=>k.languages.has("ASM")},{id:"c",Ma:k=>k.languages.has("C")},{id:"cpp",Ma:k=>k.languages.has("C++")},{id:"other_lang",Ma:k=>["ASM","C","C++"].every(m=>!k.languages.has(m))}]];var f=[];for(const k of d)d=k.filter(m=>{const l=document.getElementById(`filter_${m.id}`);l&&(l.onchange=a,m.element=l);return l}),d.length&&f.push(d);Z("reset_filters")&&
(Z("reset_filters").onclick=function(){for(const k of document.querySelectorAll("#filter input[type=checkbox]"))k.checked=!1;a()});b("network_none","");b("network_inbrowser","inbrowser");b("network_fetch","fetch");b("network_relay","wss://relay.widgetry.org/");b("network_wisp","wisps://wisp.mercurywork.shop/v86/")}else alert("Your browser is not supported because it doesn't support WebAssembly")}window.addEventListener("load",Zg,!1);
window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",ah)},0)});"complete"===document.readyState&&Zg();
function $g(a,b){Z("boot_options").style.display="none";const c=new Map;c.set("profile",a?.id||"custom");const d={};if(a&&(a.state&&(Z("reset").style.display="none"),Ug(a.name),d.Nc=a.state,d.filesystem=a.filesystem,d.R=a.R,d.vb=a.vb,d.P=a.P,d.L=a.L,d.Db=a.Db,d.$b=a.$b,d.Kb=a.Kb,d.Wb=a.Wb,d.Tb=a.Tb,d.xf=a.xf,d.Yb=a.Yb,d.Id=a.Id,d.Ca=a.Ca,d.F=a.F,d.va=a.va,d.Sb=a.Sb,d.ac=a.ac,a.H)){Z("description").style.display="block";var e=document.createElement("a");e.href=a.H;e.textContent=a.name;e.target="_blank";
Z("description").append(document.createTextNode("Running "),e)}if(b){if(!d.Nc){e=parseInt(b.get("chunk_size"),10);0<=e?(e=Math.min(4194304,Math.max(512,e)),e=qa(e)):e=262144;if(b.has("hda.url"))d.L={size:parseInt(b.get("hda.size"),10)||void 0,url:b.get("hda.url"),M:e,async:!0};else if(b.has("hda.empty")){var g=parseInt(b.get("hda.empty"),10);0<g&&(d.L={buffer:new ArrayBuffer(g)})}b.has("hdb.url")?d.Db={size:parseInt(b.get("hdb.size"),10)||void 0,url:b.get("hdb.url"),M:e,async:!0}:b.has("hdb.empty")&&
(g=parseInt(b.get("hdb.empty"),10),0<g&&(d.Db={buffer:new ArrayBuffer(g)}));b.has("cdrom.url")&&(d.P={size:parseInt(b.get("cdrom.size"),10)||void 0,url:b.get("cdrom.url"),M:e,async:!0});b.has("fda.url")&&(d.R={size:parseInt(b.get("fda.size"),10)||void 0,url:b.get("fda.url"),async:!1});e=parseInt(b.get("m"),10);0<e&&(d.F=1048576*Math.max(16,e));e=parseInt(b.get("vram"),10);0<e&&(d.va=1048576*e);d.Ca=b.has("acpi")?Vg(b.get("acpi")):d.Ca;d.Tl="bochs"===b.get("bios");d.ac=b.get("net_device_type")||d.ac;
d.lb=parseInt(b.get("mtu"),10)||void 0}d.Tc=b.get("relay_url");d.Bf=Vg(b.get("disable_jit"));d.lg=Vg(b.get("mute"))}d.Tc||(d.Tc=Z("relay_url").value,Sg.includes(d.Tc)||c.set("relay_url",d.Tc));d.Tc.startsWith("fetch:")&&(d.Yc=d.Tc.slice(6),d.Tc="fetch");d.lg=Z("disable_audio").checked||d.lg;d.lg&&c.set("mute","1");if(!d.Nc){if(e=Z("bios").files[0])d.zb={buffer:e};if(g=Z("vga_bios").files[0])d.ae={buffer:g};if(g=Z("fda_image")?.files[0])d.R={buffer:g};var h=+Z("fda_empty_size")?.value;h&&(d.R={buffer:new ArrayBuffer(h)});
if(h=Z("fdb_image")?.files[0])d.vb={buffer:h};if(h=+Z("fdb_empty_size")?.value)d.vb={buffer:new ArrayBuffer(h)};if(h=Z("cdrom_image").files[0])d.P={buffer:h};const p=Z("hda_image")?.files[0];p&&(d.L={buffer:p});var f=+Z("hda_empty_size")?.value;f&&(f=1048576*Math.max(1,Math.min(2E3,f)),d.L={buffer:new ArrayBuffer(f)},c.set("hda.empty",String(f)));if(f=Z("hdb_image")?.files[0])d.Db={buffer:f};var k=+Z("hdb_empty_size")?.value;k&&(k=1048576*Math.max(1,Math.min(2E3,k)),d.Db={buffer:new ArrayBuffer(k)},
c.set("hdb.empty",String(k)));if(k=Z("multiboot_image")?.files[0])d.$b={buffer:k};var m=Z("bzimage").files[0];m&&(d.Kb={buffer:m});if(m=Z("initrd").files[0])d.Wb={buffer:m};(e=k?.name||p?.name||h?.name||f?.name||g?.name||e?.name)&&Ug(e);e=parseInt(Z("memory_size").value,10)||128;d.F&&128===e||(d.F=1048576*e);128!==e&&c.set("m",String(e));e=parseInt(Z("vga_memory_size").value,10)||8;d.va&&8===e||(d.va=1048576*e);8!==e&&c.set("vram",String(e));e=parseInt(Z("boot_order").value,16)||0;d.Sb&&0===e||(d.Sb=
e);0!==d.Sb&&c.set("boot_order",d.Sb.toString(16));void 0===d.Ca&&(d.Ca=Z("acpi").checked,d.Ca&&c.set("acpi","1"));d.zb||(d.zb={url:"bios/seabios.bin"});d.ae||(d.ae={url:"bios/vgabios.bin"});d.Tl&&(d.zb={url:"bios/bochs-bios.bin"},d.ae={url:"bios/bochs-vgabios.bin"});e=Z("net_device_type").value||"ne2k";d.ac&&"ne2k"===e||(d.ac=e);"ne2k"!==d.ac&&c.set("net_device_type",d.ac);e=parseInt(Z("mtu").value,10)||1500;d.lb&&1500===e||(d.lb=e);1500!==d.lb&&c.set("mtu",d.lb.toString())}b||bh(c);const l=new Sd({$i:"build/v86.wasm"+
Tg(),screen:{ig:Z("screen_container"),Ul:!1},Qc:{type:d.ac||"ne2k",Tc:d.Tc,Yc:d.Yc,lb:d.lb},pj:!0,F:d.F,va:d.va,Sb:d.Sb,zb:d.zb,ae:d.ae,R:d.R,vb:d.vb,L:d.L,Db:d.Db,P:d.P,$b:d.$b,Kb:d.Kb,Wb:d.Wb,Tb:d.Tb,xf:d.xf,Ca:d.Ca,Bf:d.Bf,Nc:d.Nc,filesystem:d.filesystem||{},Cj:d.lg,Yb:d.Yb,Id:d.Id});Xd(l,"emulator-ready",function(){if(l.Ha.u.Ya.exports.profiler_is_enabled()){const p=document.createElement("pre");document.body.appendChild(p);setInterval(function(){if(l.Ld()){var q=l.Ha.u,r="",C="COMPILE COMPILE_SKIPPED_NO_NEW_ENTRY_POINTS COMPILE_WRONG_ADDRESS_SPACE COMPILE_CUT_OFF_AT_END_OF_PAGE COMPILE_WITH_LOOP_SAFETY COMPILE_PAGE COMPILE_PAGE/COMPILE COMPILE_BASIC_BLOCK COMPILE_DUPLICATED_BASIC_BLOCK COMPILE_WASM_BLOCK COMPILE_WASM_LOOP COMPILE_DISPATCHER COMPILE_ENTRY_POINT COMPILE_WASM_TOTAL_BYTES COMPILE_WASM_TOTAL_BYTES/COMPILE_PAGE RUN_INTERPRETED RUN_INTERPRETED_NEW_PAGE RUN_INTERPRETED_PAGE_HAS_CODE RUN_INTERPRETED_PAGE_HAS_ENTRY_AFTER_PAGE_WALK RUN_INTERPRETED_NEAR_END_OF_PAGE RUN_INTERPRETED_DIFFERENT_STATE RUN_INTERPRETED_DIFFERENT_STATE_CPL3 RUN_INTERPRETED_DIFFERENT_STATE_FLAT RUN_INTERPRETED_DIFFERENT_STATE_IS32 RUN_INTERPRETED_DIFFERENT_STATE_SS32 RUN_INTERPRETED_MISSED_COMPILED_ENTRY_RUN_INTERPRETED RUN_INTERPRETED_STEPS RUN_FROM_CACHE RUN_FROM_CACHE_STEPS RUN_FROM_CACHE_STEPS/RUN_FROM_CACHE RUN_FROM_CACHE_STEPS/RUN_INTERPRETED_STEPS DIRECT_EXIT INDIRECT_JUMP INDIRECT_JUMP_NO_ENTRY NORMAL_PAGE_CHANGE NORMAL_FALLTHRU NORMAL_FALLTHRU_WITH_TARGET_BLOCK NORMAL_BRANCH NORMAL_BRANCH_WITH_TARGET_BLOCK CONDITIONAL_JUMP CONDITIONAL_JUMP_PAGE_CHANGE CONDITIONAL_JUMP_EXIT CONDITIONAL_JUMP_FALLTHRU CONDITIONAL_JUMP_FALLTHRU_WITH_TARGET_BLOCK CONDITIONAL_JUMP_BRANCH CONDITIONAL_JUMP_BRANCH_WITH_TARGET_BLOCK DISPATCHER_SMALL DISPATCHER_LARGE LOOP LOOP_SAFETY CONDITION_OPTIMISED CONDITION_UNOPTIMISED CONDITION_UNOPTIMISED_PF CONDITION_UNOPTIMISED_UNHANDLED_L CONDITION_UNOPTIMISED_UNHANDLED_LE FAILED_PAGE_CHANGE SAFE_READ_FAST SAFE_READ_SLOW_PAGE_CROSSED SAFE_READ_SLOW_NOT_VALID SAFE_READ_SLOW_NOT_USER SAFE_READ_SLOW_IN_MAPPED_RANGE SAFE_WRITE_FAST SAFE_WRITE_SLOW_PAGE_CROSSED SAFE_WRITE_SLOW_NOT_VALID SAFE_WRITE_SLOW_NOT_USER SAFE_WRITE_SLOW_IN_MAPPED_RANGE SAFE_WRITE_SLOW_READ_ONLY SAFE_WRITE_SLOW_HAS_CODE SAFE_READ_WRITE_FAST SAFE_READ_WRITE_SLOW_PAGE_CROSSED SAFE_READ_WRITE_SLOW_NOT_VALID SAFE_READ_WRITE_SLOW_NOT_USER SAFE_READ_WRITE_SLOW_IN_MAPPED_RANGE SAFE_READ_WRITE_SLOW_READ_ONLY SAFE_READ_WRITE_SLOW_HAS_CODE PAGE_FAULT TLB_MISS MAIN_LOOP MAIN_LOOP_IDLE DO_MANY_CYCLES CYCLE_INTERNAL INVALIDATE_ALL_MODULES_NO_FREE_WASM_INDICES INVALIDATE_MODULE_WRITTEN_WHILE_COMPILED INVALIDATE_MODULE_UNUSED_AFTER_OVERWRITE INVALIDATE_MODULE_DIRTY_PAGE INVALIDATE_PAGE_HAD_CODE INVALIDATE_PAGE_HAD_ENTRY_POINTS DIRTY_PAGE_DID_NOT_HAVE_CODE RUN_FROM_CACHE_EXIT_SAME_PAGE RUN_FROM_CACHE_EXIT_NEAR_END_OF_PAGE RUN_FROM_CACHE_EXIT_DIFFERENT_PAGE CLEAR_TLB FULL_CLEAR_TLB TLB_FULL TLB_GLOBAL_FULL MODRM_SIMPLE_REG MODRM_SIMPLE_REG_WITH_OFFSET MODRM_SIMPLE_CONST_OFFSET MODRM_COMPLEX SEG_OFFSET_OPTIMISED SEG_OFFSET_NOT_OPTIMISED SEG_OFFSET_NOT_OPTIMISED_ES SEG_OFFSET_NOT_OPTIMISED_FS SEG_OFFSET_NOT_OPTIMISED_GS SEG_OFFSET_NOT_OPTIMISED_NOT_FLAT".split(" "),
E=0;const u={};for(let A=0;A<C.length;A++){const v=C[A];var z=void 0;if(v.includes("/")){E++;const [H,N]=v.split("/");z=u[H]/u[N]}else z=u[v]=q.Ya.exports.profiler_stat_get(A-E),z=1E8<=z?Math.round(z/1E6)+"m":1E5<=z?Math.round(z/1E3)+"k":z;r+=v+"="+z+"\n"}r+="\n";C=q.Ya.exports.get_valid_tlb_entries_count();E=q.Ya.exports.get_valid_global_tlb_entries_count();r=r+("TLB_ENTRIES="+C+" ("+E+" global, "+(C-E)+" non-global)\nWASM_TABLE_FREE=")+(q.Ya.exports.jit_get_wasm_table_index_free_list_count()+"\n");
r+="JIT_CACHE_SIZE="+q.Ya.exports.jit_get_cache_size()+"\n";r+="FLAT_SEGMENTS="+q.Ya.exports.has_flat_segmentation()+"\n";r+="wasm memory size: "+(q.Ia.buffer.byteLength>>20)+"m\n";r+="Config:\n";r+="JIT_DISABLED="+q.Ya.exports.get_jit_config(0)+"\n";r+="MAX_PAGES="+q.Ya.exports.get_jit_config(1)+"\n";r+="JIT_USE_LOOP_SAFETY="+!!q.Ya.exports.get_jit_config(2)+"\n";r+="MAX_EXTRA_BASIC_BLOCKS="+q.Ya.exports.get_jit_config(3)+"\n";q=[Ob(q,!1,!1,!1,!1),Ob(q,!0,!1,!1,!1),Ob(q,!1,!0,!1,!1),Ob(q,!1,!1,!0,
!1),Ob(q,!1,!1,!1,!0)].join("\n\n");p.textContent=r+q}},1E3)}"dsl helenos android android4 redox beos 9legacy".split(" ").includes(a?.id)&&setTimeout(()=>{be(l,"9legacy"===a.id?"1\n":"\n")},3E3);ch(a,d,l);b?.has("c")&&setTimeout(function(){be(l,b.get("c")+"\n")},25);b?.has("s")&&setTimeout(function(){for(var p=b.get("s")+"\n",q=0;q<p.length;q++)l.s.send("serial0-input",p.charCodeAt(q))},25);b?.has("theatre")&&Vg(b?.get("theatre"))&&Z("toggle_theatre").click()});Xd(l,"emulator-loaded",function(){l.Ha.u.A.P||
(Z("change_cdrom_image").style.display="none")});Xd(l,"download-progress",function(p){const q=Z("loading");q.style.display="block";var r=p.pg.split("?",1)[0];if(r.endsWith(".wasm"))r=r.split("/"),q.textContent="Fetching "+r[r.length-1]+" ...";else if(p.If===p.Hf-1&&p.loaded>=p.total-2048)q.textContent="Done downloading. Starting now ...";else{r="Downloading images ";"number"===typeof p.If&&p.Hf&&(r+="["+(p.If+1)+"/"+p.Hf+"] ");if(p.total&&"number"===typeof p.loaded){p=Math.floor(p.loaded/p.total*
100);p=Math.min(100,Math.max(0,p));var C=Math.floor(p/2);r=r+(p+"% [")+"#".repeat(C);r+=" ".repeat(50-C)+"]"}else r+=".".repeat(Xg++%50);q.textContent=r}});Xd(l,"download-error",function(p){const q=Z("loading");q.style.display="block";q.textContent=`Loading ${p.pg} failed. Check your connection and reload the page to try again.`})}
function ch(a,b,c){function d(){c.ob&&c.ob.mf(1,1);var y=Z("screen_container").getBoundingClientRect();y=Math.min(window.innerWidth/y.width,window.innerHeight/y.height);c.ob&&c.ob.mf(y,y)}function e(y){q=y;Z("runtime_options").style.display=q?"block":"none";Z("runtime_infos").style.display=q?"block":"none";Z("filesystem_panel").style.display=m&&q?"block":"none";Z("toggle_ui").value=(q?"Hide":"Show")+" UI"}function g(y){r=y;(Z("scale").disabled=r)?(window.addEventListener("resize",d,!0),Xd(c,"screen-set-size",
d),d()):(window.removeEventListener("resize",d,!0),c.s.unregister("screen-set-size",d),y=parseFloat(Z("scale").value)||1,c.ob&&c.ob.mf(y,y));Z("toggle_zoom_to_fit").value=(r?"Dis":"En")+"able zoom to fit"}function h(){var y=Date.now(),I=c.Ha?c.Ha.u.ik[0]>>>0:0;I<z&&(z-=4294967296);var U=I-z;z=I;v+=U;if(I=y-C)E+=I,C=y,Z("speed").textContent=(U/1E3/I).toFixed(1),Z("avg_speed").textContent=(v/1E3/E).toFixed(1),y=E/1E3|0,Z("running_time").textContent=60>y?y+"s":3600>y?(y/60|0)+"m "+ea(y%60,2)+"s":(y/
3600|0)+"h "+ea((y/60|0)%60,2)+"m "+ea(y%60,2)+"s"}function f(y,I,U){var V=Z("get_"+U+"_image");!y||y.async?V.style.display="none":V.onclick=function(){const ta=I.file&&I.file.name||(a?.id||"v86")+("cdrom"===U?".iso":".img");if(I.ai){var Ka=I.ai(ta);ya(Ka,ta)}else I.Cb(function(ab){ab?xa(ab,ta):alert("The file could not be loaded. Maybe it's too big?")});V.blur()}}function k(y){y.ctrlKey?window.onbeforeunload=function(){window.onbeforeunload=null;return"CTRL-W cannot be sent to the emulator."}:window.onbeforeunload=
null}Z("loading").style.display="none";Z("runtime_options").style.display="block";Z("runtime_infos").style.display="block";Z("screen_container").style.display="block";var m=!1;b.filesystem?(m=!0,dh(c)):Xd(c,"9p-attach",function(){m=!0;dh(c)});Z("run").onclick=function(){c.Ld()?(Z("run").value="Run",c.stop()):(Z("run").value="Pause",c.Wf());Z("run").blur()};Z("exit").onclick=function(){c.Da();const y=new URL(location.href);y.searchParams.delete("profile");location.href=y.pathname+y.search};Z("lock_mouse").onclick=
function(){if(!l)Z("toggle_mouse").onclick();ce();Z("lock_mouse").blur()};var l=!0;Z("toggle_mouse").onclick=function(){l=!l;c.j&&(c.j.og=l);Z("toggle_mouse").value=(l?"Dis":"En")+"able mouse";Z("toggle_mouse").blur()};if(a?.nk)Z("toggle_mouse").onclick();var p=!1,q=!0,r=!1;Z("toggle_ui").onclick=function(){e(!q);Z("toggle_ui").blur()};Z("toggle_theatre").onclick=function(){p=!p;q||e(!0);!p&&r&&g(!1);for(const y of["screen_container","runtime_options","runtime_infos","filesystem_panel"])Z(y).classList.toggle("theatre_"+
y);Z("theatre_background").style.display=p?"block":"none";Z("toggle_zoom_to_fit").style.display=p?"inline":"none";Z("toggle_ui").style.display=p?"block":"none";document.body.style.overflow=p?"hidden":"visible";Z("toggle_theatre").value=(p?"Dis":"En")+"able theatre mode";Z("toggle_theatre").blur()};Z("toggle_zoom_to_fit").onclick=function(){g(!r);Z("toggle_zoom_to_fit").blur()};var C=0,E=0,z=0,u=null,A=!1,v=0;Xd(c,"emulator-started",function(){C=Date.now();u=setInterval(h,1E3)});Xd(c,"emulator-stopped",
function(){h();null!==u&&clearInterval(u)});var H=0,N=0,P=[];Xd(c,"9p-read-start",function(y){y=y[0];P.push(y);Z("info_filesystem").style.display="block";Z("info_filesystem_status").textContent="Loading ...";Z("info_filesystem_last_file").textContent=y});Xd(c,"9p-read-end",function(y){H+=y[1];Z("info_filesystem_bytes_read").textContent=H;const I=y[0];P=P.filter(U=>U!==I);P[0]?Z("info_filesystem_last_file").textContent=P[0]:Z("info_filesystem_status").textContent="Idle"});Xd(c,"9p-write-end",function(y){N+=
y[1];Z("info_filesystem_bytes_written").textContent=N;P[0]||(Z("info_filesystem_last_file").textContent=y[0])});var da=0,Ub=0,T=0,ja=0;Z("ide_type").textContent=c.Bb.P?" (CD-ROM)":" (hard disk)";Xd(c,"ide-read-start",function(){Z("info_storage").style.display="block";Z("info_storage_status").textContent="Loading ..."});Xd(c,"ide-read-end",function(y){da+=y[1];Ub+=y[2];Z("info_storage_status").textContent="Idle";Z("info_storage_bytes_read").textContent=da;Z("info_storage_sectors_read").textContent=
Ub});Xd(c,"ide-write-end",function(y){T+=y[1];ja+=y[2];Z("info_storage_bytes_written").textContent=T;Z("info_storage_sectors_written").textContent=ja});var pb=0,ob=0;Xd(c,"eth-receive-end",function(y){ob+=y[0];Z("info_network").style.display="block";Z("info_network_bytes_received").textContent=ob});Xd(c,"eth-transmit-end",function(y){pb+=y[0];Z("info_network").style.display="block";Z("info_network_bytes_transmitted").textContent=pb});Xd(c,"mouse-enable",function(y){A=y;Z("info_mouse_enabled").textContent=
y?"Yes":"No"});Xd(c,"screen-set-size",function(y){const [I,U,V]=y;Z("info_res").textContent=I+"x"+U+(V?"x"+V:"");Z("info_vga_mode").textContent=V?"Graphical":"Text"});Z("reset").onclick=function(){c.ph();Z("reset").blur()};f(b.L,c.Bb.L,"hda");f(b.Db,c.Bb.Db,"hdb");f(b.R,c.Bb.R,"fda");f(b.vb,c.Bb.vb,"fdb");f(b.P,c.Bb.P,"cdrom");Z("change_fda_image").value=b.R?"Eject floppy image":"Insert floppy image";Z("change_fda_image").onclick=function(){if(c.Ha.u.A.cd.Na[0].Cb())vf(c.Ha.u.A.cd.Na[0]),Z("change_fda_image").value=
"Insert floppy image";else{const y=document.createElement("input");y.type="file";y.onchange=async function(){const I=y.files[0];I&&(await Yd(c,{buffer:I}),Z("change_fda_image").value="Eject floppy image")};y.click()}Z("change_fda_image").blur()};Z("change_fdb_image").value=b.vb?"Eject second floppy image":"Insert second floppy image";Z("change_fdb_image").onclick=function(){if(c.Ha.u.A.cd.Na[1].Cb())vf(c.Ha.u.A.cd.Na[1]),Z("change_fdb_image").value="Insert second floppy image";else{const y=document.createElement("input");
y.type="file";y.onchange=async function(){const I=y.files[0];I&&(await $d(c,{buffer:I}),Z("change_fdb_image").value="Eject second floppy image")};y.click()}Z("change_fdb_image").blur()};Z("change_cdrom_image").value=b.P?"Eject CD image":"Insert CD image";Z("change_cdrom_image").onclick=function(){if(c.Ha.u.A.P.buffer)Pf(c.Ha.u.A.P),Z("change_cdrom_image").value="Insert CD image";else{const y=document.createElement("input");y.type="file";y.multiple="multiple";y.onchange=async function(){const I=y.files;
if(1===I.length&&/\.(iso(9660|img)?|cdr)$/i.test(I[0].name))var U=I[0];else if(I.length){U=[];for(const V of I)U.push({name:V.name,jg:new Uint8Array(await Wg(V))});U=Qg(U).buffer}U&&(await c.Hg({buffer:U}),Z("change_cdrom_image").value="Eject CD image")};y.click()}Z("change_cdrom_image").blur()};Z("memory_dump").onclick=function(){const y=c.Ha.u.xb;xa(new Uint8Array(y.buffer,y.byteOffset,y.length),"v86memory.bin");Z("memory_dump").blur()};Z("capture_network_traffic").onclick=function(){function y(U,
V){var ta=I,Ka=ta.push,ab=performance.now()/1E3;const bb=[];let ua=0;for(;ua+15<V.length;ua+=16){var pa=ea(ua.toString(16).toUpperCase(),5)+"   ";for(var va=0;16>va;va++)pa+=ea(V[ua+va].toString(16).toUpperCase(),2)+" ";pa+="  ";for(va=0;16>va;va++){var D=V[ua+va];pa+=33<=D&&34!==D&&92!==D&&126>=D?String.fromCharCode(D):"."}bb.push(pa)}for(pa=ea(ua.toString(16).toUpperCase(),5)+"   ";ua<V.length;ua++)pa+=ea(V[ua].toString(16).toUpperCase(),2)+" ";va=ua&15;pa+="   ".repeat(16-va);pa+="  ";for(D=0;D<
va;D++){const B=V[ua+D];pa+=33<=B&&34!==B&&92!==B&&126>=B?String.fromCharCode(B):"."}bb.push(pa);Ka.call(ta,{direction:U,time:ab,gk:"\n"+bb.join("\n")+"\n"});Z("capture_network_traffic").value=I.length+" packets"}this.value="0 packets";let I=[];c.ye.register("net0-receive",y.bind(this,"I"));Xd(c,"net0-send",y.bind(this,"O"));this.onclick=function(){const U=I.map(({direction:V,time:ta,gk:Ka})=>V+" "+ta.toFixed(6)+Ka+"\n").join("");xa(U,"traffic.hex");I=[];this.value="0 packets"}};Z("save_state").onclick=
async function(){const y=await c.qh();xa(y,"v86state.bin");Z("save_state").blur()};Z("load_state").onclick=function(){Z("load_state_input").click();Z("load_state").blur()};Z("load_state_input").onchange=async function(){var y=this.files[0];if(y){var I=c.Ld();I&&await c.stop();var U=new FileReader;U.onload=async function(V){try{await c.Fg(V.target.result)}catch(ta){throw alert("Something bad happened while restoring the state:\n"+ta+"\n\nNote that the current configuration must be the same as the original"),
ta;}I&&c.Wf()};U.readAsArrayBuffer(y);this.value=""}};Z("ctrlaltdel").onclick=function(){ae(c,[29,56,83,157,184,211]);Z("ctrlaltdel").blur()};Z("alttab").onclick=function(){ae(c,[56,15]);setTimeout(function(){ae(c,[184,143])},100);Z("alttab").blur()};Z("scale").onchange=function(){var y=parseFloat(this.value);(y||0<y)&&c.ob&&c.ob.mf(y,y)};Z("fullscreen").onclick=function(){if(c.ob){var y=document.getElementById("screen_container");if(y){var I=y.requestFullScreen||y.webkitRequestFullscreen||y.mozRequestFullScreen||
y.msRequestFullScreen;I&&(I.call(y),(y=document.getElementsByClassName("phone_keyboard")[0])&&y.focus());try{navigator.keyboard.lock()}catch(U){}ce()}}};Z("screen_container").onclick=function(y){c.Ld()&&"suspended"===c.g?.ca?.state&&c.g.ca.resume();l&&A&&ce();if(window.getSelection().isCollapsed){const I=document.getElementsByClassName("phone_keyboard")[0];I.style.top=window.scrollY+y.clientY+20+"px";I.style.left=window.scrollX+y.clientX+"px";I.value="";I.focus()}};b=document.getElementsByClassName("phone_keyboard")[0];
b.setAttribute("autocorrect","off");b.setAttribute("autocapitalize","off");b.setAttribute("spellcheck","false");b.tabIndex=0;Z("take_screenshot").onclick=function(){const y=c.ob?c.ob.kk():null;try{window.open("").document.write(y.outerHTML)}catch(I){}Z("take_screenshot").blur()};if(c.g){let y=!1;Z("mute").onclick=function(){y?(c.g.yg.Ig(1,void 0),y=!1,Z("mute").value="Mute"):(c.g.yg.Ig(0,void 0),y=!0,Z("mute").value="Unmute");Z("mute").blur()}}else Z("mute").remove();window.addEventListener("keydown",
k,!1);window.addEventListener("keyup",k,!1);window.addEventListener("blur",k,!1);b=document.createElement("script");b.src="build/xterm.js";b.async=!0;b.onload=function(){var y=Z("terminal");c.tc&&c.tc.Da&&c.tc.Da();c.tc=new Qc(y,c.s);c.tc.show()};document.body.appendChild(b)}
function dh(a){Z("filesystem_panel").style.display="block";Z("filesystem_send_file").onchange=function(){Array.prototype.forEach.call(this.files,function(b){var c=new Ja(b);c.onload=function(){c.Cb(async function(d){await a.vj("/"+b.name,new Uint8Array(d))})};c.load()},this);this.value="";this.blur()};Z("filesystem_get_file").onkeypress=async function(b){if(13===b.which){this.disabled=!0;try{var c=await a.Vf(this.value)}catch(d){console.log(d)}this.disabled=!1;c?(b=this.value.replace(/\/$/,"").split("/"),
b=b[b.length-1]||"root",xa(c,b),this.value=""):alert("Can't read file")}}}function ah(){location.reload()}function bh(a){window.history.pushState&&(a="?"+Array.from(a.entries()).map(([b,c])=>b+"="+c.replace(/[?&=#+]/g,encodeURIComponent)).join("&"),window.history.pushState({search:a},"",a))};
